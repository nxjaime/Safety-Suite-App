{
  "version": 3,
  "sources": ["../index.js", "../core/loki-unified-styles.js", "../core/loki-theme.js", "../core/loki-api-client.js", "../core/loki-state.js", "../components/loki-task-board.js", "../components/loki-session-control.js", "../components/loki-log-stream.js", "../components/loki-memory-browser.js", "../components/loki-learning-dashboard.js"],
  "sourcesContent": ["/**\n * Loki Mode Dashboard UI Components\n *\n * Reusable web components for building Loki Mode dashboard interfaces.\n *\n * Usage:\n *   import { LokiTaskBoard, LokiSessionControl, LokiLogStream, LokiMemoryBrowser } from 'dashboard-ui';\n *\n *   // Or import individual components\n *   import 'dashboard-ui/components/loki-task-board.js';\n *\n *   // For unified styling across contexts\n *   import { UnifiedThemeManager, THEMES, BASE_STYLES } from 'dashboard-ui';\n */\n\n// Core utilities - import for local use and re-export\nimport {\n  LokiTheme,\n  LokiElement,\n  THEME_VARIABLES,\n  COMMON_STYLES,\n  UnifiedThemeManager,\n  BASE_STYLES,\n  KeyboardHandler,\n  KEYBOARD_SHORTCUTS,\n  ARIA_PATTERNS,\n} from './core/loki-theme.js';\nimport { LokiApiClient, getApiClient, createApiClient, ApiEvents } from './core/loki-api-client.js';\nimport { LokiState, getState, createStore, STATE_CHANGE_EVENT } from './core/loki-state.js';\n\n// Import unified styles directly for full access\nimport {\n  THEMES,\n  SPACING,\n  RADIUS,\n  TYPOGRAPHY,\n  ANIMATION,\n  BREAKPOINTS,\n  Z_INDEX,\n  generateThemeCSS,\n  generateTokensCSS,\n} from './core/loki-unified-styles.js';\n\n// Re-export core utilities (legacy)\nexport { LokiTheme, LokiElement, THEME_VARIABLES, COMMON_STYLES };\nexport { LokiApiClient, getApiClient, createApiClient, ApiEvents };\nexport { LokiState, getState, createStore, STATE_CHANGE_EVENT };\n\n// Re-export unified styles (recommended for new code)\nexport {\n  UnifiedThemeManager,\n  BASE_STYLES,\n  KeyboardHandler,\n  KEYBOARD_SHORTCUTS,\n  ARIA_PATTERNS,\n  THEMES,\n  SPACING,\n  RADIUS,\n  TYPOGRAPHY,\n  ANIMATION,\n  BREAKPOINTS,\n  Z_INDEX,\n  generateThemeCSS,\n  generateTokensCSS,\n};\n\n// Components\nexport { LokiTaskBoard } from './components/loki-task-board.js';\nexport { LokiSessionControl } from './components/loki-session-control.js';\nexport { LokiLogStream } from './components/loki-log-stream.js';\nexport { LokiMemoryBrowser } from './components/loki-memory-browser.js';\nexport { LokiLearningDashboard } from './components/loki-learning-dashboard.js';\n\n// Version\nexport const VERSION = '1.2.0';\n\n/**\n * Initialize all components with default configuration\n * @param {object} config - Configuration options\n * @param {string} config.apiUrl - API base URL\n * @param {string} config.theme - Theme name (light, dark, high-contrast, vscode-light, vscode-dark)\n * @param {boolean} config.autoDetectContext - Auto-detect VS Code/browser context (default: true)\n */\nexport function init(config = {}) {\n  // Initialize theme system\n  if (config.theme) {\n    UnifiedThemeManager.setTheme(config.theme);\n  } else if (config.autoDetectContext !== false) {\n    // Auto-detect context and apply appropriate theme\n    UnifiedThemeManager.init();\n  } else {\n    // Fall back to legacy init\n    LokiTheme.init();\n  }\n\n  // Set global API URL if provided\n  if (config.apiUrl) {\n    getApiClient({ baseUrl: config.apiUrl });\n  }\n\n  return {\n    theme: UnifiedThemeManager.getTheme(),\n    context: UnifiedThemeManager.detectContext(),\n  };\n}\n\n// Auto-register components when imported\nconst componentModules = [\n  './components/loki-task-board.js',\n  './components/loki-session-control.js',\n  './components/loki-log-stream.js',\n  './components/loki-memory-browser.js',\n  './components/loki-learning-dashboard.js',\n];\n\n// Components are registered via customElements.define in their respective files\n", "/**\n * Loki Mode Unified Style System\n *\n * Provides consistent styling across all contexts:\n * - Browser (standalone)\n * - VS Code webview (light/dark/high-contrast)\n * - CLI-embedded HTML\n *\n * @version 1.0.0\n */\n\n// =============================================================================\n// THEME DEFINITIONS\n// =============================================================================\n\n/**\n * Complete theme definitions with all CSS custom properties\n * Themes: light, dark, high-contrast, vscode-light, vscode-dark\n */\nexport const THEMES = {\n  // Standard light theme (Anthropic design language)\n  light: {\n    // Background layers\n    '--loki-bg-primary': '#faf9f0',\n    '--loki-bg-secondary': '#f5f4eb',\n    '--loki-bg-tertiary': '#eeeddf',\n    '--loki-bg-card': '#ffffff',\n    '--loki-bg-hover': '#f0efe6',\n    '--loki-bg-active': '#e8e7dc',\n    '--loki-bg-overlay': 'rgba(0, 0, 0, 0.5)',\n\n    // Accent colors\n    '--loki-accent': '#d97757',\n    '--loki-accent-hover': '#c56a4c',\n    '--loki-accent-active': '#b35d40',\n    '--loki-accent-light': '#e8956f',\n    '--loki-accent-muted': 'rgba(217, 119, 87, 0.12)',\n\n    // Text hierarchy\n    '--loki-text-primary': '#1a1a1a',\n    '--loki-text-secondary': '#5c5c5c',\n    '--loki-text-muted': '#8a8a8a',\n    '--loki-text-disabled': '#b0b0b0',\n    '--loki-text-inverse': '#ffffff',\n\n    // Border colors\n    '--loki-border': '#e5e3de',\n    '--loki-border-light': '#d4d2cb',\n    '--loki-border-focus': '#d97757',\n\n    // Status colors - semantic\n    '--loki-success': '#16a34a',\n    '--loki-success-muted': 'rgba(22, 163, 74, 0.12)',\n    '--loki-warning': '#ca8a04',\n    '--loki-warning-muted': 'rgba(202, 138, 4, 0.12)',\n    '--loki-error': '#dc2626',\n    '--loki-error-muted': 'rgba(220, 38, 38, 0.12)',\n    '--loki-info': '#2563eb',\n    '--loki-info-muted': 'rgba(37, 99, 235, 0.12)',\n\n    // Legacy aliases (for backwards compatibility)\n    '--loki-green': '#16a34a',\n    '--loki-green-muted': 'rgba(22, 163, 74, 0.12)',\n    '--loki-yellow': '#ca8a04',\n    '--loki-yellow-muted': 'rgba(202, 138, 4, 0.12)',\n    '--loki-red': '#dc2626',\n    '--loki-red-muted': 'rgba(220, 38, 38, 0.12)',\n    '--loki-blue': '#2563eb',\n    '--loki-blue-muted': 'rgba(37, 99, 235, 0.12)',\n    '--loki-purple': '#9333ea',\n    '--loki-purple-muted': 'rgba(147, 51, 234, 0.12)',\n\n    // Model-specific colors\n    '--loki-opus': '#d97706',\n    '--loki-sonnet': '#4f46e5',\n    '--loki-haiku': '#059669',\n\n    // Shadow definitions\n    '--loki-shadow-sm': '0 1px 2px rgba(0, 0, 0, 0.05)',\n    '--loki-shadow-md': '0 4px 6px rgba(0, 0, 0, 0.07)',\n    '--loki-shadow-lg': '0 10px 15px rgba(0, 0, 0, 0.1)',\n    '--loki-shadow-focus': '0 0 0 3px rgba(217, 119, 87, 0.3)',\n  },\n\n  // Standard dark theme\n  dark: {\n    // Background layers\n    '--loki-bg-primary': '#131314',\n    '--loki-bg-secondary': '#1a1a1b',\n    '--loki-bg-tertiary': '#232325',\n    '--loki-bg-card': '#1e1e20',\n    '--loki-bg-hover': '#2a2a2d',\n    '--loki-bg-active': '#333336',\n    '--loki-bg-overlay': 'rgba(0, 0, 0, 0.7)',\n\n    // Accent colors\n    '--loki-accent': '#d97757',\n    '--loki-accent-hover': '#e08668',\n    '--loki-accent-active': '#e8956f',\n    '--loki-accent-light': '#e8956f',\n    '--loki-accent-muted': 'rgba(217, 119, 87, 0.15)',\n\n    // Text hierarchy\n    '--loki-text-primary': '#f5f5f5',\n    '--loki-text-secondary': '#a1a1a6',\n    '--loki-text-muted': '#6b6b70',\n    '--loki-text-disabled': '#4a4a4f',\n    '--loki-text-inverse': '#1a1a1a',\n\n    // Border colors\n    '--loki-border': '#2d2d30',\n    '--loki-border-light': '#3d3d42',\n    '--loki-border-focus': '#d97757',\n\n    // Status colors - semantic\n    '--loki-success': '#22c55e',\n    '--loki-success-muted': 'rgba(34, 197, 94, 0.15)',\n    '--loki-warning': '#eab308',\n    '--loki-warning-muted': 'rgba(234, 179, 8, 0.15)',\n    '--loki-error': '#ef4444',\n    '--loki-error-muted': 'rgba(239, 68, 68, 0.15)',\n    '--loki-info': '#3b82f6',\n    '--loki-info-muted': 'rgba(59, 130, 246, 0.15)',\n\n    // Legacy aliases\n    '--loki-green': '#22c55e',\n    '--loki-green-muted': 'rgba(34, 197, 94, 0.15)',\n    '--loki-yellow': '#eab308',\n    '--loki-yellow-muted': 'rgba(234, 179, 8, 0.15)',\n    '--loki-red': '#ef4444',\n    '--loki-red-muted': 'rgba(239, 68, 68, 0.15)',\n    '--loki-blue': '#3b82f6',\n    '--loki-blue-muted': 'rgba(59, 130, 246, 0.15)',\n    '--loki-purple': '#a855f7',\n    '--loki-purple-muted': 'rgba(168, 85, 247, 0.15)',\n\n    // Model colors\n    '--loki-opus': '#f59e0b',\n    '--loki-sonnet': '#6366f1',\n    '--loki-haiku': '#10b981',\n\n    // Shadows\n    '--loki-shadow-sm': '0 1px 2px rgba(0, 0, 0, 0.3)',\n    '--loki-shadow-md': '0 4px 6px rgba(0, 0, 0, 0.4)',\n    '--loki-shadow-lg': '0 10px 15px rgba(0, 0, 0, 0.5)',\n    '--loki-shadow-focus': '0 0 0 3px rgba(217, 119, 87, 0.4)',\n  },\n\n  // High contrast theme (accessibility)\n  'high-contrast': {\n    // Background layers - pure black/white\n    '--loki-bg-primary': '#000000',\n    '--loki-bg-secondary': '#0a0a0a',\n    '--loki-bg-tertiary': '#141414',\n    '--loki-bg-card': '#0a0a0a',\n    '--loki-bg-hover': '#1a1a1a',\n    '--loki-bg-active': '#242424',\n    '--loki-bg-overlay': 'rgba(0, 0, 0, 0.9)',\n\n    // High contrast accent\n    '--loki-accent': '#ff9d7a',\n    '--loki-accent-hover': '#ffb396',\n    '--loki-accent-active': '#ffc9b2',\n    '--loki-accent-light': '#ffb396',\n    '--loki-accent-muted': 'rgba(255, 157, 122, 0.25)',\n\n    // High contrast text\n    '--loki-text-primary': '#ffffff',\n    '--loki-text-secondary': '#e0e0e0',\n    '--loki-text-muted': '#b0b0b0',\n    '--loki-text-disabled': '#666666',\n    '--loki-text-inverse': '#000000',\n\n    // High contrast borders\n    '--loki-border': '#ffffff',\n    '--loki-border-light': '#cccccc',\n    '--loki-border-focus': '#ff9d7a',\n\n    // High contrast status colors\n    '--loki-success': '#4ade80',\n    '--loki-success-muted': 'rgba(74, 222, 128, 0.25)',\n    '--loki-warning': '#fde047',\n    '--loki-warning-muted': 'rgba(253, 224, 71, 0.25)',\n    '--loki-error': '#f87171',\n    '--loki-error-muted': 'rgba(248, 113, 113, 0.25)',\n    '--loki-info': '#60a5fa',\n    '--loki-info-muted': 'rgba(96, 165, 250, 0.25)',\n\n    // Legacy aliases\n    '--loki-green': '#4ade80',\n    '--loki-green-muted': 'rgba(74, 222, 128, 0.25)',\n    '--loki-yellow': '#fde047',\n    '--loki-yellow-muted': 'rgba(253, 224, 71, 0.25)',\n    '--loki-red': '#f87171',\n    '--loki-red-muted': 'rgba(248, 113, 113, 0.25)',\n    '--loki-blue': '#60a5fa',\n    '--loki-blue-muted': 'rgba(96, 165, 250, 0.25)',\n    '--loki-purple': '#c084fc',\n    '--loki-purple-muted': 'rgba(192, 132, 252, 0.25)',\n\n    // Model colors\n    '--loki-opus': '#fbbf24',\n    '--loki-sonnet': '#818cf8',\n    '--loki-haiku': '#34d399',\n\n    // High contrast shadows (using outlines instead)\n    '--loki-shadow-sm': 'none',\n    '--loki-shadow-md': 'none',\n    '--loki-shadow-lg': 'none',\n    '--loki-shadow-focus': '0 0 0 3px #ff9d7a',\n  },\n\n  // VS Code Light theme - maps VS Code variables\n  'vscode-light': {\n    '--loki-bg-primary': 'var(--vscode-editor-background, #ffffff)',\n    '--loki-bg-secondary': 'var(--vscode-sideBar-background, #f3f3f3)',\n    '--loki-bg-tertiary': 'var(--vscode-input-background, #ffffff)',\n    '--loki-bg-card': 'var(--vscode-editor-background, #ffffff)',\n    '--loki-bg-hover': 'var(--vscode-list-hoverBackground, #e8e8e8)',\n    '--loki-bg-active': 'var(--vscode-list-activeSelectionBackground, #0060c0)',\n    '--loki-bg-overlay': 'rgba(0, 0, 0, 0.4)',\n\n    '--loki-accent': 'var(--vscode-focusBorder, #0066cc)',\n    '--loki-accent-hover': 'var(--vscode-button-hoverBackground, #0055aa)',\n    '--loki-accent-active': 'var(--vscode-button-background, #007acc)',\n    '--loki-accent-light': 'var(--vscode-focusBorder, #0066cc)',\n    '--loki-accent-muted': 'var(--vscode-editor-selectionBackground, rgba(0, 102, 204, 0.2))',\n\n    '--loki-text-primary': 'var(--vscode-foreground, #333333)',\n    '--loki-text-secondary': 'var(--vscode-descriptionForeground, #717171)',\n    '--loki-text-muted': 'var(--vscode-disabledForeground, #a0a0a0)',\n    '--loki-text-disabled': 'var(--vscode-disabledForeground, #cccccc)',\n    '--loki-text-inverse': 'var(--vscode-button-foreground, #ffffff)',\n\n    '--loki-border': 'var(--vscode-widget-border, #c8c8c8)',\n    '--loki-border-light': 'var(--vscode-widget-border, #e0e0e0)',\n    '--loki-border-focus': 'var(--vscode-focusBorder, #0066cc)',\n\n    '--loki-success': 'var(--vscode-testing-iconPassed, #388a34)',\n    '--loki-success-muted': 'rgba(56, 138, 52, 0.15)',\n    '--loki-warning': 'var(--vscode-editorWarning-foreground, #bf8803)',\n    '--loki-warning-muted': 'rgba(191, 136, 3, 0.15)',\n    '--loki-error': 'var(--vscode-errorForeground, #e51400)',\n    '--loki-error-muted': 'rgba(229, 20, 0, 0.15)',\n    '--loki-info': 'var(--vscode-editorInfo-foreground, #1a85ff)',\n    '--loki-info-muted': 'rgba(26, 133, 255, 0.15)',\n\n    '--loki-green': 'var(--vscode-testing-iconPassed, #388a34)',\n    '--loki-green-muted': 'rgba(56, 138, 52, 0.15)',\n    '--loki-yellow': 'var(--vscode-editorWarning-foreground, #bf8803)',\n    '--loki-yellow-muted': 'rgba(191, 136, 3, 0.15)',\n    '--loki-red': 'var(--vscode-errorForeground, #e51400)',\n    '--loki-red-muted': 'rgba(229, 20, 0, 0.15)',\n    '--loki-blue': 'var(--vscode-editorInfo-foreground, #1a85ff)',\n    '--loki-blue-muted': 'rgba(26, 133, 255, 0.15)',\n    '--loki-purple': '#9333ea',\n    '--loki-purple-muted': 'rgba(147, 51, 234, 0.15)',\n\n    '--loki-opus': '#d97706',\n    '--loki-sonnet': '#4f46e5',\n    '--loki-haiku': '#059669',\n\n    '--loki-shadow-sm': '0 1px 2px rgba(0, 0, 0, 0.05)',\n    '--loki-shadow-md': '0 2px 4px rgba(0, 0, 0, 0.1)',\n    '--loki-shadow-lg': '0 4px 8px rgba(0, 0, 0, 0.15)',\n    '--loki-shadow-focus': '0 0 0 2px var(--vscode-focusBorder, #0066cc)',\n  },\n\n  // VS Code Dark theme\n  'vscode-dark': {\n    '--loki-bg-primary': 'var(--vscode-editor-background, #1e1e1e)',\n    '--loki-bg-secondary': 'var(--vscode-sideBar-background, #252526)',\n    '--loki-bg-tertiary': 'var(--vscode-input-background, #3c3c3c)',\n    '--loki-bg-card': 'var(--vscode-editor-background, #1e1e1e)',\n    '--loki-bg-hover': 'var(--vscode-list-hoverBackground, #2a2d2e)',\n    '--loki-bg-active': 'var(--vscode-list-activeSelectionBackground, #094771)',\n    '--loki-bg-overlay': 'rgba(0, 0, 0, 0.6)',\n\n    '--loki-accent': 'var(--vscode-focusBorder, #007fd4)',\n    '--loki-accent-hover': 'var(--vscode-button-hoverBackground, #1177bb)',\n    '--loki-accent-active': 'var(--vscode-button-background, #0e639c)',\n    '--loki-accent-light': 'var(--vscode-focusBorder, #007fd4)',\n    '--loki-accent-muted': 'var(--vscode-editor-selectionBackground, rgba(0, 127, 212, 0.25))',\n\n    '--loki-text-primary': 'var(--vscode-foreground, #cccccc)',\n    '--loki-text-secondary': 'var(--vscode-descriptionForeground, #9d9d9d)',\n    '--loki-text-muted': 'var(--vscode-disabledForeground, #6b6b6b)',\n    '--loki-text-disabled': 'var(--vscode-disabledForeground, #4d4d4d)',\n    '--loki-text-inverse': 'var(--vscode-button-foreground, #ffffff)',\n\n    '--loki-border': 'var(--vscode-widget-border, #454545)',\n    '--loki-border-light': 'var(--vscode-widget-border, #5a5a5a)',\n    '--loki-border-focus': 'var(--vscode-focusBorder, #007fd4)',\n\n    '--loki-success': 'var(--vscode-testing-iconPassed, #89d185)',\n    '--loki-success-muted': 'rgba(137, 209, 133, 0.2)',\n    '--loki-warning': 'var(--vscode-editorWarning-foreground, #cca700)',\n    '--loki-warning-muted': 'rgba(204, 167, 0, 0.2)',\n    '--loki-error': 'var(--vscode-errorForeground, #f48771)',\n    '--loki-error-muted': 'rgba(244, 135, 113, 0.2)',\n    '--loki-info': 'var(--vscode-editorInfo-foreground, #75beff)',\n    '--loki-info-muted': 'rgba(117, 190, 255, 0.2)',\n\n    '--loki-green': 'var(--vscode-testing-iconPassed, #89d185)',\n    '--loki-green-muted': 'rgba(137, 209, 133, 0.2)',\n    '--loki-yellow': 'var(--vscode-editorWarning-foreground, #cca700)',\n    '--loki-yellow-muted': 'rgba(204, 167, 0, 0.2)',\n    '--loki-red': 'var(--vscode-errorForeground, #f48771)',\n    '--loki-red-muted': 'rgba(244, 135, 113, 0.2)',\n    '--loki-blue': 'var(--vscode-editorInfo-foreground, #75beff)',\n    '--loki-blue-muted': 'rgba(117, 190, 255, 0.2)',\n    '--loki-purple': '#c084fc',\n    '--loki-purple-muted': 'rgba(192, 132, 252, 0.2)',\n\n    '--loki-opus': '#f59e0b',\n    '--loki-sonnet': '#818cf8',\n    '--loki-haiku': '#34d399',\n\n    '--loki-shadow-sm': '0 1px 2px rgba(0, 0, 0, 0.3)',\n    '--loki-shadow-md': '0 2px 4px rgba(0, 0, 0, 0.4)',\n    '--loki-shadow-lg': '0 4px 8px rgba(0, 0, 0, 0.5)',\n    '--loki-shadow-focus': '0 0 0 2px var(--vscode-focusBorder, #007fd4)',\n  },\n};\n\n// =============================================================================\n// DESIGN TOKENS\n// =============================================================================\n\n/**\n * Consistent spacing scale (in pixels)\n */\nexport const SPACING = {\n  xs: '4px',\n  sm: '8px',\n  md: '12px',\n  lg: '16px',\n  xl: '24px',\n  '2xl': '32px',\n  '3xl': '48px',\n};\n\n/**\n * Consistent border radius scale\n */\nexport const RADIUS = {\n  none: '0',\n  sm: '4px',\n  md: '6px',\n  lg: '8px',\n  xl: '10px',\n  full: '9999px',\n};\n\n/**\n * Typography scale\n */\nexport const TYPOGRAPHY = {\n  fontFamily: {\n    sans: \"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif\",\n    mono: \"'JetBrains Mono', 'Fira Code', 'SF Mono', Menlo, monospace\",\n  },\n  fontSize: {\n    xs: '10px',\n    sm: '11px',\n    base: '12px',\n    md: '13px',\n    lg: '14px',\n    xl: '16px',\n    '2xl': '18px',\n    '3xl': '24px',\n  },\n  fontWeight: {\n    normal: '400',\n    medium: '500',\n    semibold: '600',\n    bold: '700',\n  },\n  lineHeight: {\n    tight: '1.25',\n    normal: '1.5',\n    relaxed: '1.75',\n  },\n};\n\n/**\n * Animation timings\n */\nexport const ANIMATION = {\n  duration: {\n    fast: '100ms',\n    normal: '200ms',\n    slow: '300ms',\n    slower: '500ms',\n  },\n  easing: {\n    default: 'cubic-bezier(0.4, 0, 0.2, 1)',\n    in: 'cubic-bezier(0.4, 0, 1, 1)',\n    out: 'cubic-bezier(0, 0, 0.2, 1)',\n    bounce: 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n  },\n};\n\n/**\n * Responsive breakpoints\n */\nexport const BREAKPOINTS = {\n  sm: '640px',\n  md: '768px',\n  lg: '1024px',\n  xl: '1280px',\n  '2xl': '1536px',\n};\n\n/**\n * Z-index scale\n */\nexport const Z_INDEX = {\n  base: '0',\n  dropdown: '100',\n  sticky: '200',\n  modal: '300',\n  popover: '400',\n  tooltip: '500',\n  toast: '600',\n};\n\n// =============================================================================\n// KEYBOARD SHORTCUTS\n// =============================================================================\n\n/**\n * Unified keyboard shortcuts across all contexts\n */\nexport const KEYBOARD_SHORTCUTS = {\n  // Navigation\n  'navigation.nextItem': { key: 'ArrowDown', modifiers: [] },\n  'navigation.prevItem': { key: 'ArrowUp', modifiers: [] },\n  'navigation.nextSection': { key: 'Tab', modifiers: [] },\n  'navigation.prevSection': { key: 'Tab', modifiers: ['Shift'] },\n  'navigation.confirm': { key: 'Enter', modifiers: [] },\n  'navigation.cancel': { key: 'Escape', modifiers: [] },\n\n  // Actions\n  'action.refresh': { key: 'r', modifiers: ['Meta'] },\n  'action.search': { key: 'k', modifiers: ['Meta'] },\n  'action.save': { key: 's', modifiers: ['Meta'] },\n  'action.close': { key: 'w', modifiers: ['Meta'] },\n\n  // Theme\n  'theme.toggle': { key: 'd', modifiers: ['Meta', 'Shift'] },\n\n  // Tasks\n  'task.create': { key: 'n', modifiers: ['Meta'] },\n  'task.complete': { key: 'Enter', modifiers: ['Meta'] },\n\n  // View\n  'view.toggleLogs': { key: 'l', modifiers: ['Meta', 'Shift'] },\n  'view.toggleMemory': { key: 'm', modifiers: ['Meta', 'Shift'] },\n};\n\n// =============================================================================\n// ARIA PATTERNS\n// =============================================================================\n\n/**\n * Common ARIA patterns for accessibility\n */\nexport const ARIA_PATTERNS = {\n  // Button patterns\n  button: {\n    role: 'button',\n    tabIndex: 0,\n  },\n\n  // Tab patterns\n  tablist: {\n    role: 'tablist',\n  },\n  tab: {\n    role: 'tab',\n    ariaSelected: false,\n    tabIndex: -1,\n  },\n  tabpanel: {\n    role: 'tabpanel',\n    tabIndex: 0,\n  },\n\n  // List patterns\n  list: {\n    role: 'list',\n  },\n  listitem: {\n    role: 'listitem',\n  },\n\n  // Live regions\n  livePolite: {\n    ariaLive: 'polite',\n    ariaAtomic: true,\n  },\n  liveAssertive: {\n    ariaLive: 'assertive',\n    ariaAtomic: true,\n  },\n\n  // Dialog patterns\n  dialog: {\n    role: 'dialog',\n    ariaModal: true,\n  },\n  alertdialog: {\n    role: 'alertdialog',\n    ariaModal: true,\n  },\n\n  // Status patterns\n  status: {\n    role: 'status',\n    ariaLive: 'polite',\n  },\n  alert: {\n    role: 'alert',\n    ariaLive: 'assertive',\n  },\n\n  // Log pattern\n  log: {\n    role: 'log',\n    ariaLive: 'polite',\n    ariaRelevant: 'additions',\n  },\n};\n\n// =============================================================================\n// CSS GENERATION\n// =============================================================================\n\n/**\n * Generate CSS custom properties from a theme\n * @param {string} themeName - Theme name\n * @returns {string} CSS string\n */\nexport function generateThemeCSS(themeName) {\n  const theme = THEMES[themeName];\n  if (!theme) return '';\n\n  return Object.entries(theme)\n    .map(([key, value]) => `${key}: ${value};`)\n    .join('\\n    ');\n}\n\n/**\n * Generate complete CSS variables string including design tokens\n */\nexport function generateTokensCSS() {\n  return `\n    /* Spacing */\n    --loki-space-xs: ${SPACING.xs};\n    --loki-space-sm: ${SPACING.sm};\n    --loki-space-md: ${SPACING.md};\n    --loki-space-lg: ${SPACING.lg};\n    --loki-space-xl: ${SPACING.xl};\n    --loki-space-2xl: ${SPACING['2xl']};\n    --loki-space-3xl: ${SPACING['3xl']};\n\n    /* Border Radius */\n    --loki-radius-none: ${RADIUS.none};\n    --loki-radius-sm: ${RADIUS.sm};\n    --loki-radius-md: ${RADIUS.md};\n    --loki-radius-lg: ${RADIUS.lg};\n    --loki-radius-xl: ${RADIUS.xl};\n    --loki-radius-full: ${RADIUS.full};\n\n    /* Typography */\n    --loki-font-sans: ${TYPOGRAPHY.fontFamily.sans};\n    --loki-font-mono: ${TYPOGRAPHY.fontFamily.mono};\n    --loki-text-xs: ${TYPOGRAPHY.fontSize.xs};\n    --loki-text-sm: ${TYPOGRAPHY.fontSize.sm};\n    --loki-text-base: ${TYPOGRAPHY.fontSize.base};\n    --loki-text-md: ${TYPOGRAPHY.fontSize.md};\n    --loki-text-lg: ${TYPOGRAPHY.fontSize.lg};\n    --loki-text-xl: ${TYPOGRAPHY.fontSize.xl};\n    --loki-text-2xl: ${TYPOGRAPHY.fontSize['2xl']};\n    --loki-text-3xl: ${TYPOGRAPHY.fontSize['3xl']};\n\n    /* Animation */\n    --loki-duration-fast: ${ANIMATION.duration.fast};\n    --loki-duration-normal: ${ANIMATION.duration.normal};\n    --loki-duration-slow: ${ANIMATION.duration.slow};\n    --loki-easing-default: ${ANIMATION.easing.default};\n    --loki-transition: ${ANIMATION.duration.normal} ${ANIMATION.easing.default};\n\n    /* Z-Index */\n    --loki-z-dropdown: ${Z_INDEX.dropdown};\n    --loki-z-sticky: ${Z_INDEX.sticky};\n    --loki-z-modal: ${Z_INDEX.modal};\n    --loki-z-popover: ${Z_INDEX.popover};\n    --loki-z-tooltip: ${Z_INDEX.tooltip};\n    --loki-z-toast: ${Z_INDEX.toast};\n  `;\n}\n\n/**\n * Generate base styles shared across all components\n */\nexport const BASE_STYLES = `\n  /* Reset and base */\n  :host {\n    font-family: var(--loki-font-sans);\n    line-height: 1.5;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    box-sizing: border-box;\n    color: var(--loki-text-primary);\n  }\n\n  :host *, :host *::before, :host *::after {\n    box-sizing: border-box;\n  }\n\n  /* Monospace utility */\n  .mono {\n    font-family: var(--loki-font-mono);\n  }\n\n  /* Focus visible outline */\n  :focus-visible {\n    outline: 2px solid var(--loki-border-focus);\n    outline-offset: 2px;\n  }\n\n  :focus:not(:focus-visible) {\n    outline: none;\n  }\n\n  /* Button base */\n  .btn {\n    padding: var(--loki-space-sm) var(--loki-space-md);\n    border-radius: var(--loki-radius-md);\n    font-size: var(--loki-text-md);\n    font-weight: 500;\n    cursor: pointer;\n    transition: all var(--loki-transition);\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: var(--loki-space-xs);\n    border: 1px solid transparent;\n    text-decoration: none;\n  }\n\n  .btn:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    pointer-events: none;\n  }\n\n  .btn-primary {\n    background: var(--loki-accent);\n    color: var(--loki-text-inverse);\n  }\n\n  .btn-primary:hover:not(:disabled) {\n    background: var(--loki-accent-hover);\n  }\n\n  .btn-primary:active:not(:disabled) {\n    background: var(--loki-accent-active);\n  }\n\n  .btn-secondary {\n    background: var(--loki-bg-tertiary);\n    color: var(--loki-text-primary);\n    border-color: var(--loki-border);\n  }\n\n  .btn-secondary:hover:not(:disabled) {\n    background: var(--loki-bg-hover);\n    border-color: var(--loki-border-light);\n  }\n\n  .btn-ghost {\n    background: transparent;\n    color: var(--loki-text-secondary);\n  }\n\n  .btn-ghost:hover:not(:disabled) {\n    background: var(--loki-bg-hover);\n    color: var(--loki-text-primary);\n  }\n\n  .btn-danger {\n    background: var(--loki-error);\n    color: var(--loki-text-inverse);\n  }\n\n  .btn-danger:hover:not(:disabled) {\n    background: var(--loki-red);\n    filter: brightness(1.1);\n  }\n\n  /* Button sizes */\n  .btn-sm {\n    padding: var(--loki-space-xs) var(--loki-space-sm);\n    font-size: var(--loki-text-sm);\n  }\n\n  .btn-lg {\n    padding: var(--loki-space-md) var(--loki-space-lg);\n    font-size: var(--loki-text-lg);\n  }\n\n  /* Status indicators */\n  .status-dot {\n    width: 8px;\n    height: 8px;\n    border-radius: var(--loki-radius-full);\n    flex-shrink: 0;\n  }\n\n  .status-dot.active {\n    background: var(--loki-success);\n    animation: pulse 2s infinite;\n  }\n  .status-dot.idle { background: var(--loki-text-muted); }\n  .status-dot.paused { background: var(--loki-warning); }\n  .status-dot.stopped { background: var(--loki-error); }\n  .status-dot.error { background: var(--loki-error); }\n  .status-dot.offline { background: var(--loki-text-muted); }\n\n  @keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n  }\n\n  /* Card base */\n  .card {\n    background: var(--loki-bg-card);\n    border: 1px solid var(--loki-border);\n    border-radius: var(--loki-radius-xl);\n    padding: var(--loki-space-lg);\n    transition: all var(--loki-transition);\n  }\n\n  .card:hover {\n    border-color: var(--loki-border-light);\n  }\n\n  .card-interactive {\n    cursor: pointer;\n  }\n\n  .card-interactive:hover {\n    transform: translateY(-1px);\n    box-shadow: var(--loki-shadow-md);\n  }\n\n  /* Input base */\n  .input {\n    width: 100%;\n    padding: var(--loki-space-sm) var(--loki-space-md);\n    background: var(--loki-bg-tertiary);\n    border: 1px solid var(--loki-border);\n    border-radius: var(--loki-radius-md);\n    font-size: var(--loki-text-base);\n    color: var(--loki-text-primary);\n    transition: all var(--loki-transition);\n  }\n\n  .input::placeholder {\n    color: var(--loki-text-muted);\n  }\n\n  .input:hover:not(:disabled) {\n    border-color: var(--loki-border-light);\n  }\n\n  .input:focus {\n    outline: none;\n    border-color: var(--loki-border-focus);\n    box-shadow: var(--loki-shadow-focus);\n  }\n\n  .input:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  /* Badge */\n  .badge {\n    display: inline-flex;\n    align-items: center;\n    padding: 2px var(--loki-space-sm);\n    border-radius: var(--loki-radius-sm);\n    font-size: var(--loki-text-xs);\n    font-weight: 500;\n    text-transform: uppercase;\n    letter-spacing: 0.025em;\n  }\n\n  .badge-success {\n    background: var(--loki-success-muted);\n    color: var(--loki-success);\n  }\n\n  .badge-warning {\n    background: var(--loki-warning-muted);\n    color: var(--loki-warning);\n  }\n\n  .badge-error {\n    background: var(--loki-error-muted);\n    color: var(--loki-error);\n  }\n\n  .badge-info {\n    background: var(--loki-info-muted);\n    color: var(--loki-info);\n  }\n\n  .badge-neutral {\n    background: var(--loki-bg-tertiary);\n    color: var(--loki-text-secondary);\n  }\n\n  /* Empty state */\n  .empty-state {\n    text-align: center;\n    padding: var(--loki-space-xl);\n    color: var(--loki-text-muted);\n    font-size: var(--loki-text-base);\n  }\n\n  /* Loading spinner */\n  .spinner {\n    width: 16px;\n    height: 16px;\n    border: 2px solid var(--loki-border);\n    border-top-color: var(--loki-accent);\n    border-radius: var(--loki-radius-full);\n    animation: spin 0.8s linear infinite;\n  }\n\n  @keyframes spin {\n    to { transform: rotate(360deg); }\n  }\n\n  /* Scrollbar */\n  ::-webkit-scrollbar {\n    width: 6px;\n    height: 6px;\n  }\n\n  ::-webkit-scrollbar-track {\n    background: var(--loki-bg-primary);\n    border-radius: var(--loki-radius-sm);\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background: var(--loki-border);\n    border-radius: var(--loki-radius-sm);\n  }\n\n  ::-webkit-scrollbar-thumb:hover {\n    background: var(--loki-border-light);\n  }\n\n  /* Screen reader only */\n  .sr-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n  }\n\n  /* Responsive utilities */\n  @media (max-width: ${BREAKPOINTS.md}) {\n    .hide-mobile { display: none !important; }\n  }\n\n  @media (min-width: ${BREAKPOINTS.md}) {\n    .hide-desktop { display: none !important; }\n  }\n`;\n\n// =============================================================================\n// THEME MANAGER\n// =============================================================================\n\n/**\n * Unified Theme Manager for all contexts\n */\nexport class UnifiedThemeManager {\n  static STORAGE_KEY = 'loki-theme';\n  static CONTEXT_KEY = 'loki-context';\n\n  /**\n   * Detect current context\n   * @returns {'browser'|'vscode'|'cli'} Current context\n   */\n  static detectContext() {\n    // Check for VS Code webview\n    if (typeof acquireVsCodeApi !== 'undefined' ||\n        document.body.classList.contains('vscode-body') ||\n        getComputedStyle(document.documentElement).getPropertyValue('--vscode-editor-background')) {\n      return 'vscode';\n    }\n\n    // Check for CLI context (could be via env var or data attribute)\n    if (document.documentElement.dataset.lokiContext === 'cli') {\n      return 'cli';\n    }\n\n    return 'browser';\n  }\n\n  /**\n   * Detect VS Code theme type\n   * @returns {'light'|'dark'|'high-contrast'|null}\n   */\n  static detectVSCodeTheme() {\n    const body = document.body;\n\n    if (body.classList.contains('vscode-high-contrast')) {\n      return 'high-contrast';\n    }\n    if (body.classList.contains('vscode-dark')) {\n      return 'dark';\n    }\n    if (body.classList.contains('vscode-light')) {\n      return 'light';\n    }\n\n    // Fallback: check background color\n    const bgColor = getComputedStyle(document.documentElement)\n      .getPropertyValue('--vscode-editor-background');\n    if (bgColor) {\n      const rgb = bgColor.match(/\\d+/g);\n      if (rgb) {\n        const brightness = (parseInt(rgb[0]) * 299 + parseInt(rgb[1]) * 587 + parseInt(rgb[2]) * 114) / 1000;\n        return brightness > 128 ? 'light' : 'dark';\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Get the appropriate theme based on context\n   * @returns {string} Theme name\n   */\n  static getTheme() {\n    const context = UnifiedThemeManager.detectContext();\n\n    if (context === 'vscode') {\n      const vsTheme = UnifiedThemeManager.detectVSCodeTheme();\n      if (vsTheme === 'high-contrast') return 'high-contrast';\n      return vsTheme === 'dark' ? 'vscode-dark' : 'vscode-light';\n    }\n\n    // Browser/CLI: check localStorage, then system preference\n    const saved = localStorage.getItem(UnifiedThemeManager.STORAGE_KEY);\n    if (saved && THEMES[saved]) return saved;\n\n    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n  }\n\n  /**\n   * Set theme\n   * @param {string} theme - Theme name\n   */\n  static setTheme(theme) {\n    if (!THEMES[theme]) {\n      console.warn(`Unknown theme: ${theme}`);\n      return;\n    }\n\n    localStorage.setItem(UnifiedThemeManager.STORAGE_KEY, theme);\n    document.documentElement.setAttribute('data-loki-theme', theme);\n\n    // Dispatch event for components\n    window.dispatchEvent(new CustomEvent('loki-theme-change', {\n      detail: { theme, context: UnifiedThemeManager.detectContext() }\n    }));\n  }\n\n  /**\n   * Toggle between light and dark theme\n   * @returns {string} New theme\n   */\n  static toggle() {\n    const current = UnifiedThemeManager.getTheme();\n    let next;\n\n    if (current.includes('dark') || current === 'high-contrast') {\n      next = current.startsWith('vscode') ? 'vscode-light' : 'light';\n    } else {\n      next = current.startsWith('vscode') ? 'vscode-dark' : 'dark';\n    }\n\n    UnifiedThemeManager.setTheme(next);\n    return next;\n  }\n\n  /**\n   * Get CSS variables for current theme\n   * @param {string} theme - Optional theme override\n   * @returns {object} CSS variables\n   */\n  static getVariables(theme = null) {\n    const t = theme || UnifiedThemeManager.getTheme();\n    return THEMES[t] || THEMES.light;\n  }\n\n  /**\n   * Generate complete CSS for a theme\n   * @param {string} theme - Theme name\n   * @returns {string} CSS string\n   */\n  static generateCSS(theme = null) {\n    const t = theme || UnifiedThemeManager.getTheme();\n    return `\n      :host {\n        ${generateThemeCSS(t)}\n        ${generateTokensCSS()}\n      }\n      ${BASE_STYLES}\n    `;\n  }\n\n  /**\n   * Initialize theme system\n   */\n  static init() {\n    const theme = UnifiedThemeManager.getTheme();\n    document.documentElement.setAttribute('data-loki-theme', theme);\n\n    // Listen for system preference changes\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {\n      if (!localStorage.getItem(UnifiedThemeManager.STORAGE_KEY)) {\n        UnifiedThemeManager.setTheme(UnifiedThemeManager.getTheme());\n      }\n    });\n\n    // VS Code theme change observer\n    if (UnifiedThemeManager.detectContext() === 'vscode') {\n      const observer = new MutationObserver(() => {\n        const newTheme = UnifiedThemeManager.getTheme();\n        document.documentElement.setAttribute('data-loki-theme', newTheme);\n        window.dispatchEvent(new CustomEvent('loki-theme-change', {\n          detail: { theme: newTheme, context: 'vscode' }\n        }));\n      });\n\n      observer.observe(document.body, {\n        attributes: true,\n        attributeFilter: ['class']\n      });\n    }\n  }\n}\n\n// =============================================================================\n// KEYBOARD HANDLER\n// =============================================================================\n\n/**\n * Unified keyboard shortcut handler\n */\nexport class KeyboardHandler {\n  constructor() {\n    this._handlers = new Map();\n    this._enabled = true;\n  }\n\n  /**\n   * Register a keyboard shortcut handler\n   * @param {string} action - Action name from KEYBOARD_SHORTCUTS\n   * @param {Function} handler - Handler function\n   */\n  register(action, handler) {\n    const shortcut = KEYBOARD_SHORTCUTS[action];\n    if (!shortcut) {\n      console.warn(`Unknown keyboard action: ${action}`);\n      return;\n    }\n\n    this._handlers.set(action, { shortcut, handler });\n  }\n\n  /**\n   * Unregister a handler\n   * @param {string} action - Action name\n   */\n  unregister(action) {\n    this._handlers.delete(action);\n  }\n\n  /**\n   * Enable/disable keyboard handling\n   * @param {boolean} enabled\n   */\n  setEnabled(enabled) {\n    this._enabled = enabled;\n  }\n\n  /**\n   * Handle a keyboard event\n   * @param {KeyboardEvent} event\n   * @returns {boolean} Whether the event was handled\n   */\n  handleEvent(event) {\n    if (!this._enabled) return false;\n\n    for (const [action, { shortcut, handler }] of this._handlers) {\n      if (this._matchesShortcut(event, shortcut)) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler(event);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Check if event matches shortcut\n   * @param {KeyboardEvent} event\n   * @param {object} shortcut\n   * @returns {boolean}\n   */\n  _matchesShortcut(event, shortcut) {\n    const key = event.key.toLowerCase();\n    const modifiers = shortcut.modifiers || [];\n\n    if (key !== shortcut.key.toLowerCase()) return false;\n\n    const hasCtrl = modifiers.includes('Ctrl') || modifiers.includes('Meta');\n    const hasShift = modifiers.includes('Shift');\n    const hasAlt = modifiers.includes('Alt');\n\n    const ctrlMatch = (event.ctrlKey || event.metaKey) === hasCtrl;\n    const shiftMatch = event.shiftKey === hasShift;\n    const altMatch = event.altKey === hasAlt;\n\n    return ctrlMatch && shiftMatch && altMatch;\n  }\n\n  /**\n   * Attach to an element\n   * @param {HTMLElement} element\n   */\n  attach(element) {\n    element.addEventListener('keydown', (e) => this.handleEvent(e));\n  }\n\n  /**\n   * Detach from an element\n   * @param {HTMLElement} element\n   */\n  detach(element) {\n    element.removeEventListener('keydown', (e) => this.handleEvent(e));\n  }\n}\n\n// =============================================================================\n// EXPORTS\n// =============================================================================\n\nexport default {\n  THEMES,\n  SPACING,\n  RADIUS,\n  TYPOGRAPHY,\n  ANIMATION,\n  BREAKPOINTS,\n  Z_INDEX,\n  KEYBOARD_SHORTCUTS,\n  ARIA_PATTERNS,\n  BASE_STYLES,\n  generateThemeCSS,\n  generateTokensCSS,\n  UnifiedThemeManager,\n  KeyboardHandler,\n};\n", "/**\n * Loki Mode Theme Management\n *\n * Provides theme utilities for Loki Mode web components.\n * Supports light/dark mode with Anthropic design language.\n *\n * NOTE: For new features, prefer importing from loki-unified-styles.js\n * which provides additional themes (high-contrast, vscode-*) and\n * enhanced functionality. This file is maintained for backwards compatibility.\n *\n * @see ./loki-unified-styles.js for the unified theme system\n */\n\n// Import unified styles for enhanced functionality\nimport {\n  THEMES as UNIFIED_THEMES,\n  UnifiedThemeManager,\n  BASE_STYLES,\n  generateThemeCSS,\n  generateTokensCSS,\n  KeyboardHandler,\n  KEYBOARD_SHORTCUTS,\n  ARIA_PATTERNS,\n} from './loki-unified-styles.js';\n\n// Re-export unified styles for convenience\nexport {\n  UnifiedThemeManager,\n  BASE_STYLES,\n  KeyboardHandler,\n  KEYBOARD_SHORTCUTS,\n  ARIA_PATTERNS,\n};\n\n/**\n * Anthropic Design Language CSS Variables\n * Based on anthropic.com color system\n *\n * @deprecated Use THEMES from loki-unified-styles.js instead\n */\nexport const THEME_VARIABLES = {\n  light: {\n    // Background colors\n    '--loki-bg-primary': '#faf9f0',\n    '--loki-bg-secondary': '#f5f4eb',\n    '--loki-bg-tertiary': '#eeeddf',\n    '--loki-bg-card': '#ffffff',\n    '--loki-bg-hover': '#f0efe6',\n\n    // Accent colors\n    '--loki-accent': '#d97757',\n    '--loki-accent-light': '#e8956f',\n    '--loki-accent-muted': 'rgba(217, 119, 87, 0.12)',\n\n    // Text colors\n    '--loki-text-primary': '#1a1a1a',\n    '--loki-text-secondary': '#5c5c5c',\n    '--loki-text-muted': '#8a8a8a',\n\n    // Border colors\n    '--loki-border': '#e5e3de',\n    '--loki-border-light': '#d4d2cb',\n\n    // Status colors\n    '--loki-green': '#16a34a',\n    '--loki-green-muted': 'rgba(22, 163, 74, 0.12)',\n    '--loki-yellow': '#ca8a04',\n    '--loki-yellow-muted': 'rgba(202, 138, 4, 0.12)',\n    '--loki-red': '#dc2626',\n    '--loki-red-muted': 'rgba(220, 38, 38, 0.12)',\n    '--loki-blue': '#2563eb',\n    '--loki-blue-muted': 'rgba(37, 99, 235, 0.12)',\n    '--loki-purple': '#9333ea',\n    '--loki-purple-muted': 'rgba(147, 51, 234, 0.12)',\n\n    // Model colors\n    '--loki-opus': '#d97706',\n    '--loki-sonnet': '#4f46e5',\n    '--loki-haiku': '#059669',\n\n    // Transition\n    '--loki-transition': '0.2s cubic-bezier(0.4, 0, 0.2, 1)',\n  },\n  dark: {\n    // Background colors\n    '--loki-bg-primary': '#131314',\n    '--loki-bg-secondary': '#1a1a1b',\n    '--loki-bg-tertiary': '#232325',\n    '--loki-bg-card': '#1e1e20',\n    '--loki-bg-hover': '#2a2a2d',\n\n    // Accent colors\n    '--loki-accent': '#d97757',\n    '--loki-accent-light': '#e8956f',\n    '--loki-accent-muted': 'rgba(217, 119, 87, 0.15)',\n\n    // Text colors\n    '--loki-text-primary': '#f5f5f5',\n    '--loki-text-secondary': '#a1a1a6',\n    '--loki-text-muted': '#6b6b70',\n\n    // Border colors\n    '--loki-border': '#2d2d30',\n    '--loki-border-light': '#3d3d42',\n\n    // Status colors\n    '--loki-green': '#22c55e',\n    '--loki-green-muted': 'rgba(34, 197, 94, 0.15)',\n    '--loki-yellow': '#eab308',\n    '--loki-yellow-muted': 'rgba(234, 179, 8, 0.15)',\n    '--loki-red': '#ef4444',\n    '--loki-red-muted': 'rgba(239, 68, 68, 0.15)',\n    '--loki-blue': '#3b82f6',\n    '--loki-blue-muted': 'rgba(59, 130, 246, 0.15)',\n    '--loki-purple': '#a855f7',\n    '--loki-purple-muted': 'rgba(168, 85, 247, 0.15)',\n\n    // Model colors\n    '--loki-opus': '#f59e0b',\n    '--loki-sonnet': '#6366f1',\n    '--loki-haiku': '#10b981',\n\n    // Transition\n    '--loki-transition': '0.2s cubic-bezier(0.4, 0, 0.2, 1)',\n  }\n};\n\n/**\n * Common styles shared across all components\n *\n * @deprecated Use BASE_STYLES from loki-unified-styles.js instead\n */\nexport const COMMON_STYLES = `\n  :host {\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n    line-height: 1.5;\n    -webkit-font-smoothing: antialiased;\n    box-sizing: border-box;\n  }\n\n  :host *, :host *::before, :host *::after {\n    box-sizing: border-box;\n  }\n\n  .mono {\n    font-family: 'JetBrains Mono', monospace;\n  }\n\n  /* Button base styles */\n  .btn {\n    padding: 8px 14px;\n    border-radius: 6px;\n    font-size: 13px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all var(--loki-transition);\n    display: inline-flex;\n    align-items: center;\n    gap: 6px;\n    border: none;\n  }\n\n  .btn-primary {\n    background: var(--loki-accent);\n    color: white;\n  }\n\n  .btn-primary:hover {\n    background: var(--loki-accent-light);\n  }\n\n  .btn-secondary {\n    background: var(--loki-bg-tertiary);\n    color: var(--loki-text-primary);\n    border: 1px solid var(--loki-border);\n  }\n\n  .btn-secondary:hover {\n    background: var(--loki-bg-hover);\n  }\n\n  /* Status dot */\n  .status-dot {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n  }\n\n  .status-dot.active {\n    background: var(--loki-green);\n    animation: pulse 2s infinite;\n  }\n  .status-dot.idle { background: var(--loki-text-muted); }\n  .status-dot.paused { background: var(--loki-yellow); }\n  .status-dot.stopped { background: var(--loki-red); }\n  .status-dot.error { background: var(--loki-red); }\n\n  @keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n  }\n\n  /* Card base */\n  .card {\n    background: var(--loki-bg-card);\n    border: 1px solid var(--loki-border);\n    border-radius: 10px;\n    padding: 16px;\n    transition: all var(--loki-transition);\n  }\n\n  .card:hover {\n    border-color: var(--loki-border-light);\n  }\n\n  /* Empty state */\n  .empty-state {\n    text-align: center;\n    padding: 24px;\n    color: var(--loki-text-muted);\n    font-size: 12px;\n  }\n\n  /* Scrollbar */\n  ::-webkit-scrollbar { width: 6px; }\n  ::-webkit-scrollbar-track { background: var(--loki-bg-primary); }\n  ::-webkit-scrollbar-thumb { background: var(--loki-border); border-radius: 3px; }\n  ::-webkit-scrollbar-thumb:hover { background: var(--loki-border-light); }\n`;\n\n/**\n * LokiTheme class for managing theme state\n *\n * NOTE: For new projects, prefer using UnifiedThemeManager from\n * loki-unified-styles.js which supports additional themes and contexts.\n * This class is maintained for backwards compatibility.\n */\nexport class LokiTheme {\n  static STORAGE_KEY = 'loki-theme';\n\n  /**\n   * Get the current theme\n   * @returns {string} Theme name (now supports all unified themes)\n   */\n  static getTheme() {\n    // Delegate to UnifiedThemeManager for enhanced context detection\n    return UnifiedThemeManager.getTheme();\n  }\n\n  /**\n   * Set the theme\n   * @param {string} theme - Theme name (light, dark, high-contrast, vscode-light, vscode-dark)\n   */\n  static setTheme(theme) {\n    // Delegate to UnifiedThemeManager\n    UnifiedThemeManager.setTheme(theme);\n  }\n\n  /**\n   * Toggle between light and dark theme\n   * @returns {string} The new theme\n   */\n  static toggle() {\n    return UnifiedThemeManager.toggle();\n  }\n\n  /**\n   * Get CSS variables for a theme\n   * @param {string} theme - Theme name\n   * @returns {object} CSS variables object\n   */\n  static getVariables(theme = null) {\n    const t = theme || LokiTheme.getTheme();\n    // Support both legacy THEME_VARIABLES and unified THEMES\n    return UNIFIED_THEMES[t] || THEME_VARIABLES[t] || THEME_VARIABLES.light;\n  }\n\n  /**\n   * Generate CSS string from theme variables\n   * @param {string} theme - Theme name\n   * @returns {string} CSS string\n   */\n  static toCSSString(theme = null) {\n    const t = theme || LokiTheme.getTheme();\n    // Use unified CSS generation for better output\n    if (UNIFIED_THEMES[t]) {\n      return generateThemeCSS(t);\n    }\n    // Fallback to legacy format\n    const vars = LokiTheme.getVariables(t);\n    return Object.entries(vars)\n      .map(([key, value]) => `${key}: ${value};`)\n      .join('\\n');\n  }\n\n  /**\n   * Apply theme variables to an element\n   * @param {HTMLElement} element - Element to apply styles to\n   * @param {string} theme - Optional theme override\n   */\n  static applyToElement(element, theme = null) {\n    const vars = LokiTheme.getVariables(theme);\n    for (const [key, value] of Object.entries(vars)) {\n      element.style.setProperty(key, value);\n    }\n  }\n\n  /**\n   * Initialize theme system\n   * Sets up system preference listener and applies initial theme\n   */\n  static init() {\n    // Delegate to UnifiedThemeManager for enhanced initialization\n    UnifiedThemeManager.init();\n  }\n\n  /**\n   * Detect current context\n   * @returns {'browser'|'vscode'|'cli'} Current context\n   */\n  static detectContext() {\n    return UnifiedThemeManager.detectContext();\n  }\n\n  /**\n   * Get all available themes\n   * @returns {string[]} Array of theme names\n   */\n  static getAvailableThemes() {\n    return Object.keys(UNIFIED_THEMES);\n  }\n}\n\n/**\n * Base class for Loki web components with theme support\n *\n * Enhanced with unified styles support including:\n * - All theme variants (light, dark, high-contrast, vscode-*)\n * - Keyboard shortcut handling\n * - ARIA pattern helpers\n */\nexport class LokiElement extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this._theme = LokiTheme.getTheme();\n    this._themeChangeHandler = this._onThemeChange.bind(this);\n    this._keyboardHandler = new KeyboardHandler();\n  }\n\n  connectedCallback() {\n    window.addEventListener('loki-theme-change', this._themeChangeHandler);\n    this._applyTheme();\n    this._setupKeyboardHandling();\n    this.render();\n  }\n\n  disconnectedCallback() {\n    window.removeEventListener('loki-theme-change', this._themeChangeHandler);\n    this._keyboardHandler.detach(this);\n  }\n\n  _onThemeChange(e) {\n    this._theme = e.detail.theme;\n    this._applyTheme();\n    if (this.onThemeChange) {\n      this.onThemeChange(this._theme);\n    }\n  }\n\n  _applyTheme() {\n    LokiTheme.applyToElement(this.shadowRoot.host, this._theme);\n    // Also set data attribute for CSS-based theming\n    this.setAttribute('data-loki-theme', this._theme);\n  }\n\n  /**\n   * Setup keyboard shortcut handling\n   * Override in subclass to register component-specific shortcuts\n   */\n  _setupKeyboardHandling() {\n    this._keyboardHandler.attach(this);\n    // Subclasses can register shortcuts via:\n    // this._keyboardHandler.register('action.name', handler);\n  }\n\n  /**\n   * Register a keyboard shortcut\n   * @param {string} action - Action name from KEYBOARD_SHORTCUTS\n   * @param {Function} handler - Handler function\n   */\n  registerShortcut(action, handler) {\n    this._keyboardHandler.register(action, handler);\n  }\n\n  /**\n   * Get the base styles for the component (enhanced with all themes)\n   * @returns {string} CSS string with all theme variants\n   */\n  getBaseStyles() {\n    const tokens = generateTokensCSS();\n\n    return `\n      /* Design tokens */\n      :host {\n        ${tokens}\n      }\n\n      /* Light theme (default) */\n      :host {\n        ${generateThemeCSS('light')}\n      }\n\n      /* Dark theme via system preference */\n      @media (prefers-color-scheme: dark) {\n        :host {\n          ${generateThemeCSS('dark')}\n        }\n      }\n\n      /* Explicit theme attributes */\n      :host([theme=\"dark\"]),\n      :host([data-loki-theme=\"dark\"]) {\n        ${generateThemeCSS('dark')}\n      }\n\n      :host([theme=\"light\"]),\n      :host([data-loki-theme=\"light\"]) {\n        ${generateThemeCSS('light')}\n      }\n\n      :host([theme=\"high-contrast\"]),\n      :host([data-loki-theme=\"high-contrast\"]) {\n        ${generateThemeCSS('high-contrast')}\n      }\n\n      :host([theme=\"vscode-light\"]),\n      :host([data-loki-theme=\"vscode-light\"]) {\n        ${generateThemeCSS('vscode-light')}\n      }\n\n      :host([theme=\"vscode-dark\"]),\n      :host([data-loki-theme=\"vscode-dark\"]) {\n        ${generateThemeCSS('vscode-dark')}\n      }\n\n      /* Reduced motion preference */\n      @media (prefers-reduced-motion: reduce) {\n        :host *,\n        :host *::before,\n        :host *::after {\n          animation-duration: 0.01ms !important;\n          animation-iteration-count: 1 !important;\n          transition-duration: 0.01ms !important;\n        }\n      }\n\n      ${BASE_STYLES}\n    `;\n  }\n\n  /**\n   * Get ARIA attributes for a pattern\n   * @param {string} patternName - Pattern name from ARIA_PATTERNS\n   * @returns {object} ARIA attributes object\n   */\n  getAriaPattern(patternName) {\n    return ARIA_PATTERNS[patternName] || {};\n  }\n\n  /**\n   * Apply ARIA attributes to an element\n   * @param {HTMLElement} element - Target element\n   * @param {string} patternName - Pattern name\n   */\n  applyAriaPattern(element, patternName) {\n    const pattern = this.getAriaPattern(patternName);\n    for (const [key, value] of Object.entries(pattern)) {\n      if (key === 'role') {\n        element.setAttribute('role', value);\n      } else {\n        // Convert camelCase to kebab-case for aria attributes\n        const attrName = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n        element.setAttribute(attrName, value);\n      }\n    }\n  }\n\n  /**\n   * Override in subclass to render component\n   */\n  render() {\n    // Override in subclass\n  }\n}\n\nexport default LokiTheme;\n", "/**\n * Loki Mode API Client\n *\n * Unified API client for Loki Mode web components.\n * Supports both REST API and WebSocket connections.\n * Features adaptive polling and VS Code webview integration.\n */\n\n/**\n * Polling interval presets for different contexts\n */\nconst POLL_INTERVALS = {\n  realtime: 1000,      // Active session monitoring\n  normal: 2000,        // Default\n  background: 5000,    // VS Code sidebar (not visible)\n  offline: 10000,      // Connectivity check only\n};\n\n/**\n * Default polling intervals by context\n */\nconst CONTEXT_DEFAULTS = {\n  vscode: POLL_INTERVALS.normal,\n  browser: POLL_INTERVALS.realtime,\n  cli: POLL_INTERVALS.background,\n};\n\n/**\n * Default API configuration\n */\nconst DEFAULT_CONFIG = {\n  baseUrl: 'http://localhost:8420',\n  wsUrl: 'ws://localhost:8420/ws',\n  pollInterval: 2000,\n  timeout: 10000,\n  retryAttempts: 3,\n  retryDelay: 1000,\n};\n\n/**\n * API Event types\n */\nexport const ApiEvents = {\n  CONNECTED: 'api:connected',\n  DISCONNECTED: 'api:disconnected',\n  ERROR: 'api:error',\n  STATUS_UPDATE: 'api:status-update',\n  TASK_CREATED: 'api:task-created',\n  TASK_UPDATED: 'api:task-updated',\n  TASK_DELETED: 'api:task-deleted',\n  PROJECT_CREATED: 'api:project-created',\n  PROJECT_UPDATED: 'api:project-updated',\n  AGENT_UPDATE: 'api:agent-update',\n  LOG_MESSAGE: 'api:log-message',\n  MEMORY_UPDATE: 'api:memory-update',\n};\n\n/**\n * LokiApiClient - Per-URL API client for Loki Mode\n */\nexport class LokiApiClient extends EventTarget {\n  static _instances = new Map();\n\n  /**\n   * Get an instance for a specific URL\n   * @param {object} config - Configuration options\n   * @returns {LokiApiClient}\n   */\n  static getInstance(config = {}) {\n    const baseUrl = config.baseUrl || DEFAULT_CONFIG.baseUrl;\n    if (!LokiApiClient._instances.has(baseUrl)) {\n      LokiApiClient._instances.set(baseUrl, new LokiApiClient(config));\n    }\n    return LokiApiClient._instances.get(baseUrl);\n  }\n\n  /**\n   * Clear all cached instances (useful for testing)\n   */\n  static clearInstances() {\n    LokiApiClient._instances.forEach(instance => instance.disconnect());\n    LokiApiClient._instances.clear();\n  }\n\n  constructor(config = {}) {\n    super();\n    this.config = { ...DEFAULT_CONFIG, ...config };\n    this._ws = null;\n    this._connected = false;\n    this._pollInterval = null;\n    this._reconnectTimeout = null;\n    this._cache = new Map();\n    this._cacheTimeout = 5000; // 5 seconds cache\n    this._vscodeApi = null;\n    this._context = this._detectContext();\n    this._currentPollInterval = CONTEXT_DEFAULTS[this._context] || POLL_INTERVALS.normal;\n\n    // Setup adaptive polling and VS Code bridge\n    this._setupAdaptivePolling();\n    this._setupVSCodeBridge();\n  }\n\n  // ============================================\n  // Context Detection and Adaptive Polling\n  // ============================================\n\n  /**\n   * Detect the current execution context\n   * @returns {'vscode'|'browser'|'cli'}\n   */\n  _detectContext() {\n    // Check for VS Code webview environment\n    if (typeof acquireVsCodeApi !== 'undefined') return 'vscode';\n    // Check for browser environment\n    if (typeof window !== 'undefined' && window.location) return 'browser';\n    // Default to CLI context (Node.js or similar)\n    return 'cli';\n  }\n\n  /**\n   * Get the current execution context\n   */\n  get context() {\n    return this._context;\n  }\n\n  /**\n   * Get available polling intervals\n   */\n  static get POLL_INTERVALS() {\n    return POLL_INTERVALS;\n  }\n\n  /**\n   * Setup adaptive polling based on page visibility\n   */\n  _setupAdaptivePolling() {\n    // Only setup in browser environments with document API\n    if (typeof document === 'undefined') return;\n\n    document.addEventListener('visibilitychange', () => {\n      if (document.hidden) {\n        this._setPollInterval(POLL_INTERVALS.background);\n      } else {\n        this._setPollInterval(CONTEXT_DEFAULTS[this._context] || POLL_INTERVALS.normal);\n      }\n    });\n  }\n\n  /**\n   * Update the polling interval dynamically\n   * @param {number} interval - New polling interval in milliseconds\n   */\n  _setPollInterval(interval) {\n    this._currentPollInterval = interval;\n\n    // If actively polling, restart with new interval\n    if (this._pollInterval) {\n      this.stopPolling();\n      this.startPolling(null, interval);\n    }\n  }\n\n  /**\n   * Manually set polling mode\n   * @param {'realtime'|'normal'|'background'|'offline'} mode\n   */\n  setPollMode(mode) {\n    const interval = POLL_INTERVALS[mode];\n    if (interval) {\n      this._setPollInterval(interval);\n    }\n  }\n\n  // ============================================\n  // VS Code Message Bridge\n  // ============================================\n\n  /**\n   * Setup VS Code webview message bridge\n   */\n  _setupVSCodeBridge() {\n    // Check if running in VS Code webview\n    if (typeof acquireVsCodeApi === 'undefined') return;\n\n    try {\n      this._vscodeApi = acquireVsCodeApi();\n    } catch (e) {\n      // acquireVsCodeApi can only be called once, may already be acquired\n      console.warn('VS Code API already acquired or unavailable');\n      return;\n    }\n\n    // Listen for messages from VS Code extension\n    window.addEventListener('message', (event) => {\n      const message = event.data;\n      if (!message || !message.type) return;\n\n      switch (message.type) {\n        case 'updateStatus':\n          this._emit(ApiEvents.STATUS_UPDATE, message.data);\n          break;\n        case 'updateTasks':\n          this._emit(ApiEvents.TASK_UPDATED, message.data);\n          break;\n        case 'taskCreated':\n          this._emit(ApiEvents.TASK_CREATED, message.data);\n          break;\n        case 'taskDeleted':\n          this._emit(ApiEvents.TASK_DELETED, message.data);\n          break;\n        case 'projectCreated':\n          this._emit(ApiEvents.PROJECT_CREATED, message.data);\n          break;\n        case 'projectUpdated':\n          this._emit(ApiEvents.PROJECT_UPDATED, message.data);\n          break;\n        case 'agentUpdate':\n          this._emit(ApiEvents.AGENT_UPDATE, message.data);\n          break;\n        case 'logMessage':\n          this._emit(ApiEvents.LOG_MESSAGE, message.data);\n          break;\n        case 'memoryUpdate':\n          this._emit(ApiEvents.MEMORY_UPDATE, message.data);\n          break;\n        case 'connected':\n          this._connected = true;\n          this._emit(ApiEvents.CONNECTED, message.data);\n          break;\n        case 'disconnected':\n          this._connected = false;\n          this._emit(ApiEvents.DISCONNECTED, message.data);\n          break;\n        case 'error':\n          this._emit(ApiEvents.ERROR, message.data);\n          break;\n        case 'setPollMode':\n          this.setPollMode(message.data.mode);\n          break;\n        default:\n          // Emit unknown message types as custom events\n          this._emit(`api:${message.type}`, message.data);\n      }\n    });\n  }\n\n  /**\n   * Check if running in VS Code webview\n   */\n  get isVSCode() {\n    return this._context === 'vscode';\n  }\n\n  /**\n   * Post a message to VS Code extension host\n   * @param {string} type - Message type\n   * @param {object} data - Message data\n   */\n  postToVSCode(type, data = {}) {\n    if (this._vscodeApi) {\n      this._vscodeApi.postMessage({ type, data });\n    }\n  }\n\n  /**\n   * Request data refresh from VS Code extension\n   */\n  requestRefresh() {\n    this.postToVSCode('requestRefresh');\n  }\n\n  /**\n   * Notify VS Code of user action\n   * @param {string} action - Action name\n   * @param {object} payload - Action payload\n   */\n  notifyVSCode(action, payload = {}) {\n    this.postToVSCode('userAction', { action, ...payload });\n  }\n\n  /**\n   * Get the API base URL\n   */\n  get baseUrl() {\n    return this.config.baseUrl;\n  }\n\n  /**\n   * Set the API base URL\n   */\n  set baseUrl(url) {\n    this.config.baseUrl = url;\n    this.config.wsUrl = url.replace(/^http/, 'ws') + '/ws';\n  }\n\n  /**\n   * Check if connected\n   */\n  get isConnected() {\n    return this._connected;\n  }\n\n  // ============================================\n  // Connection Management\n  // ============================================\n\n  /**\n   * Connect to WebSocket for real-time updates\n   */\n  async connect() {\n    if (this._ws && this._ws.readyState === WebSocket.OPEN) {\n      return;\n    }\n\n    return new Promise((resolve, reject) => {\n      try {\n        this._ws = new WebSocket(this.config.wsUrl);\n\n        this._ws.onopen = () => {\n          this._connected = true;\n          this._emit(ApiEvents.CONNECTED);\n          resolve();\n        };\n\n        this._ws.onclose = () => {\n          this._connected = false;\n          this._emit(ApiEvents.DISCONNECTED);\n          this._scheduleReconnect();\n        };\n\n        this._ws.onerror = (error) => {\n          this._emit(ApiEvents.ERROR, { error });\n          reject(error);\n        };\n\n        this._ws.onmessage = (event) => {\n          try {\n            const message = JSON.parse(event.data);\n            this._handleMessage(message);\n          } catch (e) {\n            console.error('Failed to parse WebSocket message:', e);\n          }\n        };\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * Disconnect WebSocket\n   */\n  disconnect() {\n    if (this._ws) {\n      this._ws.close();\n      this._ws = null;\n    }\n    if (this._pollInterval) {\n      clearInterval(this._pollInterval);\n      this._pollInterval = null;\n    }\n    if (this._reconnectTimeout) {\n      clearTimeout(this._reconnectTimeout);\n      this._reconnectTimeout = null;\n    }\n    this._connected = false;\n  }\n\n  /**\n   * Schedule reconnect attempt\n   */\n  _scheduleReconnect() {\n    if (this._reconnectTimeout) return;\n\n    this._reconnectTimeout = setTimeout(() => {\n      this._reconnectTimeout = null;\n      this.connect().catch(() => {\n        // Will retry on next schedule\n      });\n    }, this.config.retryDelay);\n  }\n\n  /**\n   * Handle incoming WebSocket message\n   */\n  _handleMessage(message) {\n    const eventMap = {\n      'connected': ApiEvents.CONNECTED,\n      'status_update': ApiEvents.STATUS_UPDATE,\n      'task_created': ApiEvents.TASK_CREATED,\n      'task_updated': ApiEvents.TASK_UPDATED,\n      'task_deleted': ApiEvents.TASK_DELETED,\n      'task_moved': ApiEvents.TASK_UPDATED,\n      'project_created': ApiEvents.PROJECT_CREATED,\n      'project_updated': ApiEvents.PROJECT_UPDATED,\n      'agent_update': ApiEvents.AGENT_UPDATE,\n      'log': ApiEvents.LOG_MESSAGE,\n    };\n\n    const eventType = eventMap[message.type] || `api:${message.type}`;\n    this._emit(eventType, message.data);\n  }\n\n  /**\n   * Emit an event\n   */\n  _emit(type, data = {}) {\n    this.dispatchEvent(new CustomEvent(type, { detail: data }));\n  }\n\n  // ============================================\n  // HTTP Request Methods\n  // ============================================\n\n  /**\n   * Make an HTTP request\n   */\n  async _request(endpoint, options = {}) {\n    const url = `${this.config.baseUrl}${endpoint}`;\n    const controller = new AbortController();\n    const timeout = setTimeout(() => controller.abort(), this.config.timeout);\n\n    try {\n      const response = await fetch(url, {\n        ...options,\n        signal: controller.signal,\n        headers: {\n          'Content-Type': 'application/json',\n          ...options.headers,\n        },\n      });\n\n      clearTimeout(timeout);\n\n      if (!response.ok) {\n        const error = await response.json().catch(() => ({ detail: response.statusText }));\n        throw new Error(error.detail || `HTTP ${response.status}`);\n      }\n\n      if (response.status === 204) {\n        return null;\n      }\n\n      return await response.json();\n    } catch (error) {\n      clearTimeout(timeout);\n      if (error.name === 'AbortError') {\n        throw new Error('Request timeout');\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * GET request with caching\n   */\n  async _get(endpoint, useCache = false) {\n    if (useCache && this._cache.has(endpoint)) {\n      const cached = this._cache.get(endpoint);\n      if (Date.now() - cached.timestamp < this._cacheTimeout) {\n        return cached.data;\n      }\n    }\n\n    const data = await this._request(endpoint);\n\n    if (useCache) {\n      this._cache.set(endpoint, { data, timestamp: Date.now() });\n    }\n\n    return data;\n  }\n\n  /**\n   * POST request\n   */\n  async _post(endpoint, body) {\n    return this._request(endpoint, {\n      method: 'POST',\n      body: JSON.stringify(body),\n    });\n  }\n\n  /**\n   * PUT request\n   */\n  async _put(endpoint, body) {\n    return this._request(endpoint, {\n      method: 'PUT',\n      body: JSON.stringify(body),\n    });\n  }\n\n  /**\n   * DELETE request\n   */\n  async _delete(endpoint) {\n    return this._request(endpoint, { method: 'DELETE' });\n  }\n\n  // ============================================\n  // Status API\n  // ============================================\n\n  /**\n   * Get system status\n   */\n  async getStatus() {\n    return this._get('/api/status');\n  }\n\n  /**\n   * Health check\n   */\n  async healthCheck() {\n    return this._get('/health');\n  }\n\n  // ============================================\n  // Projects API\n  // ============================================\n\n  /**\n   * List all projects\n   */\n  async listProjects(status = null) {\n    const query = status ? `?status=${status}` : '';\n    return this._get(`/api/projects${query}`);\n  }\n\n  /**\n   * Get a project by ID\n   */\n  async getProject(projectId) {\n    return this._get(`/api/projects/${projectId}`);\n  }\n\n  /**\n   * Create a new project\n   */\n  async createProject(data) {\n    return this._post('/api/projects', data);\n  }\n\n  /**\n   * Update a project\n   */\n  async updateProject(projectId, data) {\n    return this._put(`/api/projects/${projectId}`, data);\n  }\n\n  /**\n   * Delete a project\n   */\n  async deleteProject(projectId) {\n    return this._delete(`/api/projects/${projectId}`);\n  }\n\n  // ============================================\n  // Tasks API\n  // ============================================\n\n  /**\n   * List tasks\n   */\n  async listTasks(filters = {}) {\n    const params = new URLSearchParams();\n    if (filters.projectId) params.append('project_id', filters.projectId);\n    if (filters.status) params.append('status', filters.status);\n    if (filters.priority) params.append('priority', filters.priority);\n\n    const query = params.toString() ? `?${params}` : '';\n    return this._get(`/api/tasks${query}`);\n  }\n\n  /**\n   * Get a task by ID\n   */\n  async getTask(taskId) {\n    return this._get(`/api/tasks/${taskId}`);\n  }\n\n  /**\n   * Create a new task\n   */\n  async createTask(data) {\n    return this._post('/api/tasks', data);\n  }\n\n  /**\n   * Update a task\n   */\n  async updateTask(taskId, data) {\n    return this._put(`/api/tasks/${taskId}`, data);\n  }\n\n  /**\n   * Move a task (Kanban drag-drop)\n   */\n  async moveTask(taskId, status, position) {\n    return this._post(`/api/tasks/${taskId}/move`, { status, position });\n  }\n\n  /**\n   * Delete a task\n   */\n  async deleteTask(taskId) {\n    return this._delete(`/api/tasks/${taskId}`);\n  }\n\n  // ============================================\n  // Memory API\n  // ============================================\n\n  /**\n   * Get memory summary\n   */\n  async getMemorySummary() {\n    return this._get('/api/memory/summary', true);\n  }\n\n  /**\n   * Get memory index (Layer 1)\n   */\n  async getMemoryIndex() {\n    return this._get('/api/memory/index', true);\n  }\n\n  /**\n   * Get memory timeline (Layer 2)\n   */\n  async getMemoryTimeline() {\n    return this._get('/api/memory/timeline');\n  }\n\n  /**\n   * List episodes\n   */\n  async listEpisodes(params = {}) {\n    const query = new URLSearchParams(params).toString();\n    return this._get(`/api/memory/episodes${query ? '?' + query : ''}`);\n  }\n\n  /**\n   * Get episode detail\n   */\n  async getEpisode(episodeId) {\n    return this._get(`/api/memory/episodes/${episodeId}`);\n  }\n\n  /**\n   * List patterns\n   */\n  async listPatterns(params = {}) {\n    const query = new URLSearchParams(params).toString();\n    return this._get(`/api/memory/patterns${query ? '?' + query : ''}`);\n  }\n\n  /**\n   * Get pattern detail\n   */\n  async getPattern(patternId) {\n    return this._get(`/api/memory/patterns/${patternId}`);\n  }\n\n  /**\n   * List skills\n   */\n  async listSkills() {\n    return this._get('/api/memory/skills');\n  }\n\n  /**\n   * Get skill detail\n   */\n  async getSkill(skillId) {\n    return this._get(`/api/memory/skills/${skillId}`);\n  }\n\n  /**\n   * Retrieve relevant memories\n   */\n  async retrieveMemories(query, taskType = null, topK = 5) {\n    return this._post('/api/memory/retrieve', { query, taskType, topK });\n  }\n\n  /**\n   * Trigger memory consolidation\n   */\n  async consolidateMemory(sinceHours = 24) {\n    return this._post('/api/memory/consolidate', { sinceHours });\n  }\n\n  /**\n   * Get token economics\n   */\n  async getTokenEconomics() {\n    return this._get('/api/memory/economics');\n  }\n\n  // ============================================\n  // Registry API (Cross-project)\n  // ============================================\n\n  /**\n   * List registered projects\n   */\n  async listRegisteredProjects(includeInactive = false) {\n    return this._get(`/api/registry/projects?include_inactive=${includeInactive}`);\n  }\n\n  /**\n   * Register a project\n   */\n  async registerProject(path, name = null, alias = null) {\n    return this._post('/api/registry/projects', { path, name, alias });\n  }\n\n  /**\n   * Discover projects\n   */\n  async discoverProjects(maxDepth = 3) {\n    return this._get(`/api/registry/discover?max_depth=${maxDepth}`);\n  }\n\n  /**\n   * Sync registry with discovered projects\n   */\n  async syncRegistry() {\n    return this._post('/api/registry/sync', {});\n  }\n\n  /**\n   * Get cross-project tasks\n   */\n  async getCrossProjectTasks(projectIds = null) {\n    const query = projectIds ? `?project_ids=${projectIds.join(',')}` : '';\n    return this._get(`/api/registry/tasks${query}`);\n  }\n\n  // ============================================\n  // Learning API\n  // ============================================\n\n  /**\n   * Get learning metrics and aggregations\n   * @param {object} params - Query parameters\n   * @param {string} params.timeRange - Time range ('1h', '24h', '7d', '30d')\n   * @param {string} params.signalType - Filter by signal type\n   * @param {string} params.source - Filter by source\n   */\n  async getLearningMetrics(params = {}) {\n    const query = new URLSearchParams();\n    if (params.timeRange) query.append('timeRange', params.timeRange);\n    if (params.signalType) query.append('signalType', params.signalType);\n    if (params.source) query.append('source', params.source);\n    const queryStr = query.toString() ? `?${query}` : '';\n    return this._get(`/api/learning/metrics${queryStr}`);\n  }\n\n  /**\n   * Get learning signal trends over time\n   * @param {object} params - Query parameters\n   */\n  async getLearningTrends(params = {}) {\n    const query = new URLSearchParams();\n    if (params.timeRange) query.append('timeRange', params.timeRange);\n    if (params.signalType) query.append('signalType', params.signalType);\n    if (params.source) query.append('source', params.source);\n    const queryStr = query.toString() ? `?${query}` : '';\n    return this._get(`/api/learning/trends${queryStr}`);\n  }\n\n  /**\n   * Get recent learning signals\n   * @param {object} params - Query parameters\n   * @param {number} params.limit - Max signals to return\n   * @param {number} params.offset - Pagination offset\n   */\n  async getLearningSignals(params = {}) {\n    const query = new URLSearchParams();\n    if (params.timeRange) query.append('timeRange', params.timeRange);\n    if (params.signalType) query.append('signalType', params.signalType);\n    if (params.source) query.append('source', params.source);\n    if (params.limit) query.append('limit', String(params.limit));\n    if (params.offset) query.append('offset', String(params.offset));\n    const queryStr = query.toString() ? `?${query}` : '';\n    return this._get(`/api/learning/signals${queryStr}`);\n  }\n\n  /**\n   * Get latest aggregation result\n   */\n  async getLatestAggregation() {\n    return this._get('/api/learning/aggregation');\n  }\n\n  /**\n   * Trigger a new aggregation\n   * @param {object} params - Aggregation parameters\n   */\n  async triggerAggregation(params = {}) {\n    return this._post('/api/learning/aggregate', params);\n  }\n\n  /**\n   * Get aggregated user preferences\n   * @param {number} limit - Max preferences to return\n   */\n  async getAggregatedPreferences(limit = 20) {\n    return this._get(`/api/learning/preferences?limit=${limit}`);\n  }\n\n  /**\n   * Get aggregated error patterns\n   * @param {number} limit - Max patterns to return\n   */\n  async getAggregatedErrors(limit = 20) {\n    return this._get(`/api/learning/errors?limit=${limit}`);\n  }\n\n  /**\n   * Get aggregated success patterns\n   * @param {number} limit - Max patterns to return\n   */\n  async getAggregatedSuccessPatterns(limit = 20) {\n    return this._get(`/api/learning/success?limit=${limit}`);\n  }\n\n  /**\n   * Get tool efficiency rankings\n   * @param {number} limit - Max tools to return\n   */\n  async getToolEfficiency(limit = 20) {\n    return this._get(`/api/learning/tools?limit=${limit}`);\n  }\n\n  // ============================================\n  // Polling Mode (Fallback)\n  // ============================================\n\n  /**\n   * Start polling for updates\n   * Uses adaptive polling interval based on context and visibility\n   */\n  startPolling(callback, interval = null) {\n    if (this._pollInterval) return;\n\n    // Store callback for use when restarting polling with new interval\n    this._pollCallback = callback;\n\n    const pollFn = async () => {\n      try {\n        const status = await this.getStatus();\n        this._connected = true;\n        if (this._pollCallback) this._pollCallback(status);\n        this._emit(ApiEvents.STATUS_UPDATE, status);\n\n        // Notify VS Code of successful poll if in that context\n        if (this._vscodeApi) {\n          this.postToVSCode('pollSuccess', { timestamp: Date.now() });\n        }\n      } catch (error) {\n        this._connected = false;\n        this._emit(ApiEvents.ERROR, { error });\n\n        // Notify VS Code of poll failure\n        if (this._vscodeApi) {\n          this.postToVSCode('pollError', { error: error.message });\n        }\n      }\n    };\n\n    pollFn(); // Initial poll\n    // Use provided interval, current adaptive interval, or config default\n    const effectiveInterval = interval || this._currentPollInterval || this.config.pollInterval;\n    this._pollInterval = setInterval(pollFn, effectiveInterval);\n  }\n\n  /**\n   * Stop polling\n   */\n  stopPolling() {\n    if (this._pollInterval) {\n      clearInterval(this._pollInterval);\n      this._pollInterval = null;\n    }\n  }\n}\n\n/**\n * Create a new API client instance\n * @param {object} config - Configuration options\n * @returns {LokiApiClient}\n */\nexport function createApiClient(config = {}) {\n  return new LokiApiClient(config);\n}\n\n/**\n * Get the default API client instance\n * @param {object} config - Configuration options\n * @returns {LokiApiClient}\n */\nexport function getApiClient(config = {}) {\n  return LokiApiClient.getInstance(config);\n}\n\n// Export polling intervals for external configuration\nexport { POLL_INTERVALS, CONTEXT_DEFAULTS };\n\nexport default LokiApiClient;\n", "/**\n * Loki Mode Client-Side State Management\n *\n * Provides reactive state management with localStorage persistence\n * for Loki Mode web components.\n */\n\n/**\n * State change event type\n */\nexport const STATE_CHANGE_EVENT = 'loki-state-change';\n\n/**\n * Default state structure\n */\nconst DEFAULT_STATE = {\n  // UI State\n  ui: {\n    theme: 'light',\n    sidebarCollapsed: false,\n    activeSection: 'kanban',\n    terminalAutoScroll: true,\n  },\n\n  // Session State\n  session: {\n    connected: false,\n    lastSync: null,\n    mode: 'offline',\n    phase: null,\n    iteration: null,\n  },\n\n  // Local Tasks (not synced to server)\n  localTasks: [],\n\n  // Cached Server Data\n  cache: {\n    projects: [],\n    tasks: [],\n    agents: [],\n    memory: null,\n    lastFetch: null,\n  },\n\n  // User Preferences\n  preferences: {\n    pollInterval: 2000,\n    notifications: true,\n    soundEnabled: false,\n  },\n};\n\n/**\n * LokiState - Reactive state management with localStorage persistence\n */\nexport class LokiState extends EventTarget {\n  static STORAGE_KEY = 'loki-dashboard-state';\n  static _instance = null;\n\n  /**\n   * Get the singleton instance\n   * @returns {LokiState}\n   */\n  static getInstance() {\n    if (!LokiState._instance) {\n      LokiState._instance = new LokiState();\n    }\n    return LokiState._instance;\n  }\n\n  constructor() {\n    super();\n    this._state = this._loadState();\n    this._subscribers = new Map();\n    this._batchUpdates = [];\n    this._batchTimeout = null;\n  }\n\n  /**\n   * Load state from localStorage\n   */\n  _loadState() {\n    try {\n      const saved = localStorage.getItem(LokiState.STORAGE_KEY);\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        return this._mergeState(DEFAULT_STATE, parsed);\n      }\n    } catch (e) {\n      console.warn('Failed to load state from localStorage:', e);\n    }\n    return { ...DEFAULT_STATE };\n  }\n\n  /**\n   * Deep merge two state objects\n   */\n  _mergeState(defaults, saved) {\n    const result = { ...defaults };\n    for (const key of Object.keys(saved)) {\n      if (key in defaults && typeof defaults[key] === 'object' && !Array.isArray(defaults[key])) {\n        result[key] = this._mergeState(defaults[key], saved[key]);\n      } else {\n        result[key] = saved[key];\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Save state to localStorage\n   */\n  _saveState() {\n    try {\n      // Only persist certain parts of state\n      const toSave = {\n        ui: this._state.ui,\n        localTasks: this._state.localTasks,\n        preferences: this._state.preferences,\n      };\n      localStorage.setItem(LokiState.STORAGE_KEY, JSON.stringify(toSave));\n    } catch (e) {\n      console.warn('Failed to save state to localStorage:', e);\n    }\n  }\n\n  /**\n   * Get the current state\n   * @param {string} path - Optional dot-notation path (e.g., 'ui.theme')\n   * @returns {any}\n   */\n  get(path = null) {\n    if (!path) return { ...this._state };\n\n    const parts = path.split('.');\n    let value = this._state;\n    for (const part of parts) {\n      if (value === undefined || value === null) return undefined;\n      value = value[part];\n    }\n    return value;\n  }\n\n  /**\n   * Set a state value\n   * @param {string} path - Dot-notation path (e.g., 'ui.theme')\n   * @param {any} value - New value\n   * @param {boolean} persist - Whether to save to localStorage (default: true)\n   */\n  set(path, value, persist = true) {\n    const parts = path.split('.');\n    const lastKey = parts.pop();\n    let target = this._state;\n\n    for (const part of parts) {\n      if (!(part in target)) {\n        target[part] = {};\n      }\n      target = target[part];\n    }\n\n    const oldValue = target[lastKey];\n    target[lastKey] = value;\n\n    if (persist) {\n      this._saveState();\n    }\n\n    this._notifyChange(path, value, oldValue);\n  }\n\n  /**\n   * Update multiple state values at once\n   * @param {object} updates - Object with path:value pairs\n   * @param {boolean} persist - Whether to save to localStorage\n   */\n  update(updates, persist = true) {\n    const changes = [];\n\n    for (const [path, value] of Object.entries(updates)) {\n      const oldValue = this.get(path);\n      this.set(path, value, false);\n      changes.push({ path, value, oldValue });\n    }\n\n    if (persist) {\n      this._saveState();\n    }\n\n    // Batch notify\n    for (const change of changes) {\n      this._notifyChange(change.path, change.value, change.oldValue);\n    }\n  }\n\n  /**\n   * Notify subscribers of a state change\n   */\n  _notifyChange(path, value, oldValue) {\n    // Dispatch generic event\n    this.dispatchEvent(new CustomEvent(STATE_CHANGE_EVENT, {\n      detail: { path, value, oldValue }\n    }));\n\n    // Notify specific path subscribers\n    const subscribers = this._subscribers.get(path) || [];\n    for (const callback of subscribers) {\n      try {\n        callback(value, oldValue, path);\n      } catch (e) {\n        console.error('State subscriber error:', e);\n      }\n    }\n\n    // Notify parent path subscribers\n    const parts = path.split('.');\n    while (parts.length > 1) {\n      parts.pop();\n      const parentPath = parts.join('.');\n      const parentSubscribers = this._subscribers.get(parentPath) || [];\n      for (const callback of parentSubscribers) {\n        try {\n          callback(this.get(parentPath), null, parentPath);\n        } catch (e) {\n          console.error('State subscriber error:', e);\n        }\n      }\n    }\n  }\n\n  /**\n   * Subscribe to state changes at a specific path\n   * @param {string} path - Dot-notation path\n   * @param {function} callback - Called with (newValue, oldValue, path)\n   * @returns {function} Unsubscribe function\n   */\n  subscribe(path, callback) {\n    if (!this._subscribers.has(path)) {\n      this._subscribers.set(path, []);\n    }\n    this._subscribers.get(path).push(callback);\n\n    // Return unsubscribe function\n    return () => {\n      const subs = this._subscribers.get(path);\n      const index = subs.indexOf(callback);\n      if (index > -1) {\n        subs.splice(index, 1);\n      }\n    };\n  }\n\n  /**\n   * Reset state to defaults\n   * @param {string} path - Optional path to reset (resets all if not provided)\n   */\n  reset(path = null) {\n    if (path) {\n      const parts = path.split('.');\n      let defaultValue = DEFAULT_STATE;\n      for (const part of parts) {\n        defaultValue = defaultValue?.[part];\n      }\n      this.set(path, defaultValue);\n    } else {\n      this._state = { ...DEFAULT_STATE };\n      this._saveState();\n      this.dispatchEvent(new CustomEvent(STATE_CHANGE_EVENT, {\n        detail: { path: null, value: this._state, oldValue: null }\n      }));\n    }\n  }\n\n  // ============================================\n  // Convenience Methods\n  // ============================================\n\n  /**\n   * Add a local task\n   */\n  addLocalTask(task) {\n    const tasks = this.get('localTasks') || [];\n    const newTask = {\n      id: `local-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      createdAt: new Date().toISOString(),\n      status: 'pending',\n      ...task,\n    };\n    this.set('localTasks', [...tasks, newTask]);\n    return newTask;\n  }\n\n  /**\n   * Update a local task\n   */\n  updateLocalTask(taskId, updates) {\n    const tasks = this.get('localTasks') || [];\n    const index = tasks.findIndex(t => t.id === taskId);\n    if (index === -1) return null;\n\n    const updatedTask = { ...tasks[index], ...updates, updatedAt: new Date().toISOString() };\n    tasks[index] = updatedTask;\n    this.set('localTasks', [...tasks]);\n    return updatedTask;\n  }\n\n  /**\n   * Delete a local task\n   */\n  deleteLocalTask(taskId) {\n    const tasks = this.get('localTasks') || [];\n    this.set('localTasks', tasks.filter(t => t.id !== taskId));\n  }\n\n  /**\n   * Move a local task to a different status\n   */\n  moveLocalTask(taskId, newStatus, position = null) {\n    const tasks = this.get('localTasks') || [];\n    const task = tasks.find(t => t.id === taskId);\n    if (!task) return null;\n\n    return this.updateLocalTask(taskId, {\n      status: newStatus,\n      position: position ?? task.position,\n    });\n  }\n\n  /**\n   * Update session state\n   */\n  updateSession(updates) {\n    this.update(\n      Object.fromEntries(\n        Object.entries(updates).map(([k, v]) => [`session.${k}`, v])\n      ),\n      false // Don't persist session state\n    );\n  }\n\n  /**\n   * Update cache with server data\n   */\n  updateCache(data) {\n    this.update({\n      'cache.projects': data.projects ?? this.get('cache.projects'),\n      'cache.tasks': data.tasks ?? this.get('cache.tasks'),\n      'cache.agents': data.agents ?? this.get('cache.agents'),\n      'cache.memory': data.memory ?? this.get('cache.memory'),\n      'cache.lastFetch': new Date().toISOString(),\n    }, false);\n  }\n\n  /**\n   * Get merged tasks (local + server)\n   */\n  getMergedTasks() {\n    const serverTasks = this.get('cache.tasks') || [];\n    const localTasks = this.get('localTasks') || [];\n\n    // Mark local tasks\n    const markedLocal = localTasks.map(t => ({ ...t, isLocal: true }));\n\n    return [...serverTasks, ...markedLocal];\n  }\n\n  /**\n   * Get tasks by status\n   */\n  getTasksByStatus(status) {\n    return this.getMergedTasks().filter(t => t.status === status);\n  }\n}\n\n/**\n * Get the default state instance\n * @returns {LokiState}\n */\nexport function getState() {\n  return LokiState.getInstance();\n}\n\n/**\n * Create a reactive store bound to a specific state path\n * @param {string} path - State path to bind to\n * @returns {object} Store with get, set, and subscribe methods\n */\nexport function createStore(path) {\n  const state = getState();\n\n  return {\n    get: () => state.get(path),\n    set: (value) => state.set(path, value),\n    subscribe: (callback) => state.subscribe(path, callback),\n  };\n}\n\nexport default LokiState;\n", "/**\n * Loki Task Board Component\n *\n * A Kanban-style task board web component for displaying and managing tasks.\n *\n * Usage:\n *   <loki-task-board\n *     api-url=\"http://localhost:8420\"\n *     project-id=\"1\"\n *     theme=\"dark\"\n *   ></loki-task-board>\n *\n * Attributes:\n *   - api-url: API base URL (default: http://localhost:8420)\n *   - project-id: Filter tasks by project ID\n *   - theme: 'light' or 'dark' (default: auto-detect)\n *   - readonly: Disable drag-drop and editing\n */\n\nimport { LokiElement } from '../core/loki-theme.js';\nimport { getApiClient, ApiEvents } from '../core/loki-api-client.js';\nimport { getState } from '../core/loki-state.js';\n\nconst COLUMNS = [\n  { id: 'pending', label: 'Pending', status: 'pending', color: 'var(--loki-text-muted)' },\n  { id: 'in_progress', label: 'In Progress', status: 'in_progress', color: 'var(--loki-blue)' },\n  { id: 'review', label: 'In Review', status: 'review', color: 'var(--loki-purple)' },\n  { id: 'done', label: 'Completed', status: 'done', color: 'var(--loki-green)' },\n];\n\nconst PRIORITY_COLORS = {\n  critical: 'var(--loki-red)',\n  high: 'var(--loki-red)',\n  medium: 'var(--loki-yellow)',\n  low: 'var(--loki-green)',\n};\n\nexport class LokiTaskBoard extends LokiElement {\n  static get observedAttributes() {\n    return ['api-url', 'project-id', 'theme', 'readonly'];\n  }\n\n  constructor() {\n    super();\n    this._tasks = [];\n    this._loading = true;\n    this._error = null;\n    this._draggedTask = null;\n    this._api = null;\n    this._state = getState();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._setupApi();\n    this._loadTasks();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._api) {\n      this._api.removeEventListener(ApiEvents.TASK_CREATED, this._onTaskEvent);\n      this._api.removeEventListener(ApiEvents.TASK_UPDATED, this._onTaskEvent);\n      this._api.removeEventListener(ApiEvents.TASK_DELETED, this._onTaskEvent);\n    }\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n\n    if (name === 'api-url' && this._api) {\n      this._api.baseUrl = newValue;\n      this._loadTasks();\n    }\n    if (name === 'project-id') {\n      this._loadTasks();\n    }\n    if (name === 'theme') {\n      this._applyTheme();\n    }\n  }\n\n  _setupApi() {\n    const apiUrl = this.getAttribute('api-url') || 'http://localhost:8420';\n    this._api = getApiClient({ baseUrl: apiUrl });\n\n    this._onTaskEvent = () => this._loadTasks();\n    this._api.addEventListener(ApiEvents.TASK_CREATED, this._onTaskEvent);\n    this._api.addEventListener(ApiEvents.TASK_UPDATED, this._onTaskEvent);\n    this._api.addEventListener(ApiEvents.TASK_DELETED, this._onTaskEvent);\n  }\n\n  async _loadTasks() {\n    this._loading = true;\n    this._error = null;\n    this.render();\n\n    try {\n      const projectId = this.getAttribute('project-id');\n      const filters = projectId ? { projectId: parseInt(projectId) } : {};\n      this._tasks = await this._api.listTasks(filters);\n\n      // Merge with local tasks\n      const localTasks = this._state.get('localTasks') || [];\n      if (localTasks.length > 0) {\n        this._tasks = [...this._tasks, ...localTasks.map(t => ({ ...t, isLocal: true }))];\n      }\n\n      this._state.update({ 'cache.tasks': this._tasks }, false);\n    } catch (error) {\n      this._error = error.message;\n      // Fall back to local tasks only\n      this._tasks = (this._state.get('localTasks') || []).map(t => ({ ...t, isLocal: true }));\n    }\n\n    this._loading = false;\n    this.render();\n  }\n\n  _getTasksByStatus(status) {\n    return this._tasks.filter(t => {\n      const taskStatus = t.status?.toLowerCase().replace(/-/g, '_');\n      return taskStatus === status;\n    });\n  }\n\n  _handleDragStart(e, task) {\n    if (this.hasAttribute('readonly')) return;\n\n    this._draggedTask = task;\n    e.target.classList.add('dragging');\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', task.id.toString());\n  }\n\n  _handleDragEnd(e) {\n    e.target.classList.remove('dragging');\n    this._draggedTask = null;\n    this.shadowRoot.querySelectorAll('.kanban-tasks').forEach(el => {\n      el.classList.remove('drag-over');\n    });\n  }\n\n  _handleDragOver(e) {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  _handleDragEnter(e) {\n    e.preventDefault();\n    e.currentTarget.classList.add('drag-over');\n  }\n\n  _handleDragLeave(e) {\n    if (!e.currentTarget.contains(e.relatedTarget)) {\n      e.currentTarget.classList.remove('drag-over');\n    }\n  }\n\n  async _handleDrop(e, newStatus) {\n    e.preventDefault();\n    e.currentTarget.classList.remove('drag-over');\n\n    if (!this._draggedTask || this.hasAttribute('readonly')) return;\n\n    const taskId = this._draggedTask.id;\n    const task = this._tasks.find(t => t.id === taskId);\n    if (!task) return;\n\n    const oldStatus = task.status;\n    if (oldStatus === newStatus) return;\n\n    // Optimistic update\n    task.status = newStatus;\n    this.render();\n\n    try {\n      if (task.isLocal) {\n        this._state.moveLocalTask(taskId, newStatus);\n      } else {\n        await this._api.moveTask(taskId, newStatus, 0);\n      }\n\n      this.dispatchEvent(new CustomEvent('task-moved', {\n        detail: { taskId, oldStatus, newStatus }\n      }));\n    } catch (error) {\n      // Revert on error\n      task.status = oldStatus;\n      this.render();\n      console.error('Failed to move task:', error);\n    }\n  }\n\n  _openAddTaskModal(status = 'pending') {\n    this.dispatchEvent(new CustomEvent('add-task', { detail: { status } }));\n  }\n\n  _openTaskDetail(task) {\n    this.dispatchEvent(new CustomEvent('task-click', { detail: { task } }));\n  }\n\n  render() {\n    const styles = `\n      <style>\n        :host {\n          display: block;\n          ${this.getBaseStyles()}\n        }\n\n        .board-container {\n          width: 100%;\n        }\n\n        .board-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 16px;\n        }\n\n        .board-title {\n          font-size: 16px;\n          font-weight: 600;\n          color: var(--loki-text-primary);\n        }\n\n        .board-actions {\n          display: flex;\n          gap: 8px;\n        }\n\n        .loading, .error {\n          padding: 40px;\n          text-align: center;\n          color: var(--loki-text-muted);\n        }\n\n        .error {\n          color: var(--loki-red);\n        }\n\n        .kanban-board {\n          display: grid;\n          grid-template-columns: repeat(4, 1fr);\n          gap: 12px;\n          min-height: 350px;\n        }\n\n        @media (max-width: 1200px) {\n          .kanban-board { grid-template-columns: repeat(2, 1fr); }\n        }\n\n        @media (max-width: 768px) {\n          .kanban-board { grid-template-columns: 1fr; }\n        }\n\n        .kanban-column {\n          background: var(--loki-bg-secondary);\n          border-radius: 10px;\n          padding: 12px;\n          display: flex;\n          flex-direction: column;\n          transition: background var(--loki-transition);\n        }\n\n        .kanban-column-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 12px;\n          padding-bottom: 10px;\n          border-bottom: 2px solid var(--loki-border);\n        }\n\n        .kanban-column[data-status=\"pending\"] .kanban-column-header { border-color: var(--loki-text-muted); }\n        .kanban-column[data-status=\"in_progress\"] .kanban-column-header { border-color: var(--loki-blue); }\n        .kanban-column[data-status=\"review\"] .kanban-column-header { border-color: var(--loki-purple); }\n        .kanban-column[data-status=\"done\"] .kanban-column-header { border-color: var(--loki-green); }\n\n        .kanban-column-title {\n          font-size: 13px;\n          font-weight: 600;\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          color: var(--loki-text-primary);\n        }\n\n        .kanban-column-count {\n          background: var(--loki-bg-tertiary);\n          padding: 2px 8px;\n          border-radius: 10px;\n          font-size: 11px;\n          font-weight: 600;\n          font-family: 'JetBrains Mono', monospace;\n          color: var(--loki-text-secondary);\n        }\n\n        .kanban-tasks {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n          min-height: 80px;\n          transition: background var(--loki-transition);\n          border-radius: 6px;\n          padding: 4px;\n        }\n\n        .kanban-tasks.drag-over {\n          background: var(--loki-bg-hover);\n        }\n\n        .task-card {\n          background: var(--loki-bg-card);\n          border: 1px solid var(--loki-border);\n          border-radius: 6px;\n          padding: 10px;\n          cursor: pointer;\n          transition: all var(--loki-transition);\n        }\n\n        .task-card:hover {\n          border-color: var(--loki-border-light);\n          transform: translateY(-1px);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n        }\n\n        .task-card.draggable {\n          cursor: grab;\n        }\n\n        .task-card.dragging {\n          opacity: 0.5;\n          cursor: grabbing;\n        }\n\n        .task-card.local {\n          border-left: 3px solid var(--loki-accent);\n        }\n\n        .task-card-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n          margin-bottom: 6px;\n        }\n\n        .task-id {\n          font-size: 11px;\n          font-weight: 600;\n          font-family: 'JetBrains Mono', monospace;\n          color: var(--loki-accent);\n        }\n\n        .task-priority {\n          font-size: 9px;\n          padding: 2px 5px;\n          border-radius: 3px;\n          font-weight: 500;\n          text-transform: uppercase;\n        }\n\n        .task-priority.high, .task-priority.critical {\n          background: var(--loki-red-muted);\n          color: var(--loki-red);\n        }\n\n        .task-priority.medium {\n          background: var(--loki-yellow-muted);\n          color: var(--loki-yellow);\n        }\n\n        .task-priority.low {\n          background: var(--loki-green-muted);\n          color: var(--loki-green);\n        }\n\n        .task-title {\n          font-size: 12px;\n          font-weight: 500;\n          margin-bottom: 6px;\n          line-height: 1.4;\n          color: var(--loki-text-primary);\n        }\n\n        .task-meta {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 10px;\n          color: var(--loki-text-muted);\n        }\n\n        .task-type {\n          background: var(--loki-bg-tertiary);\n          padding: 2px 6px;\n          border-radius: 3px;\n        }\n\n        .add-task-btn {\n          background: transparent;\n          border: 1px dashed var(--loki-border);\n          border-radius: 6px;\n          padding: 10px;\n          color: var(--loki-text-muted);\n          font-size: 12px;\n          cursor: pointer;\n          transition: all var(--loki-transition);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 6px;\n          margin-top: 8px;\n        }\n\n        .add-task-btn:hover {\n          border-color: var(--loki-accent);\n          color: var(--loki-accent);\n          background: var(--loki-accent-muted);\n        }\n\n        .empty-column {\n          text-align: center;\n          padding: 20px;\n          color: var(--loki-text-muted);\n          font-size: 12px;\n        }\n\n        /* Column icons */\n        .column-icon {\n          width: 14px;\n          height: 14px;\n          stroke: currentColor;\n          stroke-width: 2;\n          fill: none;\n        }\n      </style>\n    `;\n\n    const columnIcon = (status) => {\n      switch (status) {\n        case 'pending':\n          return '<circle cx=\"12\" cy=\"12\" r=\"10\"/>';\n        case 'in_progress':\n          return '<path d=\"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83\"/>';\n        case 'review':\n          return '<path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"/><circle cx=\"12\" cy=\"12\" r=\"3\"/>';\n        case 'done':\n          return '<path d=\"M22 11.08V12a10 10 0 11-5.93-9.14\"/><polyline points=\"22 4 12 14.01 9 11.01\"/>';\n        default:\n          return '<circle cx=\"12\" cy=\"12\" r=\"10\"/>';\n      }\n    };\n\n    let content;\n    if (this._loading) {\n      content = '<div class=\"loading\">Loading tasks...</div>';\n    } else if (this._error && this._tasks.length === 0) {\n      content = `<div class=\"error\">Error: ${this._error}</div>`;\n    } else {\n      const readonly = this.hasAttribute('readonly');\n\n      content = `\n        <div class=\"kanban-board\">\n          ${COLUMNS.map(col => {\n            const tasks = this._getTasksByStatus(col.status);\n            return `\n              <div class=\"kanban-column\" data-status=\"${col.status}\">\n                <div class=\"kanban-column-header\">\n                  <span class=\"kanban-column-title\">\n                    <svg class=\"column-icon\" viewBox=\"0 0 24 24\" style=\"color: ${col.color}\">\n                      ${columnIcon(col.status)}\n                    </svg>\n                    ${col.label}\n                  </span>\n                  <span class=\"kanban-column-count\">${tasks.length}</span>\n                </div>\n                <div class=\"kanban-tasks\" data-status=\"${col.status}\">\n                  ${tasks.length === 0 ? `<div class=\"empty-column\">No tasks</div>` : ''}\n                  ${tasks.map(task => `\n                    <div class=\"task-card ${!readonly && !task.fromServer ? 'draggable' : ''} ${task.isLocal ? 'local' : ''}\"\n                         data-task-id=\"${task.id}\"\n                         tabindex=\"0\"\n                         role=\"button\"\n                         aria-label=\"Task: ${this._escapeHtml(task.title || 'Untitled')}, ${task.priority || 'medium'} priority\"\n                         ${!readonly && !task.fromServer ? 'draggable=\"true\"' : ''}>\n                      <div class=\"task-card-header\">\n                        <span class=\"task-id\">${task.isLocal ? 'LOCAL' : '#' + task.id}</span>\n                        <span class=\"task-priority ${(task.priority || 'medium').toLowerCase()}\">${task.priority || 'medium'}</span>\n                      </div>\n                      <div class=\"task-title\">${this._escapeHtml(task.title || 'Untitled')}</div>\n                      <div class=\"task-meta\">\n                        <span class=\"task-type\">${task.type || 'task'}</span>\n                        ${task.assigned_agent_id ? `<span>Agent #${task.assigned_agent_id}</span>` : ''}\n                      </div>\n                    </div>\n                  `).join('')}\n                </div>\n                ${!readonly && col.status === 'pending' ? `\n                  <button class=\"add-task-btn\" data-status=\"${col.status}\" aria-label=\"Add new task to ${col.label}\">+ Add Task</button>\n                ` : ''}\n              </div>\n            `;\n          }).join('')}\n        </div>\n      `;\n    }\n\n    this.shadowRoot.innerHTML = `\n      ${styles}\n      <div class=\"board-container\">\n        <div class=\"board-header\">\n          <h2 class=\"board-title\">Task Queue</h2>\n          <div class=\"board-actions\">\n            <button class=\"btn btn-secondary\" id=\"refresh-btn\" aria-label=\"Refresh task board\">\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\" aria-hidden=\"true\">\n                <polyline points=\"23 4 23 10 17 10\"/>\n                <polyline points=\"1 20 1 14 7 14\"/>\n                <path d=\"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15\"/>\n              </svg>\n              Refresh\n            </button>\n          </div>\n        </div>\n        ${content}\n      </div>\n    `;\n\n    this._attachEventListeners();\n  }\n\n  _attachEventListeners() {\n    // Refresh button\n    const refreshBtn = this.shadowRoot.getElementById('refresh-btn');\n    if (refreshBtn) {\n      refreshBtn.addEventListener('click', () => this._loadTasks());\n    }\n\n    // Add task buttons\n    this.shadowRoot.querySelectorAll('.add-task-btn').forEach(btn => {\n      btn.addEventListener('click', () => {\n        this._openAddTaskModal(btn.dataset.status);\n      });\n    });\n\n    // Task cards\n    this.shadowRoot.querySelectorAll('.task-card').forEach(card => {\n      const taskId = card.dataset.taskId;\n      const task = this._tasks.find(t => t.id.toString() === taskId);\n\n      if (!task) return;\n\n      card.addEventListener('click', () => this._openTaskDetail(task));\n\n      // Keyboard navigation support\n      card.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          this._openTaskDetail(task);\n        } else if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n          e.preventDefault();\n          this._navigateTaskCards(card, e.key === 'ArrowDown' ? 'next' : 'prev');\n        }\n      });\n\n      if (card.classList.contains('draggable')) {\n        card.addEventListener('dragstart', (e) => this._handleDragStart(e, task));\n        card.addEventListener('dragend', (e) => this._handleDragEnd(e));\n      }\n    });\n\n    // Drop zones\n    this.shadowRoot.querySelectorAll('.kanban-tasks').forEach(zone => {\n      zone.addEventListener('dragover', (e) => this._handleDragOver(e));\n      zone.addEventListener('dragenter', (e) => this._handleDragEnter(e));\n      zone.addEventListener('dragleave', (e) => this._handleDragLeave(e));\n      zone.addEventListener('drop', (e) => this._handleDrop(e, zone.dataset.status));\n    });\n  }\n\n  _escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  _navigateTaskCards(currentCard, direction) {\n    const cards = Array.from(this.shadowRoot.querySelectorAll('.task-card'));\n    const currentIndex = cards.indexOf(currentCard);\n    if (currentIndex === -1) return;\n\n    const targetIndex = direction === 'next' ? currentIndex + 1 : currentIndex - 1;\n    if (targetIndex >= 0 && targetIndex < cards.length) {\n      cards[targetIndex].focus();\n    }\n  }\n}\n\n// Register the component\ncustomElements.define('loki-task-board', LokiTaskBoard);\n\nexport default LokiTaskBoard;\n", "/**\n * Loki Session Control Component\n *\n * Control panel for Loki Mode session with start/stop/pause buttons.\n *\n * Usage:\n *   <loki-session-control\n *     api-url=\"http://localhost:8420\"\n *     theme=\"dark\"\n *   ></loki-session-control>\n *\n * Attributes:\n *   - api-url: API base URL (default: http://localhost:8420)\n *   - theme: 'light' or 'dark' (default: auto-detect)\n *   - compact: Show compact version\n *\n * Events:\n *   - session-start: Fired when start is clicked\n *   - session-pause: Fired when pause is clicked\n *   - session-resume: Fired when resume is clicked\n *   - session-stop: Fired when stop is clicked\n */\n\nimport { LokiElement } from '../core/loki-theme.js';\nimport { getApiClient, ApiEvents } from '../core/loki-api-client.js';\nimport { getState } from '../core/loki-state.js';\n\nexport class LokiSessionControl extends LokiElement {\n  static get observedAttributes() {\n    return ['api-url', 'theme', 'compact'];\n  }\n\n  constructor() {\n    super();\n    this._status = {\n      mode: 'offline',\n      phase: null,\n      iteration: null,\n      complexity: null,\n      connected: false,\n      version: null,\n      uptime: 0,\n      activeAgents: 0,\n      pendingTasks: 0,\n    };\n    this._api = null;\n    this._state = getState();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._setupApi();\n    this._loadStatus();\n    this._startPolling();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._stopPolling();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n\n    if (name === 'api-url' && this._api) {\n      this._api.baseUrl = newValue;\n      this._loadStatus();\n    }\n    if (name === 'theme') {\n      this._applyTheme();\n    }\n    if (name === 'compact') {\n      this.render();\n    }\n  }\n\n  _setupApi() {\n    const apiUrl = this.getAttribute('api-url') || 'http://localhost:8420';\n    this._api = getApiClient({ baseUrl: apiUrl });\n\n    this._api.addEventListener(ApiEvents.STATUS_UPDATE, (e) => {\n      this._updateFromStatus(e.detail);\n    });\n\n    this._api.addEventListener(ApiEvents.CONNECTED, () => {\n      this._status.connected = true;\n      this.render();\n    });\n\n    this._api.addEventListener(ApiEvents.DISCONNECTED, () => {\n      this._status.connected = false;\n      this._status.mode = 'offline';\n      this.render();\n    });\n  }\n\n  async _loadStatus() {\n    try {\n      const status = await this._api.getStatus();\n      this._updateFromStatus(status);\n    } catch (error) {\n      this._status.connected = false;\n      this._status.mode = 'offline';\n      this.render();\n    }\n  }\n\n  _updateFromStatus(status) {\n    if (!status) return;\n\n    this._status = {\n      ...this._status,\n      connected: true,\n      mode: status.status || 'running',\n      version: status.version,\n      uptime: status.uptime_seconds || 0,\n      activeAgents: status.running_agents || 0,\n      pendingTasks: status.pending_tasks || 0,\n      phase: status.phase,\n      iteration: status.iteration,\n      complexity: status.complexity,\n    };\n\n    this._state.updateSession({\n      connected: true,\n      mode: this._status.mode,\n      lastSync: new Date().toISOString(),\n    });\n\n    this.render();\n  }\n\n  _startPolling() {\n    this._api.startPolling((status) => {\n      this._updateFromStatus(status);\n    });\n  }\n\n  _stopPolling() {\n    if (this._api) {\n      this._api.stopPolling();\n    }\n  }\n\n  _formatUptime(seconds) {\n    if (!seconds || seconds < 0) return '--';\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = Math.floor(seconds % 60);\n\n    if (hours > 0) {\n      return `${hours}h ${minutes}m`;\n    }\n    if (minutes > 0) {\n      return `${minutes}m ${secs}s`;\n    }\n    return `${secs}s`;\n  }\n\n  _getStatusClass() {\n    switch (this._status.mode) {\n      case 'running':\n      case 'autonomous':\n        return 'active';\n      case 'paused':\n        return 'paused';\n      case 'stopped':\n        return 'stopped';\n      case 'error':\n        return 'error';\n      default:\n        return 'offline';\n    }\n  }\n\n  _getStatusLabel() {\n    switch (this._status.mode) {\n      case 'running':\n      case 'autonomous':\n        return 'AUTONOMOUS';\n      case 'paused':\n        return 'PAUSED';\n      case 'stopped':\n        return 'STOPPED';\n      case 'error':\n        return 'ERROR';\n      default:\n        return 'OFFLINE';\n    }\n  }\n\n  _triggerStart() {\n    this.dispatchEvent(new CustomEvent('session-start', { detail: this._status }));\n  }\n\n  _triggerPause() {\n    this.dispatchEvent(new CustomEvent('session-pause', { detail: this._status }));\n  }\n\n  _triggerResume() {\n    this.dispatchEvent(new CustomEvent('session-resume', { detail: this._status }));\n  }\n\n  _triggerStop() {\n    this.dispatchEvent(new CustomEvent('session-stop', { detail: this._status }));\n  }\n\n  render() {\n    const isCompact = this.hasAttribute('compact');\n    const statusClass = this._getStatusClass();\n    const statusLabel = this._getStatusLabel();\n    const isRunning = ['running', 'autonomous'].includes(this._status.mode);\n    const isPaused = this._status.mode === 'paused';\n\n    const styles = `\n      <style>\n        :host {\n          display: block;\n          ${this.getBaseStyles()}\n        }\n\n        .control-panel {\n          background: var(--loki-bg-tertiary);\n          border-radius: 10px;\n          padding: 14px;\n          display: flex;\n          flex-direction: column;\n          gap: 10px;\n          transition: background var(--loki-transition);\n        }\n\n        .control-panel.compact {\n          padding: 10px;\n          gap: 8px;\n        }\n\n        .panel-title {\n          font-size: 10px;\n          font-weight: 600;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n          color: var(--loki-text-muted);\n          margin-bottom: 4px;\n        }\n\n        .status-row {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          font-size: 12px;\n        }\n\n        .status-label {\n          color: var(--loki-text-secondary);\n        }\n\n        .status-value {\n          font-weight: 500;\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          color: var(--loki-text-primary);\n        }\n\n        .status-dot {\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n        }\n\n        .status-dot.active {\n          background: var(--loki-green);\n          animation: pulse 2s infinite;\n        }\n        .status-dot.idle { background: var(--loki-text-muted); }\n        .status-dot.paused { background: var(--loki-yellow); }\n        .status-dot.stopped { background: var(--loki-red); }\n        .status-dot.error { background: var(--loki-red); }\n        .status-dot.offline { background: var(--loki-text-muted); }\n\n        @keyframes pulse {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.5; }\n        }\n\n        .control-buttons {\n          display: flex;\n          gap: 6px;\n          margin-top: 6px;\n        }\n\n        .control-btn {\n          flex: 1;\n          padding: 6px 10px;\n          border-radius: 6px;\n          border: 1px solid var(--loki-border);\n          background: var(--loki-bg-card);\n          color: var(--loki-text-secondary);\n          font-size: 11px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all var(--loki-transition);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 4px;\n        }\n\n        .control-btn:hover {\n          background: var(--loki-bg-hover);\n          color: var(--loki-text-primary);\n        }\n\n        .control-btn:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n\n        .control-btn.start:hover:not(:disabled) {\n          background: var(--loki-green-muted);\n          color: var(--loki-green);\n          border-color: var(--loki-green);\n        }\n\n        .control-btn.pause:hover:not(:disabled) {\n          background: var(--loki-yellow-muted);\n          color: var(--loki-yellow);\n          border-color: var(--loki-yellow);\n        }\n\n        .control-btn.resume:hover:not(:disabled) {\n          background: var(--loki-green-muted);\n          color: var(--loki-green);\n          border-color: var(--loki-green);\n        }\n\n        .control-btn.stop:hover:not(:disabled) {\n          background: var(--loki-red-muted);\n          color: var(--loki-red);\n          border-color: var(--loki-red);\n        }\n\n        .control-btn svg {\n          width: 10px;\n          height: 10px;\n          fill: currentColor;\n        }\n\n        .connection-status {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          padding: 6px 12px;\n          background: var(--loki-bg-tertiary);\n          border-radius: 6px;\n          font-size: 11px;\n          color: var(--loki-text-muted);\n          margin-top: 4px;\n        }\n\n        .connection-dot {\n          width: 6px;\n          height: 6px;\n          border-radius: 50%;\n          background: var(--loki-red);\n        }\n\n        .connection-dot.connected {\n          background: var(--loki-green);\n          animation: pulse 2s infinite;\n        }\n\n        .stats-row {\n          display: flex;\n          justify-content: space-around;\n          padding: 8px 0;\n          border-top: 1px solid var(--loki-border);\n          margin-top: 4px;\n        }\n\n        .stat-item {\n          text-align: center;\n        }\n\n        .stat-value {\n          font-size: 16px;\n          font-weight: 600;\n          font-family: 'JetBrains Mono', monospace;\n          color: var(--loki-text-primary);\n        }\n\n        .stat-label {\n          font-size: 10px;\n          color: var(--loki-text-muted);\n        }\n      </style>\n    `;\n\n    const compactContent = `\n      <div class=\"control-panel compact\">\n        <div class=\"status-row\">\n          <span class=\"status-value\">\n            <span class=\"status-dot ${statusClass}\"></span>\n            ${statusLabel}\n          </span>\n        </div>\n        <div class=\"control-buttons\" role=\"group\" aria-label=\"Session controls\">\n          ${isPaused ? `\n            <button class=\"control-btn resume\" id=\"resume-btn\" aria-label=\"Resume session\">\n              <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\"><polygon points=\"5 3 19 12 5 21 5 3\"/></svg>\n              Resume\n            </button>\n          ` : `\n            <button class=\"control-btn pause\" id=\"pause-btn\" aria-label=\"Pause session\" ${!isRunning ? 'disabled' : ''}>\n              <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\"><rect x=\"6\" y=\"4\" width=\"4\" height=\"16\"/><rect x=\"14\" y=\"4\" width=\"4\" height=\"16\"/></svg>\n              Pause\n            </button>\n          `}\n          <button class=\"control-btn stop\" id=\"stop-btn\" aria-label=\"Stop session\" ${!isRunning && !isPaused ? 'disabled' : ''}>\n            <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\"><rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\"/></svg>\n            Stop\n          </button>\n        </div>\n      </div>\n    `;\n\n    const fullContent = `\n      <div class=\"control-panel\">\n        <div class=\"panel-title\">System Status</div>\n\n        <div class=\"status-row\">\n          <span class=\"status-label\">Mode</span>\n          <span class=\"status-value\">\n            <span class=\"status-dot ${statusClass}\"></span>\n            ${statusLabel}\n          </span>\n        </div>\n\n        <div class=\"status-row\">\n          <span class=\"status-label\">Phase</span>\n          <span class=\"status-value\">${this._status.phase || '--'}</span>\n        </div>\n\n        <div class=\"status-row\">\n          <span class=\"status-label\">Complexity</span>\n          <span class=\"status-value\">${(this._status.complexity || '--').toUpperCase()}</span>\n        </div>\n\n        <div class=\"status-row\">\n          <span class=\"status-label\">Iteration</span>\n          <span class=\"status-value\">${this._status.iteration || '--'}</span>\n        </div>\n\n        <div class=\"status-row\">\n          <span class=\"status-label\">Uptime</span>\n          <span class=\"status-value\">${this._formatUptime(this._status.uptime)}</span>\n        </div>\n\n        <div class=\"control-buttons\" role=\"group\" aria-label=\"Session controls\">\n          ${isPaused ? `\n            <button class=\"control-btn resume\" id=\"resume-btn\" aria-label=\"Resume session\">\n              <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\"><polygon points=\"5 3 19 12 5 21 5 3\"/></svg>\n              Resume\n            </button>\n          ` : `\n            <button class=\"control-btn pause\" id=\"pause-btn\" aria-label=\"Pause session\" ${!isRunning ? 'disabled' : ''}>\n              <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\"><rect x=\"6\" y=\"4\" width=\"4\" height=\"16\"/><rect x=\"14\" y=\"4\" width=\"4\" height=\"16\"/></svg>\n              Pause\n            </button>\n          `}\n          <button class=\"control-btn stop\" id=\"stop-btn\" aria-label=\"Stop session\" ${!isRunning && !isPaused ? 'disabled' : ''}>\n            <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\"><rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\"/></svg>\n            Stop\n          </button>\n        </div>\n\n        <div class=\"connection-status\">\n          <span class=\"connection-dot ${this._status.connected ? 'connected' : ''}\"></span>\n          <span>${this._status.connected ? 'Connected' : 'Disconnected'}</span>\n          ${this._status.version ? `<span style=\"margin-left: auto\">v${this._status.version}</span>` : ''}\n        </div>\n\n        <div class=\"stats-row\">\n          <div class=\"stat-item\">\n            <div class=\"stat-value\">${this._status.activeAgents}</div>\n            <div class=\"stat-label\">Agents</div>\n          </div>\n          <div class=\"stat-item\">\n            <div class=\"stat-value\">${this._status.pendingTasks}</div>\n            <div class=\"stat-label\">Pending</div>\n          </div>\n        </div>\n      </div>\n    `;\n\n    this.shadowRoot.innerHTML = `\n      ${styles}\n      ${isCompact ? compactContent : fullContent}\n    `;\n\n    this._attachEventListeners();\n  }\n\n  _attachEventListeners() {\n    const pauseBtn = this.shadowRoot.getElementById('pause-btn');\n    const resumeBtn = this.shadowRoot.getElementById('resume-btn');\n    const stopBtn = this.shadowRoot.getElementById('stop-btn');\n    const startBtn = this.shadowRoot.getElementById('start-btn');\n\n    if (pauseBtn) {\n      pauseBtn.addEventListener('click', () => this._triggerPause());\n    }\n    if (resumeBtn) {\n      resumeBtn.addEventListener('click', () => this._triggerResume());\n    }\n    if (stopBtn) {\n      stopBtn.addEventListener('click', () => this._triggerStop());\n    }\n    if (startBtn) {\n      startBtn.addEventListener('click', () => this._triggerStart());\n    }\n  }\n}\n\n// Register the component\ncustomElements.define('loki-session-control', LokiSessionControl);\n\nexport default LokiSessionControl;\n", "/**\n * Loki Log Stream Component\n *\n * Real-time log display with filtering and auto-scroll.\n *\n * Usage:\n *   <loki-log-stream\n *     api-url=\"http://localhost:8420\"\n *     max-lines=\"500\"\n *     auto-scroll\n *     theme=\"dark\"\n *   ></loki-log-stream>\n *\n * Attributes:\n *   - api-url: API base URL (default: http://localhost:8420)\n *   - max-lines: Maximum number of log lines to keep (default: 500)\n *   - auto-scroll: Enable auto-scroll to bottom\n *   - theme: 'light' or 'dark' (default: auto-detect)\n *   - log-file: Path to log file (for file-based updates)\n *\n * Events:\n *   - log-received: Fired when a new log message is received\n *   - logs-cleared: Fired when logs are cleared\n */\n\nimport { LokiElement } from '../core/loki-theme.js';\nimport { getApiClient, ApiEvents } from '../core/loki-api-client.js';\n\nconst LOG_LEVELS = {\n  info: { color: 'var(--loki-blue)', label: 'INFO' },\n  success: { color: 'var(--loki-green)', label: 'SUCCESS' },\n  warning: { color: 'var(--loki-yellow)', label: 'WARN' },\n  error: { color: 'var(--loki-red)', label: 'ERROR' },\n  step: { color: 'var(--loki-purple)', label: 'STEP' },\n  agent: { color: 'var(--loki-accent)', label: 'AGENT' },\n  debug: { color: 'var(--loki-text-muted)', label: 'DEBUG' },\n};\n\nexport class LokiLogStream extends LokiElement {\n  static get observedAttributes() {\n    return ['api-url', 'max-lines', 'auto-scroll', 'theme', 'log-file'];\n  }\n\n  constructor() {\n    super();\n    this._logs = [];\n    this._maxLines = 500;\n    this._autoScroll = true;\n    this._filter = '';\n    this._levelFilter = 'all';\n    this._api = null;\n    this._pollInterval = null;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._maxLines = parseInt(this.getAttribute('max-lines')) || 500;\n    this._autoScroll = this.hasAttribute('auto-scroll');\n    this._setupApi();\n    this._startLogPolling();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._stopLogPolling();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'api-url':\n        if (this._api) {\n          this._api.baseUrl = newValue;\n        }\n        break;\n      case 'max-lines':\n        this._maxLines = parseInt(newValue) || 500;\n        this._trimLogs();\n        this.render();\n        break;\n      case 'auto-scroll':\n        this._autoScroll = this.hasAttribute('auto-scroll');\n        this.render();\n        break;\n      case 'theme':\n        this._applyTheme();\n        break;\n    }\n  }\n\n  _setupApi() {\n    const apiUrl = this.getAttribute('api-url') || 'http://localhost:8420';\n    this._api = getApiClient({ baseUrl: apiUrl });\n\n    this._api.addEventListener(ApiEvents.LOG_MESSAGE, (e) => {\n      this._addLog(e.detail);\n    });\n  }\n\n  _startLogPolling() {\n    const logFile = this.getAttribute('log-file');\n    if (logFile) {\n      this._pollLogFile(logFile);\n    }\n    // WebSocket-based logs are handled via event listener\n  }\n\n  async _pollLogFile(logFile) {\n    let lastSize = 0;\n\n    const poll = async () => {\n      try {\n        const response = await fetch(`${logFile}?t=${Date.now()}`);\n        if (!response.ok) return;\n\n        const text = await response.text();\n        const lines = text.split('\\n');\n\n        // Only process new lines\n        if (lines.length > lastSize) {\n          const newLines = lines.slice(lastSize);\n          for (const line of newLines) {\n            if (line.trim()) {\n              this._addLog(this._parseLine(line));\n            }\n          }\n          lastSize = lines.length;\n        }\n      } catch (error) {\n        // Silently ignore file read errors\n      }\n    };\n\n    poll();\n    this._pollInterval = setInterval(poll, 1000);\n  }\n\n  _stopLogPolling() {\n    if (this._pollInterval) {\n      clearInterval(this._pollInterval);\n      this._pollInterval = null;\n    }\n  }\n\n  _parseLine(line) {\n    // Try to parse structured log format: [TIMESTAMP] [LEVEL] message\n    const match = line.match(/^\\[([^\\]]+)\\]\\s*\\[([^\\]]+)\\]\\s*(.+)$/);\n    if (match) {\n      return {\n        timestamp: match[1],\n        level: match[2].toLowerCase(),\n        message: match[3],\n      };\n    }\n\n    // Try simpler format: TIMESTAMP LEVEL message\n    const simpleMatch = line.match(/^(\\d{2}:\\d{2}:\\d{2})\\s+(\\w+)\\s+(.+)$/);\n    if (simpleMatch) {\n      return {\n        timestamp: simpleMatch[1],\n        level: simpleMatch[2].toLowerCase(),\n        message: simpleMatch[3],\n      };\n    }\n\n    // Default: treat as info message\n    return {\n      timestamp: new Date().toLocaleTimeString(),\n      level: 'info',\n      message: line,\n    };\n  }\n\n  _addLog(log) {\n    if (!log) return;\n\n    const entry = {\n      id: Date.now() + Math.random(),\n      timestamp: log.timestamp || new Date().toLocaleTimeString(),\n      level: (log.level || 'info').toLowerCase(),\n      message: log.message || log,\n    };\n\n    this._logs.push(entry);\n    this._trimLogs();\n\n    this.dispatchEvent(new CustomEvent('log-received', { detail: entry }));\n\n    this._renderLogs();\n\n    if (this._autoScroll) {\n      this._scrollToBottom();\n    }\n  }\n\n  _trimLogs() {\n    if (this._logs.length > this._maxLines) {\n      this._logs = this._logs.slice(-this._maxLines);\n    }\n  }\n\n  _clearLogs() {\n    this._logs = [];\n    this.dispatchEvent(new CustomEvent('logs-cleared'));\n    this._renderLogs();\n  }\n\n  _toggleAutoScroll() {\n    this._autoScroll = !this._autoScroll;\n    this.render();\n    if (this._autoScroll) {\n      this._scrollToBottom();\n    }\n  }\n\n  _scrollToBottom() {\n    requestAnimationFrame(() => {\n      const output = this.shadowRoot.getElementById('log-output');\n      if (output) {\n        output.scrollTop = output.scrollHeight;\n      }\n    });\n  }\n\n  _downloadLogs() {\n    const content = this._logs\n      .map(log => `[${log.timestamp}] [${log.level.toUpperCase()}] ${log.message}`)\n      .join('\\n');\n\n    const blob = new Blob([content], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `loki-logs-${new Date().toISOString().split('T')[0]}.txt`;\n    a.click();\n    URL.revokeObjectURL(url);\n  }\n\n  _setFilter(filter) {\n    this._filter = filter.toLowerCase();\n    this._renderLogs();\n  }\n\n  _setLevelFilter(level) {\n    this._levelFilter = level;\n    this._renderLogs();\n  }\n\n  _getFilteredLogs() {\n    return this._logs.filter(log => {\n      // Level filter\n      if (this._levelFilter !== 'all' && log.level !== this._levelFilter) {\n        return false;\n      }\n\n      // Text filter\n      if (this._filter && !log.message.toLowerCase().includes(this._filter)) {\n        return false;\n      }\n\n      return true;\n    });\n  }\n\n  _renderLogs() {\n    const output = this.shadowRoot.getElementById('log-output');\n    if (!output) return;\n\n    const filteredLogs = this._getFilteredLogs();\n\n    if (filteredLogs.length === 0) {\n      output.innerHTML = '<div class=\"log-empty\">No log output yet. Terminal will update when Loki Mode is running.</div>';\n      return;\n    }\n\n    output.innerHTML = filteredLogs.map(log => {\n      const levelConfig = LOG_LEVELS[log.level] || LOG_LEVELS.info;\n      return `\n        <div class=\"log-line\">\n          <span class=\"timestamp\">${log.timestamp}</span>\n          <span class=\"level\" style=\"color: ${levelConfig.color}\">[${levelConfig.label}]</span>\n          <span class=\"message\">${this._escapeHtml(log.message)}</span>\n        </div>\n      `;\n    }).join('');\n\n    if (this._autoScroll) {\n      this._scrollToBottom();\n    }\n  }\n\n  _escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  render() {\n    const styles = `\n      <style>\n        :host {\n          display: block;\n          ${this.getBaseStyles()}\n        }\n\n        .terminal-container {\n          background: #1a1a1b;\n          border: 1px solid var(--loki-border);\n          border-radius: 10px;\n          overflow: hidden;\n        }\n\n        .terminal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 10px 14px;\n          background: #232325;\n          border-bottom: 1px solid var(--loki-border);\n        }\n\n        .terminal-title {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 12px;\n          font-weight: 600;\n          color: #a1a1a6;\n        }\n\n        .terminal-dots {\n          display: flex;\n          gap: 6px;\n        }\n\n        .terminal-dot {\n          width: 10px;\n          height: 10px;\n          border-radius: 50%;\n        }\n\n        .terminal-dot.red { background: #ff5f56; }\n        .terminal-dot.yellow { background: #ffbd2e; }\n        .terminal-dot.green { background: #27c93f; }\n\n        .terminal-controls {\n          display: flex;\n          gap: 8px;\n          align-items: center;\n        }\n\n        .terminal-btn {\n          padding: 4px 10px;\n          background: #2a2a2d;\n          border: 1px solid #3d3d42;\n          border-radius: 4px;\n          color: #a1a1a6;\n          font-size: 11px;\n          cursor: pointer;\n          transition: all var(--loki-transition);\n        }\n\n        .terminal-btn:hover {\n          background: #3d3d42;\n          color: #f5f5f5;\n        }\n\n        .terminal-btn.active {\n          background: var(--loki-accent);\n          border-color: var(--loki-accent);\n          color: white;\n        }\n\n        .filter-input {\n          padding: 4px 10px;\n          background: #2a2a2d;\n          border: 1px solid #3d3d42;\n          border-radius: 4px;\n          color: #f5f5f5;\n          font-size: 11px;\n          width: 120px;\n        }\n\n        .filter-input:focus {\n          outline: none;\n          border-color: var(--loki-accent);\n        }\n\n        .filter-input::placeholder {\n          color: #6b6b70;\n        }\n\n        .level-select {\n          padding: 4px 10px;\n          background: #2a2a2d;\n          border: 1px solid #3d3d42;\n          border-radius: 4px;\n          color: #a1a1a6;\n          font-size: 11px;\n          cursor: pointer;\n        }\n\n        .log-output {\n          padding: 14px;\n          max-height: 350px;\n          overflow-y: auto;\n          font-family: 'JetBrains Mono', monospace;\n          font-size: 12px;\n          line-height: 1.6;\n          color: #e5e5e5;\n          background: #1a1a1b;\n        }\n\n        .log-line {\n          display: flex;\n          gap: 10px;\n          white-space: pre-wrap;\n          word-break: break-all;\n        }\n\n        .log-line .timestamp {\n          color: #6b6b70;\n          flex-shrink: 0;\n        }\n\n        .log-line .level {\n          flex-shrink: 0;\n          font-weight: 500;\n        }\n\n        .log-line .message {\n          flex: 1;\n        }\n\n        .log-empty {\n          color: #6b6b70;\n          text-align: center;\n          padding: 40px;\n        }\n\n        .log-count {\n          font-size: 10px;\n          color: #6b6b70;\n          padding: 4px 14px;\n          border-top: 1px solid #2d2d30;\n          background: #1a1a1b;\n        }\n\n        /* Scrollbar */\n        .log-output::-webkit-scrollbar { width: 6px; }\n        .log-output::-webkit-scrollbar-track { background: #1a1a1b; }\n        .log-output::-webkit-scrollbar-thumb { background: #3d3d42; border-radius: 3px; }\n        .log-output::-webkit-scrollbar-thumb:hover { background: #505055; }\n      </style>\n    `;\n\n    this.shadowRoot.innerHTML = `\n      ${styles}\n      <div class=\"terminal-container\">\n        <div class=\"terminal-header\">\n          <div class=\"terminal-title\">\n            <div class=\"terminal-dots\">\n              <span class=\"terminal-dot red\"></span>\n              <span class=\"terminal-dot yellow\"></span>\n              <span class=\"terminal-dot green\"></span>\n            </div>\n            loki-mode -- agent output\n          </div>\n          <div class=\"terminal-controls\">\n            <input type=\"text\" class=\"filter-input\" id=\"filter-input\" placeholder=\"Filter logs...\">\n            <select class=\"level-select\" id=\"level-select\">\n              <option value=\"all\">All Levels</option>\n              <option value=\"info\">Info</option>\n              <option value=\"success\">Success</option>\n              <option value=\"warning\">Warning</option>\n              <option value=\"error\">Error</option>\n              <option value=\"step\">Step</option>\n              <option value=\"agent\">Agent</option>\n              <option value=\"debug\">Debug</option>\n            </select>\n            <button class=\"terminal-btn ${this._autoScroll ? 'active' : ''}\" id=\"auto-scroll-btn\" aria-label=\"Toggle auto-scroll\" aria-pressed=\"${this._autoScroll}\">Auto-scroll</button>\n            <button class=\"terminal-btn\" id=\"clear-btn\" aria-label=\"Clear all logs\">Clear</button>\n            <button class=\"terminal-btn\" id=\"download-btn\" aria-label=\"Download logs as text file\">Download</button>\n          </div>\n        </div>\n        <div class=\"log-output\" id=\"log-output\" role=\"log\" aria-live=\"polite\" aria-label=\"Log output\">\n          <div class=\"log-empty\">No log output yet. Terminal will update when Loki Mode is running.</div>\n        </div>\n        <div class=\"log-count\">\n          ${this._logs.length} lines (${this._getFilteredLogs().length} shown)\n        </div>\n      </div>\n    `;\n\n    this._attachEventListeners();\n    this._renderLogs();\n  }\n\n  _attachEventListeners() {\n    const filterInput = this.shadowRoot.getElementById('filter-input');\n    const levelSelect = this.shadowRoot.getElementById('level-select');\n    const autoScrollBtn = this.shadowRoot.getElementById('auto-scroll-btn');\n    const clearBtn = this.shadowRoot.getElementById('clear-btn');\n    const downloadBtn = this.shadowRoot.getElementById('download-btn');\n\n    if (filterInput) {\n      filterInput.value = this._filter;\n      filterInput.addEventListener('input', (e) => this._setFilter(e.target.value));\n    }\n\n    if (levelSelect) {\n      levelSelect.value = this._levelFilter;\n      levelSelect.addEventListener('change', (e) => this._setLevelFilter(e.target.value));\n    }\n\n    if (autoScrollBtn) {\n      autoScrollBtn.addEventListener('click', () => this._toggleAutoScroll());\n    }\n\n    if (clearBtn) {\n      clearBtn.addEventListener('click', () => this._clearLogs());\n    }\n\n    if (downloadBtn) {\n      downloadBtn.addEventListener('click', () => this._downloadLogs());\n    }\n  }\n\n  /**\n   * Public API to add a log entry programmatically\n   */\n  addLog(message, level = 'info') {\n    this._addLog({ message, level, timestamp: new Date().toLocaleTimeString() });\n  }\n\n  /**\n   * Public API to clear all logs\n   */\n  clear() {\n    this._clearLogs();\n  }\n}\n\n// Register the component\ncustomElements.define('loki-log-stream', LokiLogStream);\n\nexport default LokiLogStream;\n", "/**\n * Loki Memory Browser Component\n *\n * Browser for the Loki Mode memory system with episodic, semantic, and procedural memory.\n *\n * Usage:\n *   <loki-memory-browser\n *     api-url=\"http://localhost:8420\"\n *     theme=\"dark\"\n *   ></loki-memory-browser>\n *\n * Attributes:\n *   - api-url: API base URL (default: http://localhost:8420)\n *   - theme: 'light' or 'dark' (default: auto-detect)\n *   - tab: Initial tab ('summary' | 'episodes' | 'patterns' | 'skills')\n *\n * Events:\n *   - episode-select: Fired when an episode is selected\n *   - pattern-select: Fired when a pattern is selected\n *   - skill-select: Fired when a skill is selected\n */\n\nimport { LokiElement } from '../core/loki-theme.js';\nimport { getApiClient } from '../core/loki-api-client.js';\n\nconst TABS = [\n  { id: 'summary', label: 'Summary', icon: 'M4 6h16M4 12h16M4 18h16' },\n  { id: 'episodes', label: 'Episodes', icon: 'M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z' },\n  { id: 'patterns', label: 'Patterns', icon: 'M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z' },\n  { id: 'skills', label: 'Skills', icon: 'M13 10V3L4 14h7v7l9-11h-7z' },\n];\n\nexport class LokiMemoryBrowser extends LokiElement {\n  static get observedAttributes() {\n    return ['api-url', 'theme', 'tab'];\n  }\n\n  constructor() {\n    super();\n    this._activeTab = 'summary';\n    this._loading = false;\n    this._error = null;\n    this._api = null;\n\n    // Data\n    this._summary = null;\n    this._episodes = [];\n    this._patterns = [];\n    this._skills = [];\n    this._tokenEconomics = null;\n    this._selectedItem = null;\n    this._lastFocusedElement = null;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._activeTab = this.getAttribute('tab') || 'summary';\n    this._setupApi();\n    this._loadData();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'api-url':\n        if (this._api) {\n          this._api.baseUrl = newValue;\n          this._loadData();\n        }\n        break;\n      case 'theme':\n        this._applyTheme();\n        break;\n      case 'tab':\n        this._setTab(newValue);\n        break;\n    }\n  }\n\n  _setupApi() {\n    const apiUrl = this.getAttribute('api-url') || 'http://localhost:8420';\n    this._api = getApiClient({ baseUrl: apiUrl });\n  }\n\n  async _loadData() {\n    this._loading = true;\n    this._error = null;\n    this.render();\n\n    try {\n      // Load summary first\n      this._summary = await this._api.getMemorySummary().catch(() => null);\n      this._tokenEconomics = await this._api.getTokenEconomics().catch(() => null);\n\n      // Load tab-specific data\n      await this._loadTabData();\n    } catch (error) {\n      this._error = error.message || 'Failed to load memory data';\n    }\n\n    this._loading = false;\n    this.render();\n  }\n\n  async _loadTabData() {\n    switch (this._activeTab) {\n      case 'episodes':\n        this._episodes = await this._api.listEpisodes({ limit: 50 }).catch(() => []);\n        break;\n      case 'patterns':\n        this._patterns = await this._api.listPatterns().catch(() => []);\n        break;\n      case 'skills':\n        this._skills = await this._api.listSkills().catch(() => []);\n        break;\n    }\n  }\n\n  _setTab(tab) {\n    if (this._activeTab === tab) return;\n\n    this._activeTab = tab;\n    this._selectedItem = null;\n    this._loadTabData().then(() => this.render());\n  }\n\n  async _selectEpisode(episodeId) {\n    try {\n      this._lastFocusedElement = this.shadowRoot.activeElement;\n      this._selectedItem = await this._api.getEpisode(episodeId);\n      this.dispatchEvent(new CustomEvent('episode-select', { detail: this._selectedItem }));\n      this.render();\n      this._focusDetailPanel();\n    } catch (error) {\n      console.error('Failed to load episode:', error);\n    }\n  }\n\n  async _selectPattern(patternId) {\n    try {\n      this._lastFocusedElement = this.shadowRoot.activeElement;\n      this._selectedItem = await this._api.getPattern(patternId);\n      this.dispatchEvent(new CustomEvent('pattern-select', { detail: this._selectedItem }));\n      this.render();\n      this._focusDetailPanel();\n    } catch (error) {\n      console.error('Failed to load pattern:', error);\n    }\n  }\n\n  async _selectSkill(skillId) {\n    try {\n      this._lastFocusedElement = this.shadowRoot.activeElement;\n      this._selectedItem = await this._api.getSkill(skillId);\n      this.dispatchEvent(new CustomEvent('skill-select', { detail: this._selectedItem }));\n      this.render();\n      this._focusDetailPanel();\n    } catch (error) {\n      console.error('Failed to load skill:', error);\n    }\n  }\n\n  _focusDetailPanel() {\n    requestAnimationFrame(() => {\n      const closeBtn = this.shadowRoot.getElementById('close-detail');\n      if (closeBtn) {\n        closeBtn.focus();\n      }\n    });\n  }\n\n  _closeDetail() {\n    this._selectedItem = null;\n    this.render();\n    // Return focus to last focused element\n    if (this._lastFocusedElement) {\n      requestAnimationFrame(() => {\n        this._lastFocusedElement.focus();\n        this._lastFocusedElement = null;\n      });\n    }\n  }\n\n  async _triggerConsolidation() {\n    try {\n      const result = await this._api.consolidateMemory(24);\n      alert(`Consolidation complete:\\n- Patterns created: ${result.patternsCreated}\\n- Patterns merged: ${result.patternsMerged}\\n- Episodes processed: ${result.episodesProcessed}`);\n      this._loadData();\n    } catch (error) {\n      alert('Consolidation failed: ' + error.message);\n    }\n  }\n\n  _renderSummary() {\n    if (!this._summary) {\n      return '<div class=\"empty-state\">No memory data available</div>';\n    }\n\n    const { episodic, semantic, procedural, tokenEconomics } = this._summary;\n\n    return `\n      <div class=\"summary-grid\">\n        <div class=\"summary-card\">\n          <div class=\"summary-card-header\">\n            <span class=\"summary-card-title\">Episodic Memory</span>\n            <span class=\"summary-card-count\">${episodic?.count || 0}</span>\n          </div>\n          <div class=\"summary-card-detail\">\n            Specific interaction traces and outcomes\n          </div>\n          ${episodic?.latestDate ? `<div class=\"summary-card-meta\">Latest: ${new Date(episodic.latestDate).toLocaleDateString()}</div>` : ''}\n          <div class=\"memory-bar\">\n            <div class=\"memory-bar-fill episodic\" style=\"width: ${Math.min((episodic?.count || 0) / 100 * 100, 100)}%\"></div>\n          </div>\n        </div>\n\n        <div class=\"summary-card\">\n          <div class=\"summary-card-header\">\n            <span class=\"summary-card-title\">Semantic Memory</span>\n            <span class=\"summary-card-count\">${semantic?.patterns || 0}</span>\n          </div>\n          <div class=\"summary-card-detail\">\n            Generalized patterns and anti-patterns\n          </div>\n          <div class=\"summary-card-meta\">Anti-patterns: ${semantic?.antiPatterns || 0}</div>\n          <div class=\"memory-bar\">\n            <div class=\"memory-bar-fill semantic\" style=\"width: ${Math.min((semantic?.patterns || 0) / 100 * 100, 100)}%\"></div>\n          </div>\n        </div>\n\n        <div class=\"summary-card\">\n          <div class=\"summary-card-header\">\n            <span class=\"summary-card-title\">Procedural Memory</span>\n            <span class=\"summary-card-count\">${procedural?.skills || 0}</span>\n          </div>\n          <div class=\"summary-card-detail\">\n            Learned skills and procedures\n          </div>\n          <div class=\"memory-bar\">\n            <div class=\"memory-bar-fill procedural\" style=\"width: ${Math.min((procedural?.skills || 0) / 100 * 100, 100)}%\"></div>\n          </div>\n        </div>\n\n        ${this._tokenEconomics ? `\n          <div class=\"summary-card token-economics\">\n            <div class=\"summary-card-header\">\n              <span class=\"summary-card-title\">Token Economics</span>\n            </div>\n            <div class=\"economics-stats\">\n              <div class=\"econ-stat\">\n                <span class=\"econ-label\">Discovery</span>\n                <span class=\"econ-value\">${this._tokenEconomics.discoveryTokens?.toLocaleString() || 0}</span>\n              </div>\n              <div class=\"econ-stat\">\n                <span class=\"econ-label\">Read</span>\n                <span class=\"econ-value\">${this._tokenEconomics.readTokens?.toLocaleString() || 0}</span>\n              </div>\n              <div class=\"econ-stat\">\n                <span class=\"econ-label\">Savings</span>\n                <span class=\"econ-value savings\">${(this._tokenEconomics.savingsPercent || 0).toFixed(1)}%</span>\n              </div>\n            </div>\n          </div>\n        ` : ''}\n      </div>\n\n      <div class=\"summary-actions\">\n        <button class=\"btn btn-secondary\" id=\"consolidate-btn\">\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\">\n            <polyline points=\"23 4 23 10 17 10\"/>\n            <polyline points=\"1 20 1 14 7 14\"/>\n            <path d=\"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15\"/>\n          </svg>\n          Consolidate Memory\n        </button>\n        <button class=\"btn btn-secondary\" id=\"refresh-btn\">\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\">\n            <polyline points=\"23 4 23 10 17 10\"/>\n            <path d=\"M20.49 15a9 9 0 11-2.12-9.36L23 10\"/>\n          </svg>\n          Refresh\n        </button>\n      </div>\n    `;\n  }\n\n  _renderEpisodes() {\n    if (this._episodes.length === 0) {\n      return '<div class=\"empty-state\">No episodes recorded yet</div>';\n    }\n\n    return `\n      <div class=\"item-list\" role=\"list\" aria-label=\"Episodes list\">\n        ${this._episodes.map(ep => `\n          <div class=\"item-card\" data-id=\"${ep.id}\" data-type=\"episode\" tabindex=\"0\" role=\"listitem\" aria-label=\"Episode ${ep.id}: ${this._escapeHtml(ep.taskId || 'Task')}, outcome ${ep.outcome || 'unknown'}\">\n            <div class=\"item-header\">\n              <span class=\"item-id mono\">${ep.id}</span>\n              <span class=\"item-outcome ${ep.outcome?.toLowerCase()}\">${ep.outcome || 'unknown'}</span>\n            </div>\n            <div class=\"item-title\">${this._escapeHtml(ep.taskId || 'Task')}</div>\n            <div class=\"item-meta\">\n              <span>${ep.agent || 'unknown agent'}</span>\n              <span>${ep.phase || 'unknown phase'}</span>\n              <span>${new Date(ep.timestamp).toLocaleString()}</span>\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  _renderPatterns() {\n    if (this._patterns.length === 0) {\n      return '<div class=\"empty-state\">No patterns discovered yet</div>';\n    }\n\n    return `\n      <div class=\"item-list\" role=\"list\" aria-label=\"Patterns list\">\n        ${this._patterns.map(pat => `\n          <div class=\"item-card\" data-id=\"${pat.id}\" data-type=\"pattern\" tabindex=\"0\" role=\"listitem\" aria-label=\"Pattern: ${this._escapeHtml(pat.pattern)}, ${(pat.confidence * 100).toFixed(0)} percent confidence\">\n            <div class=\"item-header\">\n              <span class=\"item-category\">${pat.category || 'general'}</span>\n              <span class=\"confidence-badge\">${(pat.confidence * 100).toFixed(0)}%</span>\n            </div>\n            <div class=\"item-title\">${this._escapeHtml(pat.pattern)}</div>\n            <div class=\"item-meta\">\n              <span>Used ${pat.usageCount || 0} times</span>\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  _renderSkills() {\n    if (this._skills.length === 0) {\n      return '<div class=\"empty-state\">No skills learned yet</div>';\n    }\n\n    return `\n      <div class=\"item-list\" role=\"list\" aria-label=\"Skills list\">\n        ${this._skills.map(skill => `\n          <div class=\"item-card\" data-id=\"${skill.id}\" data-type=\"skill\" tabindex=\"0\" role=\"listitem\" aria-label=\"Skill: ${this._escapeHtml(skill.name)}\">\n            <div class=\"item-header\">\n              <span class=\"item-id mono\">${skill.id}</span>\n            </div>\n            <div class=\"item-title\">${this._escapeHtml(skill.name)}</div>\n            <div class=\"item-description\">${this._escapeHtml(skill.description || '')}</div>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  _renderDetail() {\n    if (!this._selectedItem) return '';\n\n    const item = this._selectedItem;\n\n    // Determine type and render accordingly\n    if (item.actionLog !== undefined) {\n      // Episode detail\n      return `\n        <div class=\"detail-panel\">\n          <div class=\"detail-header\">\n            <h3>Episode: ${item.id}</h3>\n            <button class=\"close-btn\" id=\"close-detail\">&times;</button>\n          </div>\n          <div class=\"detail-body\">\n            <div class=\"detail-row\">\n              <span class=\"detail-label\">Task</span>\n              <span class=\"detail-value\">${item.taskId || '--'}</span>\n            </div>\n            <div class=\"detail-row\">\n              <span class=\"detail-label\">Agent</span>\n              <span class=\"detail-value\">${item.agent || '--'}</span>\n            </div>\n            <div class=\"detail-row\">\n              <span class=\"detail-label\">Phase</span>\n              <span class=\"detail-value\">${item.phase || '--'}</span>\n            </div>\n            <div class=\"detail-row\">\n              <span class=\"detail-label\">Outcome</span>\n              <span class=\"detail-value outcome ${item.outcome?.toLowerCase()}\">${item.outcome || '--'}</span>\n            </div>\n            <div class=\"detail-row\">\n              <span class=\"detail-label\">Duration</span>\n              <span class=\"detail-value\">${item.durationSeconds || 0}s</span>\n            </div>\n            <div class=\"detail-row\">\n              <span class=\"detail-label\">Tokens Used</span>\n              <span class=\"detail-value\">${item.tokensUsed?.toLocaleString() || 0}</span>\n            </div>\n            ${item.goal ? `\n              <div class=\"detail-section\">\n                <div class=\"detail-label\">Goal</div>\n                <div class=\"detail-content\">${this._escapeHtml(item.goal)}</div>\n              </div>\n            ` : ''}\n            ${item.actionLog?.length ? `\n              <div class=\"detail-section\">\n                <div class=\"detail-label\">Action Log (${item.actionLog.length})</div>\n                <div class=\"action-log\">\n                  ${item.actionLog.map(a => `\n                    <div class=\"action-entry\">\n                      <span class=\"action-time\">+${a.t}s</span>\n                      <span class=\"action-type\">${a.action}</span>\n                      <span class=\"action-target\">${this._escapeHtml(a.target)}</span>\n                    </div>\n                  `).join('')}\n                </div>\n              </div>\n            ` : ''}\n          </div>\n        </div>\n      `;\n    } else if (item.conditions !== undefined) {\n      // Pattern detail\n      return `\n        <div class=\"detail-panel\">\n          <div class=\"detail-header\">\n            <h3>Pattern: ${item.id}</h3>\n            <button class=\"close-btn\" id=\"close-detail\">&times;</button>\n          </div>\n          <div class=\"detail-body\">\n            <div class=\"detail-row\">\n              <span class=\"detail-label\">Category</span>\n              <span class=\"detail-value\">${item.category || 'general'}</span>\n            </div>\n            <div class=\"detail-row\">\n              <span class=\"detail-label\">Confidence</span>\n              <span class=\"detail-value\">${(item.confidence * 100).toFixed(0)}%</span>\n            </div>\n            <div class=\"detail-row\">\n              <span class=\"detail-label\">Usage Count</span>\n              <span class=\"detail-value\">${item.usageCount || 0}</span>\n            </div>\n            <div class=\"detail-section\">\n              <div class=\"detail-label\">Pattern</div>\n              <div class=\"detail-content\">${this._escapeHtml(item.pattern)}</div>\n            </div>\n            ${item.conditions?.length ? `\n              <div class=\"detail-section\">\n                <div class=\"detail-label\">Conditions</div>\n                <ul class=\"detail-list\">\n                  ${item.conditions.map(c => `<li>${this._escapeHtml(c)}</li>`).join('')}\n                </ul>\n              </div>\n            ` : ''}\n            ${item.correctApproach ? `\n              <div class=\"detail-section\">\n                <div class=\"detail-label\">Correct Approach</div>\n                <div class=\"detail-content success\">${this._escapeHtml(item.correctApproach)}</div>\n              </div>\n            ` : ''}\n            ${item.incorrectApproach ? `\n              <div class=\"detail-section\">\n                <div class=\"detail-label\">Incorrect Approach</div>\n                <div class=\"detail-content error\">${this._escapeHtml(item.incorrectApproach)}</div>\n              </div>\n            ` : ''}\n          </div>\n        </div>\n      `;\n    } else if (item.steps !== undefined) {\n      // Skill detail\n      return `\n        <div class=\"detail-panel\">\n          <div class=\"detail-header\">\n            <h3>Skill: ${item.name}</h3>\n            <button class=\"close-btn\" id=\"close-detail\">&times;</button>\n          </div>\n          <div class=\"detail-body\">\n            <div class=\"detail-section\">\n              <div class=\"detail-label\">Description</div>\n              <div class=\"detail-content\">${this._escapeHtml(item.description)}</div>\n            </div>\n            ${item.prerequisites?.length ? `\n              <div class=\"detail-section\">\n                <div class=\"detail-label\">Prerequisites</div>\n                <ul class=\"detail-list\">\n                  ${item.prerequisites.map(p => `<li>${this._escapeHtml(p)}</li>`).join('')}\n                </ul>\n              </div>\n            ` : ''}\n            ${item.steps?.length ? `\n              <div class=\"detail-section\">\n                <div class=\"detail-label\">Steps</div>\n                <ol class=\"detail-list numbered\">\n                  ${item.steps.map(s => `<li>${this._escapeHtml(s)}</li>`).join('')}\n                </ol>\n              </div>\n            ` : ''}\n            ${item.exitCriteria?.length ? `\n              <div class=\"detail-section\">\n                <div class=\"detail-label\">Exit Criteria</div>\n                <ul class=\"detail-list\">\n                  ${item.exitCriteria.map(e => `<li>${this._escapeHtml(e)}</li>`).join('')}\n                </ul>\n              </div>\n            ` : ''}\n          </div>\n        </div>\n      `;\n    }\n\n    return '';\n  }\n\n  _escapeHtml(text) {\n    if (!text) return '';\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  render() {\n    const styles = `\n      <style>\n        :host {\n          display: block;\n          ${this.getBaseStyles()}\n        }\n\n        .memory-browser {\n          background: var(--loki-bg-card);\n          border: 1px solid var(--loki-border);\n          border-radius: 10px;\n          overflow: hidden;\n        }\n\n        .browser-header {\n          padding: 12px 16px;\n          border-bottom: 1px solid var(--loki-border);\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .browser-title {\n          font-size: 14px;\n          font-weight: 600;\n          color: var(--loki-text-primary);\n        }\n\n        .tabs {\n          display: flex;\n          border-bottom: 1px solid var(--loki-border);\n          background: var(--loki-bg-secondary);\n        }\n\n        .tab {\n          padding: 10px 16px;\n          font-size: 12px;\n          font-weight: 500;\n          color: var(--loki-text-secondary);\n          cursor: pointer;\n          border: none;\n          background: none;\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          transition: all var(--loki-transition);\n          border-bottom: 2px solid transparent;\n          margin-bottom: -1px;\n        }\n\n        .tab:hover {\n          color: var(--loki-text-primary);\n          background: var(--loki-bg-hover);\n        }\n\n        .tab.active {\n          color: var(--loki-accent);\n          border-bottom-color: var(--loki-accent);\n        }\n\n        .tab svg {\n          width: 14px;\n          height: 14px;\n          stroke: currentColor;\n          stroke-width: 2;\n          fill: none;\n        }\n\n        .browser-content {\n          padding: 16px;\n          min-height: 300px;\n          max-height: 500px;\n          overflow-y: auto;\n          display: flex;\n        }\n\n        .content-main {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .loading, .error-state {\n          text-align: center;\n          padding: 40px;\n          color: var(--loki-text-muted);\n        }\n\n        .error-state {\n          color: var(--loki-red);\n        }\n\n        /* Summary styles */\n        .summary-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 12px;\n        }\n\n        .summary-card {\n          background: var(--loki-bg-secondary);\n          border-radius: 8px;\n          padding: 14px;\n        }\n\n        .summary-card-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 8px;\n        }\n\n        .summary-card-title {\n          font-size: 12px;\n          font-weight: 600;\n          color: var(--loki-text-primary);\n        }\n\n        .summary-card-count {\n          font-size: 18px;\n          font-weight: 600;\n          font-family: 'JetBrains Mono', monospace;\n          color: var(--loki-accent);\n        }\n\n        .summary-card-detail {\n          font-size: 11px;\n          color: var(--loki-text-muted);\n          margin-bottom: 8px;\n        }\n\n        .summary-card-meta {\n          font-size: 10px;\n          color: var(--loki-text-secondary);\n          margin-bottom: 8px;\n        }\n\n        .memory-bar {\n          height: 4px;\n          background: var(--loki-bg-tertiary);\n          border-radius: 2px;\n          overflow: hidden;\n        }\n\n        .memory-bar-fill {\n          height: 100%;\n          border-radius: 2px;\n          transition: width 0.3s ease;\n        }\n\n        .memory-bar-fill.episodic { background: var(--loki-blue); }\n        .memory-bar-fill.semantic { background: var(--loki-purple); }\n        .memory-bar-fill.procedural { background: var(--loki-green); }\n\n        .token-economics .economics-stats {\n          display: flex;\n          gap: 16px;\n          margin-top: 8px;\n        }\n\n        .econ-stat {\n          text-align: center;\n        }\n\n        .econ-label {\n          font-size: 10px;\n          color: var(--loki-text-muted);\n          display: block;\n        }\n\n        .econ-value {\n          font-size: 14px;\n          font-weight: 600;\n          font-family: 'JetBrains Mono', monospace;\n          color: var(--loki-text-primary);\n        }\n\n        .econ-value.savings {\n          color: var(--loki-green);\n        }\n\n        .summary-actions {\n          display: flex;\n          gap: 8px;\n          margin-top: 16px;\n        }\n\n        /* Item list styles */\n        .item-list {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n\n        .item-card {\n          background: var(--loki-bg-secondary);\n          border: 1px solid var(--loki-border);\n          border-radius: 6px;\n          padding: 12px;\n          cursor: pointer;\n          transition: all var(--loki-transition);\n        }\n\n        .item-card:hover {\n          border-color: var(--loki-border-light);\n          transform: translateX(2px);\n        }\n\n        .item-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 6px;\n        }\n\n        .item-id {\n          font-size: 10px;\n          color: var(--loki-accent);\n        }\n\n        .item-category {\n          font-size: 10px;\n          padding: 2px 6px;\n          background: var(--loki-bg-tertiary);\n          border-radius: 3px;\n          color: var(--loki-text-secondary);\n        }\n\n        .item-outcome {\n          font-size: 9px;\n          padding: 2px 6px;\n          border-radius: 3px;\n          text-transform: uppercase;\n          font-weight: 500;\n        }\n\n        .item-outcome.success { background: var(--loki-green-muted); color: var(--loki-green); }\n        .item-outcome.failure { background: var(--loki-red-muted); color: var(--loki-red); }\n        .item-outcome.partial { background: var(--loki-yellow-muted); color: var(--loki-yellow); }\n\n        .confidence-badge {\n          font-size: 10px;\n          font-weight: 500;\n          color: var(--loki-blue);\n        }\n\n        .item-title {\n          font-size: 12px;\n          font-weight: 500;\n          color: var(--loki-text-primary);\n          margin-bottom: 4px;\n        }\n\n        .item-description {\n          font-size: 11px;\n          color: var(--loki-text-secondary);\n          margin-bottom: 4px;\n        }\n\n        .item-meta {\n          display: flex;\n          gap: 12px;\n          font-size: 10px;\n          color: var(--loki-text-muted);\n        }\n\n        /* Detail panel */\n        .detail-panel {\n          width: 300px;\n          min-width: 300px;\n          background: var(--loki-bg-secondary);\n          border-left: 1px solid var(--loki-border);\n          margin: -16px -16px -16px 16px;\n          padding: 16px;\n          overflow-y: auto;\n        }\n\n        .detail-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 16px;\n        }\n\n        .detail-header h3 {\n          font-size: 14px;\n          font-weight: 600;\n          color: var(--loki-text-primary);\n        }\n\n        .close-btn {\n          background: none;\n          border: none;\n          font-size: 20px;\n          color: var(--loki-text-muted);\n          cursor: pointer;\n          padding: 0;\n          line-height: 1;\n        }\n\n        .close-btn:hover {\n          color: var(--loki-text-primary);\n        }\n\n        .detail-row {\n          display: flex;\n          justify-content: space-between;\n          padding: 6px 0;\n          border-bottom: 1px solid var(--loki-border);\n          font-size: 12px;\n        }\n\n        .detail-label {\n          color: var(--loki-text-secondary);\n          font-weight: 500;\n          font-size: 11px;\n          margin-bottom: 6px;\n        }\n\n        .detail-value {\n          color: var(--loki-text-primary);\n        }\n\n        .detail-value.outcome.success { color: var(--loki-green); }\n        .detail-value.outcome.failure { color: var(--loki-red); }\n\n        .detail-section {\n          margin-top: 16px;\n        }\n\n        .detail-content {\n          background: var(--loki-bg-tertiary);\n          padding: 10px;\n          border-radius: 6px;\n          font-size: 12px;\n          color: var(--loki-text-primary);\n        }\n\n        .detail-content.success {\n          border-left: 3px solid var(--loki-green);\n        }\n\n        .detail-content.error {\n          border-left: 3px solid var(--loki-red);\n        }\n\n        .detail-list {\n          padding-left: 20px;\n          font-size: 12px;\n          color: var(--loki-text-primary);\n        }\n\n        .detail-list li {\n          margin-bottom: 4px;\n        }\n\n        .action-log {\n          background: var(--loki-bg-tertiary);\n          border-radius: 6px;\n          padding: 8px;\n          max-height: 200px;\n          overflow-y: auto;\n        }\n\n        .action-entry {\n          display: flex;\n          gap: 8px;\n          font-size: 11px;\n          padding: 4px 0;\n          border-bottom: 1px solid var(--loki-border);\n        }\n\n        .action-entry:last-child {\n          border-bottom: none;\n        }\n\n        .action-time {\n          color: var(--loki-text-muted);\n          font-family: 'JetBrains Mono', monospace;\n        }\n\n        .action-type {\n          color: var(--loki-blue);\n          font-weight: 500;\n        }\n\n        .action-target {\n          color: var(--loki-text-secondary);\n          flex: 1;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n\n        .empty-state {\n          text-align: center;\n          padding: 40px;\n          color: var(--loki-text-muted);\n          font-size: 12px;\n        }\n      </style>\n    `;\n\n    let content;\n    if (this._loading) {\n      content = '<div class=\"loading\">Loading memory data...</div>';\n    } else if (this._error) {\n      content = `<div class=\"error-state\">Error: ${this._error}</div>`;\n    } else {\n      let tabContent;\n      switch (this._activeTab) {\n        case 'summary':\n          tabContent = this._renderSummary();\n          break;\n        case 'episodes':\n          tabContent = this._renderEpisodes();\n          break;\n        case 'patterns':\n          tabContent = this._renderPatterns();\n          break;\n        case 'skills':\n          tabContent = this._renderSkills();\n          break;\n        default:\n          tabContent = this._renderSummary();\n      }\n\n      content = `\n        <div class=\"content-main\">${tabContent}</div>\n        ${this._renderDetail()}\n      `;\n    }\n\n    this.shadowRoot.innerHTML = `\n      ${styles}\n      <div class=\"memory-browser\">\n        <div class=\"browser-header\">\n          <span class=\"browser-title\">Memory System</span>\n        </div>\n        <div class=\"tabs\" role=\"tablist\" aria-label=\"Memory browser sections\">\n          ${TABS.map((tab, index) => `\n            <button class=\"tab ${this._activeTab === tab.id ? 'active' : ''}\"\n                    data-tab=\"${tab.id}\"\n                    role=\"tab\"\n                    id=\"tab-${tab.id}\"\n                    aria-selected=\"${this._activeTab === tab.id}\"\n                    aria-controls=\"tabpanel-${tab.id}\"\n                    tabindex=\"${this._activeTab === tab.id ? '0' : '-1'}\">\n              <svg viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"${tab.icon}\"/></svg>\n              ${tab.label}\n            </button>\n          `).join('')}\n        </div>\n        <div class=\"browser-content\" role=\"tabpanel\" id=\"tabpanel-${this._activeTab}\" aria-labelledby=\"tab-${this._activeTab}\">\n          ${content}\n        </div>\n      </div>\n    `;\n\n    this._attachEventListeners();\n  }\n\n  _attachEventListeners() {\n    // Tab buttons with keyboard navigation\n    const tabs = this.shadowRoot.querySelectorAll('.tab');\n    tabs.forEach((tab, index) => {\n      tab.addEventListener('click', () => this._setTab(tab.dataset.tab));\n      tab.addEventListener('keydown', (e) => {\n        if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {\n          e.preventDefault();\n          const tabsArray = Array.from(tabs);\n          const targetIndex = e.key === 'ArrowRight'\n            ? (index + 1) % tabsArray.length\n            : (index - 1 + tabsArray.length) % tabsArray.length;\n          tabsArray[targetIndex].focus();\n          this._setTab(tabsArray[targetIndex].dataset.tab);\n        }\n      });\n    });\n\n    // Item cards with keyboard navigation\n    this.shadowRoot.querySelectorAll('.item-card').forEach(card => {\n      card.addEventListener('click', () => this._handleItemClick(card));\n      card.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          this._handleItemClick(card);\n        } else if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n          e.preventDefault();\n          this._navigateItemCards(card, e.key === 'ArrowDown' ? 'next' : 'prev');\n        }\n      });\n    });\n  }\n\n  _handleItemClick(card) {\n    const id = card.dataset.id;\n    const type = card.dataset.type;\n\n    switch (type) {\n      case 'episode':\n        this._selectEpisode(id);\n        break;\n      case 'pattern':\n        this._selectPattern(id);\n        break;\n      case 'skill':\n        this._selectSkill(id);\n        break;\n    }\n  }\n\n  _navigateItemCards(currentCard, direction) {\n    const cards = Array.from(this.shadowRoot.querySelectorAll('.item-card'));\n    const currentIndex = cards.indexOf(currentCard);\n    if (currentIndex === -1) return;\n\n    const targetIndex = direction === 'next' ? currentIndex + 1 : currentIndex - 1;\n    if (targetIndex >= 0 && targetIndex < cards.length) {\n      cards[targetIndex].focus();\n    }\n\n    // Close detail button\n    const closeBtn = this.shadowRoot.getElementById('close-detail');\n    if (closeBtn) {\n      closeBtn.addEventListener('click', () => this._closeDetail());\n    }\n\n    // Consolidate button\n    const consolidateBtn = this.shadowRoot.getElementById('consolidate-btn');\n    if (consolidateBtn) {\n      consolidateBtn.addEventListener('click', () => this._triggerConsolidation());\n    }\n\n    // Refresh button\n    const refreshBtn = this.shadowRoot.getElementById('refresh-btn');\n    if (refreshBtn) {\n      refreshBtn.addEventListener('click', () => this._loadData());\n    }\n  }\n}\n\n// Register the component\ncustomElements.define('loki-memory-browser', LokiMemoryBrowser);\n\nexport default LokiMemoryBrowser;\n", "/**\n * Loki Learning Dashboard Component\n *\n * Dashboard for visualizing learning metrics from the cross-tool learning system.\n *\n * Usage:\n *   <loki-learning-dashboard\n *     api-url=\"http://localhost:8420\"\n *     theme=\"dark\"\n *   ></loki-learning-dashboard>\n *\n * Attributes:\n *   - api-url: API base URL (default: http://localhost:8420)\n *   - theme: 'light' or 'dark' (default: auto-detect)\n *   - time-range: Filter by time range ('1h', '24h', '7d', '30d') (default: '7d')\n *   - signal-type: Filter by signal type (default: 'all')\n *\n * Events:\n *   - metric-select: Fired when a metric item is selected\n *   - filter-change: Fired when filters are changed\n *\n * @version 1.0.0\n */\n\nimport { LokiElement } from '../core/loki-theme.js';\nimport { getApiClient } from '../core/loki-api-client.js';\n\nconst TIME_RANGES = [\n  { id: '1h', label: '1 Hour', hours: 1 },\n  { id: '24h', label: '24 Hours', hours: 24 },\n  { id: '7d', label: '7 Days', hours: 168 },\n  { id: '30d', label: '30 Days', hours: 720 },\n];\n\nconst SIGNAL_TYPES = [\n  { id: 'all', label: 'All Signals' },\n  { id: 'user_preference', label: 'User Preferences' },\n  { id: 'error_pattern', label: 'Error Patterns' },\n  { id: 'success_pattern', label: 'Success Patterns' },\n  { id: 'tool_efficiency', label: 'Tool Efficiency' },\n  { id: 'context_relevance', label: 'Context Relevance' },\n];\n\nconst SIGNAL_SOURCES = [\n  { id: 'all', label: 'All Sources' },\n  { id: 'cli', label: 'CLI' },\n  { id: 'api', label: 'API' },\n  { id: 'vscode', label: 'VS Code' },\n  { id: 'mcp', label: 'MCP' },\n  { id: 'dashboard', label: 'Dashboard' },\n];\n\nexport class LokiLearningDashboard extends LokiElement {\n  static get observedAttributes() {\n    return ['api-url', 'theme', 'time-range', 'signal-type', 'source'];\n  }\n\n  constructor() {\n    super();\n    this._loading = false;\n    this._error = null;\n    this._api = null;\n\n    // Filters\n    this._timeRange = '7d';\n    this._signalType = 'all';\n    this._source = 'all';\n\n    // Data\n    this._metrics = null;\n    this._trends = null;\n    this._signals = [];\n    this._selectedMetric = null;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._timeRange = this.getAttribute('time-range') || '7d';\n    this._signalType = this.getAttribute('signal-type') || 'all';\n    this._source = this.getAttribute('source') || 'all';\n    this._setupApi();\n    this._loadData();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'api-url':\n        if (this._api) {\n          this._api.baseUrl = newValue;\n          this._loadData();\n        }\n        break;\n      case 'theme':\n        this._applyTheme();\n        break;\n      case 'time-range':\n        this._timeRange = newValue;\n        this._loadData();\n        break;\n      case 'signal-type':\n        this._signalType = newValue;\n        this._loadData();\n        break;\n      case 'source':\n        this._source = newValue;\n        this._loadData();\n        break;\n    }\n  }\n\n  _setupApi() {\n    const apiUrl = this.getAttribute('api-url') || 'http://localhost:8420';\n    this._api = getApiClient({ baseUrl: apiUrl });\n  }\n\n  async _loadData() {\n    this._loading = true;\n    this._error = null;\n    this.render();\n\n    try {\n      const params = {\n        timeRange: this._timeRange,\n        signalType: this._signalType !== 'all' ? this._signalType : undefined,\n        source: this._source !== 'all' ? this._source : undefined,\n      };\n\n      // Load metrics and trends in parallel\n      const [metricsRes, trendsRes, signalsRes] = await Promise.all([\n        this._api.getLearningMetrics(params).catch(() => null),\n        this._api.getLearningTrends(params).catch(() => null),\n        this._api.getLearningSignals({ ...params, limit: 50 }).catch(() => []),\n      ]);\n\n      this._metrics = metricsRes;\n      this._trends = trendsRes;\n      this._signals = signalsRes || [];\n    } catch (error) {\n      this._error = error.message || 'Failed to load learning data';\n    }\n\n    this._loading = false;\n    this.render();\n  }\n\n  _setFilter(filterType, value) {\n    switch (filterType) {\n      case 'timeRange':\n        this._timeRange = value;\n        this.setAttribute('time-range', value);\n        break;\n      case 'signalType':\n        this._signalType = value;\n        this.setAttribute('signal-type', value);\n        break;\n      case 'source':\n        this._source = value;\n        this.setAttribute('source', value);\n        break;\n    }\n\n    this.dispatchEvent(new CustomEvent('filter-change', {\n      detail: {\n        timeRange: this._timeRange,\n        signalType: this._signalType,\n        source: this._source,\n      },\n    }));\n\n    this._loadData();\n  }\n\n  _selectMetric(type, item) {\n    this._selectedMetric = { type, item };\n    this.dispatchEvent(new CustomEvent('metric-select', { detail: { type, item } }));\n    this.render();\n  }\n\n  _closeDetail() {\n    this._selectedMetric = null;\n    this.render();\n  }\n\n  _formatNumber(num) {\n    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';\n    if (num >= 1000) return (num / 1000).toFixed(1) + 'K';\n    return num?.toString() || '0';\n  }\n\n  _formatPercent(num) {\n    return (num * 100).toFixed(1) + '%';\n  }\n\n  _formatDuration(seconds) {\n    if (seconds < 60) return seconds.toFixed(0) + 's';\n    if (seconds < 3600) return (seconds / 60).toFixed(1) + 'm';\n    return (seconds / 3600).toFixed(1) + 'h';\n  }\n\n  _escapeHtml(text) {\n    if (!text) return '';\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  _renderFilters() {\n    return `\n      <div class=\"filters\">\n        <div class=\"filter-group\">\n          <label>Time Range</label>\n          <select id=\"time-range-select\" class=\"filter-select\">\n            ${TIME_RANGES.map(t => `\n              <option value=\"${t.id}\" ${this._timeRange === t.id ? 'selected' : ''}>${t.label}</option>\n            `).join('')}\n          </select>\n        </div>\n        <div class=\"filter-group\">\n          <label>Signal Type</label>\n          <select id=\"signal-type-select\" class=\"filter-select\">\n            ${SIGNAL_TYPES.map(t => `\n              <option value=\"${t.id}\" ${this._signalType === t.id ? 'selected' : ''}>${t.label}</option>\n            `).join('')}\n          </select>\n        </div>\n        <div class=\"filter-group\">\n          <label>Source</label>\n          <select id=\"source-select\" class=\"filter-select\">\n            ${SIGNAL_SOURCES.map(s => `\n              <option value=\"${s.id}\" ${this._source === s.id ? 'selected' : ''}>${s.label}</option>\n            `).join('')}\n          </select>\n        </div>\n        <button class=\"btn btn-secondary\" id=\"refresh-btn\">\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\">\n            <polyline points=\"23 4 23 10 17 10\"/>\n            <path d=\"M20.49 15a9 9 0 11-2.12-9.36L23 10\"/>\n          </svg>\n          Refresh\n        </button>\n      </div>\n    `;\n  }\n\n  _renderSummaryCards() {\n    if (!this._metrics) {\n      return '<div class=\"empty-state\">No metrics available</div>';\n    }\n\n    const { totalSignals, signalsByType, signalsBySource, aggregation } = this._metrics;\n\n    return `\n      <div class=\"summary-cards\">\n        <div class=\"summary-card\">\n          <div class=\"summary-card-header\">\n            <span class=\"summary-card-title\">Total Signals</span>\n            <span class=\"summary-card-count\">${this._formatNumber(totalSignals || 0)}</span>\n          </div>\n          <div class=\"summary-card-detail\">Learning signals collected</div>\n          <div class=\"signal-breakdown\">\n            ${Object.entries(signalsByType || {}).map(([type, count]) => `\n              <div class=\"breakdown-item\">\n                <span class=\"breakdown-label\">${type.replace('_', ' ')}</span>\n                <span class=\"breakdown-value\">${this._formatNumber(count)}</span>\n              </div>\n            `).join('')}\n          </div>\n        </div>\n\n        <div class=\"summary-card\">\n          <div class=\"summary-card-header\">\n            <span class=\"summary-card-title\">Sources</span>\n            <span class=\"summary-card-count\">${Object.keys(signalsBySource || {}).length}</span>\n          </div>\n          <div class=\"summary-card-detail\">Signal sources active</div>\n          <div class=\"signal-breakdown\">\n            ${Object.entries(signalsBySource || {}).map(([source, count]) => `\n              <div class=\"breakdown-item\">\n                <span class=\"breakdown-label source-badge ${source}\">${source}</span>\n                <span class=\"breakdown-value\">${this._formatNumber(count)}</span>\n              </div>\n            `).join('')}\n          </div>\n        </div>\n\n        <div class=\"summary-card\">\n          <div class=\"summary-card-header\">\n            <span class=\"summary-card-title\">Patterns Found</span>\n            <span class=\"summary-card-count\">${this._formatNumber(\n              (aggregation?.preferences?.length || 0) +\n              (aggregation?.error_patterns?.length || 0) +\n              (aggregation?.success_patterns?.length || 0)\n            )}</span>\n          </div>\n          <div class=\"summary-card-detail\">Aggregated learnings</div>\n          <div class=\"pattern-counts\">\n            <div class=\"pattern-count\">\n              <span class=\"pattern-icon preferences\">P</span>\n              <span>${aggregation?.preferences?.length || 0} Preferences</span>\n            </div>\n            <div class=\"pattern-count\">\n              <span class=\"pattern-icon errors\">E</span>\n              <span>${aggregation?.error_patterns?.length || 0} Errors</span>\n            </div>\n            <div class=\"pattern-count\">\n              <span class=\"pattern-icon success\">S</span>\n              <span>${aggregation?.success_patterns?.length || 0} Success</span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"summary-card\">\n          <div class=\"summary-card-header\">\n            <span class=\"summary-card-title\">Avg Confidence</span>\n            <span class=\"summary-card-count confidence-high\">\n              ${this._formatPercent(this._metrics.avgConfidence || 0)}\n            </span>\n          </div>\n          <div class=\"summary-card-detail\">Signal reliability</div>\n          <div class=\"confidence-bar\">\n            <div class=\"confidence-fill\" style=\"width: ${(this._metrics.avgConfidence || 0) * 100}%\"></div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  _renderTrendChart() {\n    if (!this._trends || !this._trends.dataPoints || this._trends.dataPoints.length === 0) {\n      return '<div class=\"chart-empty\">No trend data available</div>';\n    }\n\n    const { dataPoints, maxValue } = this._trends;\n    const chartHeight = 120;\n    const chartWidth = 400;\n    const padding = 20;\n\n    // Create SVG path for the trend line\n    const points = dataPoints.map((point, i) => {\n      const x = padding + (i / (dataPoints.length - 1 || 1)) * (chartWidth - padding * 2);\n      const y = chartHeight - padding - ((point.count / (maxValue || 1)) * (chartHeight - padding * 2));\n      return `${x},${y}`;\n    }).join(' ');\n\n    // Create area fill\n    const areaPoints = `${padding},${chartHeight - padding} ${points} ${chartWidth - padding},${chartHeight - padding}`;\n\n    return `\n      <div class=\"trend-chart\">\n        <div class=\"chart-header\">\n          <span class=\"chart-title\">Signal Volume Over Time</span>\n          <span class=\"chart-subtitle\">${this._trends.period}</span>\n        </div>\n        <svg class=\"chart-svg\" viewBox=\"0 0 ${chartWidth} ${chartHeight}\">\n          <!-- Grid lines -->\n          <line x1=\"${padding}\" y1=\"${padding}\" x2=\"${padding}\" y2=\"${chartHeight - padding}\" stroke=\"var(--loki-border)\" stroke-width=\"1\"/>\n          <line x1=\"${padding}\" y1=\"${chartHeight - padding}\" x2=\"${chartWidth - padding}\" y2=\"${chartHeight - padding}\" stroke=\"var(--loki-border)\" stroke-width=\"1\"/>\n\n          <!-- Area fill -->\n          <polygon points=\"${areaPoints}\" fill=\"var(--loki-accent-muted)\" />\n\n          <!-- Trend line -->\n          <polyline points=\"${points}\" fill=\"none\" stroke=\"var(--loki-accent)\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\n          <!-- Data points -->\n          ${dataPoints.map((point, i) => {\n            const x = padding + (i / (dataPoints.length - 1 || 1)) * (chartWidth - padding * 2);\n            const y = chartHeight - padding - ((point.count / (maxValue || 1)) * (chartHeight - padding * 2));\n            return `<circle cx=\"${x}\" cy=\"${y}\" r=\"3\" fill=\"var(--loki-accent)\" />`;\n          }).join('')}\n        </svg>\n        <div class=\"chart-labels\">\n          ${dataPoints.length > 0 ? `\n            <span class=\"chart-label-start\">${dataPoints[0].label}</span>\n            <span class=\"chart-label-end\">${dataPoints[dataPoints.length - 1].label}</span>\n          ` : ''}\n        </div>\n      </div>\n    `;\n  }\n\n  _renderTopLists() {\n    if (!this._metrics?.aggregation) {\n      return '';\n    }\n\n    const { preferences, error_patterns, success_patterns, tool_efficiencies } = this._metrics.aggregation;\n\n    return `\n      <div class=\"top-lists\">\n        <!-- User Preferences -->\n        <div class=\"top-list\">\n          <div class=\"list-header\">\n            <span class=\"list-title\">Top User Preferences</span>\n            <span class=\"list-count\">${preferences?.length || 0}</span>\n          </div>\n          <div class=\"list-items\" role=\"list\">\n            ${(preferences || []).slice(0, 5).map(p => `\n              <div class=\"list-item\" data-type=\"preference\" data-id=\"${p.preference_key}\" tabindex=\"0\" role=\"listitem\">\n                <div class=\"item-main\">\n                  <span class=\"item-key\">${this._escapeHtml(p.preference_key)}</span>\n                  <span class=\"item-value\">${this._escapeHtml(String(p.preferred_value))}</span>\n                </div>\n                <div class=\"item-meta\">\n                  <span class=\"item-freq\">${p.frequency}x</span>\n                  <span class=\"item-conf\">${this._formatPercent(p.confidence)}</span>\n                </div>\n              </div>\n            `).join('') || '<div class=\"list-empty\">No preferences found</div>'}\n          </div>\n        </div>\n\n        <!-- Error Patterns -->\n        <div class=\"top-list\">\n          <div class=\"list-header\">\n            <span class=\"list-title\">Common Error Patterns</span>\n            <span class=\"list-count\">${error_patterns?.length || 0}</span>\n          </div>\n          <div class=\"list-items\" role=\"list\">\n            ${(error_patterns || []).slice(0, 5).map(e => `\n              <div class=\"list-item error-item\" data-type=\"error_pattern\" data-id=\"${e.error_type}\" tabindex=\"0\" role=\"listitem\">\n                <div class=\"item-main\">\n                  <span class=\"item-key\">${this._escapeHtml(e.error_type)}</span>\n                  <span class=\"resolution-rate ${e.resolution_rate > 0.5 ? 'good' : 'poor'}\">${this._formatPercent(e.resolution_rate)} resolved</span>\n                </div>\n                <div class=\"item-meta\">\n                  <span class=\"item-freq\">${e.frequency}x</span>\n                  <span class=\"item-conf\">${this._formatPercent(e.confidence)}</span>\n                </div>\n              </div>\n            `).join('') || '<div class=\"list-empty\">No error patterns found</div>'}\n          </div>\n        </div>\n\n        <!-- Success Patterns -->\n        <div class=\"top-list\">\n          <div class=\"list-header\">\n            <span class=\"list-title\">Success Patterns</span>\n            <span class=\"list-count\">${success_patterns?.length || 0}</span>\n          </div>\n          <div class=\"list-items\" role=\"list\">\n            ${(success_patterns || []).slice(0, 5).map(s => `\n              <div class=\"list-item success-item\" data-type=\"success_pattern\" data-id=\"${s.pattern_name}\" tabindex=\"0\" role=\"listitem\">\n                <div class=\"item-main\">\n                  <span class=\"item-key\">${this._escapeHtml(s.pattern_name)}</span>\n                  <span class=\"item-duration\">${this._formatDuration(s.avg_duration_seconds)}</span>\n                </div>\n                <div class=\"item-meta\">\n                  <span class=\"item-freq\">${s.frequency}x</span>\n                  <span class=\"item-conf\">${this._formatPercent(s.confidence)}</span>\n                </div>\n              </div>\n            `).join('') || '<div class=\"list-empty\">No success patterns found</div>'}\n          </div>\n        </div>\n\n        <!-- Tool Efficiency -->\n        <div class=\"top-list\">\n          <div class=\"list-header\">\n            <span class=\"list-title\">Tool Efficiency Rankings</span>\n            <span class=\"list-count\">${tool_efficiencies?.length || 0}</span>\n          </div>\n          <div class=\"list-items\" role=\"list\">\n            ${(tool_efficiencies || []).slice(0, 5).map((t, i) => `\n              <div class=\"list-item tool-item\" data-type=\"tool_efficiency\" data-id=\"${t.tool_name}\" tabindex=\"0\" role=\"listitem\">\n                <div class=\"item-rank\">#${i + 1}</div>\n                <div class=\"item-main\">\n                  <span class=\"item-key\">${this._escapeHtml(t.tool_name)}</span>\n                  <span class=\"efficiency-score\">${(t.efficiency_score * 100).toFixed(0)}</span>\n                </div>\n                <div class=\"item-meta\">\n                  <span class=\"success-rate ${t.success_rate > 0.8 ? 'good' : ''}\">${this._formatPercent(t.success_rate)}</span>\n                  <span class=\"item-time\">${t.avg_execution_time_ms.toFixed(0)}ms</span>\n                </div>\n              </div>\n            `).join('') || '<div class=\"list-empty\">No tool data found</div>'}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  _renderRecentSignals() {\n    if (!this._signals || this._signals.length === 0) {\n      return '<div class=\"signals-empty\">No recent signals</div>';\n    }\n\n    return `\n      <div class=\"recent-signals\">\n        <div class=\"signals-header\">\n          <span class=\"signals-title\">Recent Signals</span>\n          <span class=\"signals-count\">${this._signals.length}</span>\n        </div>\n        <div class=\"signals-list\">\n          ${this._signals.slice(0, 10).map(s => `\n            <div class=\"signal-item\">\n              <div class=\"signal-type ${s.type}\">${s.type.replace('_', ' ')}</div>\n              <div class=\"signal-content\">\n                <span class=\"signal-action\">${this._escapeHtml(s.action)}</span>\n                <span class=\"signal-source\">${s.source}</span>\n              </div>\n              <div class=\"signal-meta\">\n                <span class=\"signal-outcome ${s.outcome}\">${s.outcome}</span>\n                <span class=\"signal-time\">${new Date(s.timestamp).toLocaleTimeString()}</span>\n              </div>\n            </div>\n          `).join('')}\n        </div>\n      </div>\n    `;\n  }\n\n  _renderDetailPanel() {\n    if (!this._selectedMetric) return '';\n\n    const { type, item } = this._selectedMetric;\n    let content = '';\n\n    switch (type) {\n      case 'preference':\n        content = `\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Preference Key</span>\n            <span class=\"detail-value\">${this._escapeHtml(item.preference_key)}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Preferred Value</span>\n            <span class=\"detail-value\">${this._escapeHtml(String(item.preferred_value))}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Frequency</span>\n            <span class=\"detail-value\">${item.frequency} occurrences</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Confidence</span>\n            <span class=\"detail-value\">${this._formatPercent(item.confidence)}</span>\n          </div>\n          ${item.alternatives_rejected?.length ? `\n            <div class=\"detail-section\">\n              <div class=\"detail-label\">Alternatives Rejected</div>\n              <ul class=\"detail-list\">\n                ${item.alternatives_rejected.map(a => `<li>${this._escapeHtml(a)}</li>`).join('')}\n              </ul>\n            </div>\n          ` : ''}\n        `;\n        break;\n\n      case 'error_pattern':\n        content = `\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Error Type</span>\n            <span class=\"detail-value\">${this._escapeHtml(item.error_type)}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Resolution Rate</span>\n            <span class=\"detail-value\">${this._formatPercent(item.resolution_rate)}</span>\n          </div>\n          ${item.common_messages?.length ? `\n            <div class=\"detail-section\">\n              <div class=\"detail-label\">Common Messages</div>\n              <ul class=\"detail-list\">\n                ${item.common_messages.map(m => `<li>${this._escapeHtml(m)}</li>`).join('')}\n              </ul>\n            </div>\n          ` : ''}\n          ${item.resolutions?.length ? `\n            <div class=\"detail-section\">\n              <div class=\"detail-label\">Known Resolutions</div>\n              <ul class=\"detail-list success\">\n                ${item.resolutions.map(r => `<li>${this._escapeHtml(r)}</li>`).join('')}\n              </ul>\n            </div>\n          ` : ''}\n        `;\n        break;\n\n      case 'success_pattern':\n        content = `\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Pattern Name</span>\n            <span class=\"detail-value\">${this._escapeHtml(item.pattern_name)}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Avg Duration</span>\n            <span class=\"detail-value\">${this._formatDuration(item.avg_duration_seconds)}</span>\n          </div>\n          ${item.common_actions?.length ? `\n            <div class=\"detail-section\">\n              <div class=\"detail-label\">Common Actions</div>\n              <ol class=\"detail-list numbered\">\n                ${item.common_actions.map(a => `<li>${this._escapeHtml(a)}</li>`).join('')}\n              </ol>\n            </div>\n          ` : ''}\n        `;\n        break;\n\n      case 'tool_efficiency':\n        content = `\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Tool Name</span>\n            <span class=\"detail-value\">${this._escapeHtml(item.tool_name)}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Usage Count</span>\n            <span class=\"detail-value\">${item.usage_count}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Success Rate</span>\n            <span class=\"detail-value\">${this._formatPercent(item.success_rate)}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Avg Execution Time</span>\n            <span class=\"detail-value\">${item.avg_execution_time_ms.toFixed(0)}ms</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Total Tokens</span>\n            <span class=\"detail-value\">${this._formatNumber(item.total_tokens_used)}</span>\n          </div>\n          ${item.alternative_tools?.length ? `\n            <div class=\"detail-section\">\n              <div class=\"detail-label\">Alternative Tools</div>\n              <div class=\"tag-list\">\n                ${item.alternative_tools.map(t => `<span class=\"tag\">${this._escapeHtml(t)}</span>`).join('')}\n              </div>\n            </div>\n          ` : ''}\n        `;\n        break;\n    }\n\n    return `\n      <div class=\"detail-panel\">\n        <div class=\"detail-header\">\n          <h3>${type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase())}</h3>\n          <button class=\"close-btn\" id=\"close-detail\">&times;</button>\n        </div>\n        <div class=\"detail-body\">\n          ${content}\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Sources</span>\n            <div class=\"source-tags\">\n              ${(item.sources || []).map(s => `<span class=\"source-badge ${s}\">${s}</span>`).join('')}\n            </div>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">First Seen</span>\n            <span class=\"detail-value\">${item.first_seen ? new Date(item.first_seen).toLocaleDateString() : '--'}</span>\n          </div>\n          <div class=\"detail-row\">\n            <span class=\"detail-label\">Last Seen</span>\n            <span class=\"detail-value\">${item.last_seen ? new Date(item.last_seen).toLocaleDateString() : '--'}</span>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  render() {\n    const styles = `\n      <style>\n        :host {\n          display: block;\n          ${this.getBaseStyles()}\n        }\n\n        .learning-dashboard {\n          background: var(--loki-bg-card);\n          border: 1px solid var(--loki-border);\n          border-radius: 10px;\n          overflow: hidden;\n        }\n\n        .dashboard-header {\n          padding: 12px 16px;\n          border-bottom: 1px solid var(--loki-border);\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .dashboard-title {\n          font-size: 14px;\n          font-weight: 600;\n          color: var(--loki-text-primary);\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n\n        .dashboard-title svg {\n          color: var(--loki-accent);\n        }\n\n        /* Filters */\n        .filters {\n          display: flex;\n          gap: 12px;\n          align-items: center;\n          padding: 12px 16px;\n          background: var(--loki-bg-secondary);\n          border-bottom: 1px solid var(--loki-border);\n          flex-wrap: wrap;\n        }\n\n        .filter-group {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        .filter-group label {\n          font-size: 10px;\n          font-weight: 500;\n          color: var(--loki-text-muted);\n          text-transform: uppercase;\n        }\n\n        .filter-select {\n          padding: 6px 10px;\n          background: var(--loki-bg-card);\n          border: 1px solid var(--loki-border);\n          border-radius: 4px;\n          font-size: 12px;\n          color: var(--loki-text-primary);\n          cursor: pointer;\n        }\n\n        .filter-select:focus {\n          outline: none;\n          border-color: var(--loki-accent);\n        }\n\n        /* Dashboard Content */\n        .dashboard-content {\n          padding: 16px;\n          display: flex;\n          gap: 16px;\n          min-height: 400px;\n        }\n\n        .content-main {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .loading, .error-state {\n          text-align: center;\n          padding: 40px;\n          color: var(--loki-text-muted);\n        }\n\n        .error-state {\n          color: var(--loki-red);\n        }\n\n        /* Summary Cards */\n        .summary-cards {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 12px;\n          margin-bottom: 20px;\n        }\n\n        .summary-card {\n          background: var(--loki-bg-secondary);\n          border-radius: 8px;\n          padding: 14px;\n        }\n\n        .summary-card-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 6px;\n        }\n\n        .summary-card-title {\n          font-size: 12px;\n          font-weight: 600;\n          color: var(--loki-text-primary);\n        }\n\n        .summary-card-count {\n          font-size: 20px;\n          font-weight: 600;\n          font-family: 'JetBrains Mono', monospace;\n          color: var(--loki-accent);\n        }\n\n        .summary-card-count.confidence-high {\n          color: var(--loki-green);\n        }\n\n        .summary-card-detail {\n          font-size: 11px;\n          color: var(--loki-text-muted);\n          margin-bottom: 10px;\n        }\n\n        .signal-breakdown {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n        }\n\n        .breakdown-item {\n          display: flex;\n          justify-content: space-between;\n          font-size: 11px;\n        }\n\n        .breakdown-label {\n          color: var(--loki-text-secondary);\n          text-transform: capitalize;\n        }\n\n        .breakdown-value {\n          color: var(--loki-text-primary);\n          font-family: 'JetBrains Mono', monospace;\n        }\n\n        .source-badge {\n          padding: 2px 6px;\n          border-radius: 3px;\n          font-size: 9px;\n          text-transform: uppercase;\n          font-weight: 500;\n        }\n\n        .source-badge.cli { background: var(--loki-blue-muted); color: var(--loki-blue); }\n        .source-badge.api { background: var(--loki-green-muted); color: var(--loki-green); }\n        .source-badge.vscode { background: var(--loki-purple-muted); color: var(--loki-purple); }\n        .source-badge.mcp { background: var(--loki-yellow-muted); color: var(--loki-yellow); }\n        .source-badge.dashboard { background: var(--loki-accent-muted); color: var(--loki-accent); }\n\n        .pattern-counts {\n          display: flex;\n          flex-direction: column;\n          gap: 6px;\n        }\n\n        .pattern-count {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 11px;\n          color: var(--loki-text-secondary);\n        }\n\n        .pattern-icon {\n          width: 18px;\n          height: 18px;\n          border-radius: 4px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 10px;\n          font-weight: 600;\n        }\n\n        .pattern-icon.preferences { background: var(--loki-blue-muted); color: var(--loki-blue); }\n        .pattern-icon.errors { background: var(--loki-red-muted); color: var(--loki-red); }\n        .pattern-icon.success { background: var(--loki-green-muted); color: var(--loki-green); }\n\n        .confidence-bar {\n          height: 4px;\n          background: var(--loki-bg-tertiary);\n          border-radius: 2px;\n          overflow: hidden;\n        }\n\n        .confidence-fill {\n          height: 100%;\n          background: var(--loki-green);\n          border-radius: 2px;\n          transition: width 0.3s ease;\n        }\n\n        /* Trend Chart */\n        .trend-chart {\n          background: var(--loki-bg-secondary);\n          border-radius: 8px;\n          padding: 14px;\n          margin-bottom: 20px;\n        }\n\n        .chart-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 12px;\n        }\n\n        .chart-title {\n          font-size: 12px;\n          font-weight: 600;\n          color: var(--loki-text-primary);\n        }\n\n        .chart-subtitle {\n          font-size: 11px;\n          color: var(--loki-text-muted);\n        }\n\n        .chart-svg {\n          width: 100%;\n          height: 120px;\n        }\n\n        .chart-labels {\n          display: flex;\n          justify-content: space-between;\n          font-size: 10px;\n          color: var(--loki-text-muted);\n          margin-top: 4px;\n        }\n\n        .chart-empty {\n          text-align: center;\n          padding: 40px;\n          color: var(--loki-text-muted);\n          font-size: 12px;\n          background: var(--loki-bg-secondary);\n          border-radius: 8px;\n          margin-bottom: 20px;\n        }\n\n        /* Top Lists */\n        .top-lists {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n          gap: 12px;\n          margin-bottom: 20px;\n        }\n\n        .top-list {\n          background: var(--loki-bg-secondary);\n          border-radius: 8px;\n          overflow: hidden;\n        }\n\n        .list-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 10px 12px;\n          background: var(--loki-bg-tertiary);\n        }\n\n        .list-title {\n          font-size: 11px;\n          font-weight: 600;\n          color: var(--loki-text-primary);\n        }\n\n        .list-count {\n          font-size: 10px;\n          padding: 2px 6px;\n          background: var(--loki-bg-card);\n          border-radius: 10px;\n          color: var(--loki-text-muted);\n        }\n\n        .list-items {\n          max-height: 200px;\n          overflow-y: auto;\n        }\n\n        .list-item {\n          padding: 10px 12px;\n          border-bottom: 1px solid var(--loki-border);\n          cursor: pointer;\n          transition: background var(--loki-transition);\n        }\n\n        .list-item:hover {\n          background: var(--loki-bg-hover);\n        }\n\n        .list-item:last-child {\n          border-bottom: none;\n        }\n\n        .item-main {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 4px;\n        }\n\n        .item-key {\n          font-size: 12px;\n          font-weight: 500;\n          color: var(--loki-text-primary);\n          flex: 1;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n\n        .item-value {\n          font-size: 11px;\n          color: var(--loki-accent);\n          margin-left: 8px;\n        }\n\n        .item-meta {\n          display: flex;\n          gap: 12px;\n          font-size: 10px;\n          color: var(--loki-text-muted);\n        }\n\n        .item-freq {\n          color: var(--loki-blue);\n        }\n\n        .item-conf {\n          color: var(--loki-green);\n        }\n\n        .item-rank {\n          font-size: 11px;\n          font-weight: 600;\n          color: var(--loki-accent);\n          margin-right: 8px;\n        }\n\n        .efficiency-score {\n          font-family: 'JetBrains Mono', monospace;\n          font-size: 12px;\n          font-weight: 600;\n          color: var(--loki-green);\n        }\n\n        .success-rate.good {\n          color: var(--loki-green);\n        }\n\n        .resolution-rate {\n          font-size: 10px;\n          padding: 2px 6px;\n          border-radius: 3px;\n        }\n\n        .resolution-rate.good {\n          background: var(--loki-green-muted);\n          color: var(--loki-green);\n        }\n\n        .resolution-rate.poor {\n          background: var(--loki-red-muted);\n          color: var(--loki-red);\n        }\n\n        .item-duration {\n          font-size: 10px;\n          color: var(--loki-text-muted);\n        }\n\n        .list-empty {\n          padding: 20px;\n          text-align: center;\n          font-size: 11px;\n          color: var(--loki-text-muted);\n        }\n\n        /* Recent Signals */\n        .recent-signals {\n          background: var(--loki-bg-secondary);\n          border-radius: 8px;\n          overflow: hidden;\n        }\n\n        .signals-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 10px 12px;\n          background: var(--loki-bg-tertiary);\n        }\n\n        .signals-title {\n          font-size: 11px;\n          font-weight: 600;\n          color: var(--loki-text-primary);\n        }\n\n        .signals-count {\n          font-size: 10px;\n          padding: 2px 6px;\n          background: var(--loki-bg-card);\n          border-radius: 10px;\n          color: var(--loki-text-muted);\n        }\n\n        .signals-list {\n          max-height: 300px;\n          overflow-y: auto;\n        }\n\n        .signal-item {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          padding: 8px 12px;\n          border-bottom: 1px solid var(--loki-border);\n        }\n\n        .signal-item:last-child {\n          border-bottom: none;\n        }\n\n        .signal-type {\n          font-size: 9px;\n          padding: 3px 6px;\n          border-radius: 3px;\n          text-transform: uppercase;\n          font-weight: 500;\n          white-space: nowrap;\n        }\n\n        .signal-type.user_preference { background: var(--loki-blue-muted); color: var(--loki-blue); }\n        .signal-type.error_pattern { background: var(--loki-red-muted); color: var(--loki-red); }\n        .signal-type.success_pattern { background: var(--loki-green-muted); color: var(--loki-green); }\n        .signal-type.tool_efficiency { background: var(--loki-purple-muted); color: var(--loki-purple); }\n        .signal-type.context_relevance { background: var(--loki-yellow-muted); color: var(--loki-yellow); }\n\n        .signal-content {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .signal-action {\n          font-size: 12px;\n          color: var(--loki-text-primary);\n          display: block;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n\n        .signal-source {\n          font-size: 10px;\n          color: var(--loki-text-muted);\n        }\n\n        .signal-meta {\n          display: flex;\n          flex-direction: column;\n          align-items: flex-end;\n          gap: 2px;\n        }\n\n        .signal-outcome {\n          font-size: 9px;\n          padding: 2px 5px;\n          border-radius: 3px;\n          text-transform: uppercase;\n        }\n\n        .signal-outcome.success { background: var(--loki-green-muted); color: var(--loki-green); }\n        .signal-outcome.failure { background: var(--loki-red-muted); color: var(--loki-red); }\n        .signal-outcome.partial { background: var(--loki-yellow-muted); color: var(--loki-yellow); }\n        .signal-outcome.unknown { background: var(--loki-bg-tertiary); color: var(--loki-text-muted); }\n\n        .signal-time {\n          font-size: 10px;\n          color: var(--loki-text-muted);\n        }\n\n        .signals-empty {\n          padding: 30px;\n          text-align: center;\n          font-size: 12px;\n          color: var(--loki-text-muted);\n        }\n\n        /* Detail Panel */\n        .detail-panel {\n          width: 300px;\n          min-width: 300px;\n          background: var(--loki-bg-secondary);\n          border-left: 1px solid var(--loki-border);\n          margin: -16px -16px -16px 16px;\n          padding: 16px;\n          overflow-y: auto;\n        }\n\n        .detail-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 16px;\n        }\n\n        .detail-header h3 {\n          font-size: 14px;\n          font-weight: 600;\n          color: var(--loki-text-primary);\n          text-transform: capitalize;\n        }\n\n        .close-btn {\n          background: none;\n          border: none;\n          font-size: 20px;\n          color: var(--loki-text-muted);\n          cursor: pointer;\n          padding: 0;\n          line-height: 1;\n        }\n\n        .close-btn:hover {\n          color: var(--loki-text-primary);\n        }\n\n        .detail-row {\n          display: flex;\n          justify-content: space-between;\n          padding: 8px 0;\n          border-bottom: 1px solid var(--loki-border);\n          font-size: 12px;\n        }\n\n        .detail-label {\n          color: var(--loki-text-secondary);\n          font-weight: 500;\n        }\n\n        .detail-value {\n          color: var(--loki-text-primary);\n        }\n\n        .detail-section {\n          margin-top: 12px;\n        }\n\n        .detail-list {\n          padding-left: 18px;\n          margin-top: 6px;\n          font-size: 11px;\n          color: var(--loki-text-primary);\n        }\n\n        .detail-list li {\n          margin-bottom: 4px;\n        }\n\n        .detail-list.success li {\n          color: var(--loki-green);\n        }\n\n        .source-tags {\n          display: flex;\n          gap: 4px;\n          flex-wrap: wrap;\n        }\n\n        .tag-list {\n          display: flex;\n          gap: 4px;\n          flex-wrap: wrap;\n          margin-top: 6px;\n        }\n\n        .tag {\n          font-size: 10px;\n          padding: 3px 8px;\n          background: var(--loki-bg-tertiary);\n          border-radius: 4px;\n          color: var(--loki-text-secondary);\n        }\n\n        .empty-state {\n          text-align: center;\n          padding: 40px;\n          color: var(--loki-text-muted);\n          font-size: 12px;\n        }\n      </style>\n    `;\n\n    let content;\n    if (this._loading) {\n      content = '<div class=\"loading\">Loading learning metrics...</div>';\n    } else if (this._error) {\n      content = `<div class=\"error-state\">Error: ${this._error}</div>`;\n    } else {\n      content = `\n        <div class=\"content-main\">\n          ${this._renderSummaryCards()}\n          ${this._renderTrendChart()}\n          ${this._renderTopLists()}\n          ${this._renderRecentSignals()}\n        </div>\n        ${this._renderDetailPanel()}\n      `;\n    }\n\n    this.shadowRoot.innerHTML = `\n      ${styles}\n      <div class=\"learning-dashboard\">\n        <div class=\"dashboard-header\">\n          <span class=\"dashboard-title\">\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\">\n              <path d=\"M12 20V10\"/>\n              <path d=\"M18 20V4\"/>\n              <path d=\"M6 20v-4\"/>\n            </svg>\n            Learning Metrics Dashboard\n          </span>\n        </div>\n        ${this._renderFilters()}\n        <div class=\"dashboard-content\">\n          ${content}\n        </div>\n      </div>\n    `;\n\n    this._attachEventListeners();\n  }\n\n  _attachEventListeners() {\n    // Filter selects\n    const timeRangeSelect = this.shadowRoot.getElementById('time-range-select');\n    if (timeRangeSelect) {\n      timeRangeSelect.addEventListener('change', (e) => this._setFilter('timeRange', e.target.value));\n    }\n\n    const signalTypeSelect = this.shadowRoot.getElementById('signal-type-select');\n    if (signalTypeSelect) {\n      signalTypeSelect.addEventListener('change', (e) => this._setFilter('signalType', e.target.value));\n    }\n\n    const sourceSelect = this.shadowRoot.getElementById('source-select');\n    if (sourceSelect) {\n      sourceSelect.addEventListener('change', (e) => this._setFilter('source', e.target.value));\n    }\n\n    // Refresh button\n    const refreshBtn = this.shadowRoot.getElementById('refresh-btn');\n    if (refreshBtn) {\n      refreshBtn.addEventListener('click', () => this._loadData());\n    }\n\n    // Close detail button\n    const closeBtn = this.shadowRoot.getElementById('close-detail');\n    if (closeBtn) {\n      closeBtn.addEventListener('click', () => this._closeDetail());\n    }\n\n    // List items\n    this.shadowRoot.querySelectorAll('.list-item').forEach(item => {\n      item.addEventListener('click', () => {\n        const type = item.dataset.type;\n        const id = item.dataset.id;\n        const itemData = this._findItemData(type, id);\n        if (itemData) {\n          this._selectMetric(type, itemData);\n        }\n      });\n\n      item.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          item.click();\n        }\n      });\n    });\n  }\n\n  _findItemData(type, id) {\n    if (!this._metrics?.aggregation) return null;\n\n    switch (type) {\n      case 'preference':\n        return this._metrics.aggregation.preferences?.find(p => p.preference_key === id);\n      case 'error_pattern':\n        return this._metrics.aggregation.error_patterns?.find(e => e.error_type === id);\n      case 'success_pattern':\n        return this._metrics.aggregation.success_patterns?.find(s => s.pattern_name === id);\n      case 'tool_efficiency':\n        return this._metrics.aggregation.tool_efficiencies?.find(t => t.tool_name === id);\n      default:\n        return null;\n    }\n  }\n}\n\n// Register the component\ncustomElements.define('loki-learning-dashboard', LokiLearningDashboard);\n\nexport default LokiLearningDashboard;\n"],
  "mappings": "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;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA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",
  "names": ["index_exports", "__export", "ANIMATION", "ARIA_PATTERNS", "ApiEvents", "BASE_STYLES", "BREAKPOINTS", "COMMON_STYLES", "KEYBOARD_SHORTCUTS", "KeyboardHandler", "LokiApiClient", "LokiElement", "LokiLearningDashboard", "LokiLogStream", "LokiMemoryBrowser", "LokiSessionControl", "LokiState", "LokiTaskBoard", "LokiTheme", "RADIUS", "SPACING", "STATE_CHANGE_EVENT", "THEMES", "THEME_VARIABLES", "TYPOGRAPHY", "UnifiedThemeManager", "VERSION", "Z_INDEX", "createApiClient", "createStore", "generateThemeCSS", "generateTokensCSS", "getApiClient", "getState", "init", "THEMES", "SPACING", "RADIUS", "TYPOGRAPHY", "ANIMATION", "BREAKPOINTS", "Z_INDEX", "KEYBOARD_SHORTCUTS", "ARIA_PATTERNS", "generateThemeCSS", "themeName", "theme", "key", "value", "generateTokensCSS", "BASE_STYLES", "_UnifiedThemeManager", "body", "bgColor", "rgb", "vsTheme", "saved", "current", "next", "newTheme", "__publicField", "UnifiedThemeManager", "KeyboardHandler", "action", "handler", "shortcut", "enabled", "event", "modifiers", "hasCtrl", "hasShift", "hasAlt", "ctrlMatch", "shiftMatch", "altMatch", "element", "e", "THEME_VARIABLES", "COMMON_STYLES", "_LokiTheme", "UnifiedThemeManager", "theme", "THEMES", "generateThemeCSS", "vars", "key", "value", "element", "__publicField", "LokiTheme", "LokiElement", "KeyboardHandler", "action", "handler", "generateTokensCSS", "BASE_STYLES", "patternName", "ARIA_PATTERNS", "pattern", "attrName", "POLL_INTERVALS", "CONTEXT_DEFAULTS", "DEFAULT_CONFIG", "ApiEvents", "_LokiApiClient", "config", "baseUrl", "instance", "interval", "mode", "event", "message", "type", "data", "action", "payload", "url", "resolve", "reject", "error", "e", "eventType", "endpoint", "options", "controller", "timeout", "response", "useCache", "cached", "body", "status", "query", "projectId", "filters", "params", "taskId", "position", "episodeId", "patternId", "skillId", "taskType", "topK", "sinceHours", "includeInactive", "path", "name", "alias", "maxDepth", "projectIds", "queryStr", "limit", "callback", "pollFn", "effectiveInterval", "__publicField", "LokiApiClient", "createApiClient", "getApiClient", "STATE_CHANGE_EVENT", "DEFAULT_STATE", "_LokiState", "saved", "parsed", "defaults", "result", "key", "toSave", "path", "parts", "value", "part", "persist", "lastKey", "target", "oldValue", "updates", "changes", "change", "subscribers", "callback", "e", "parentPath", "parentSubscribers", "subs", "index", "defaultValue", "task", "tasks", "newTask", "taskId", "t", "updatedTask", "newStatus", "position", "k", "v", "data", "serverTasks", "markedLocal", "status", "__publicField", "LokiState", "getState", "createStore", "state", "COLUMNS", "LokiTaskBoard", "LokiElement", "getState", "ApiEvents", "name", "oldValue", "newValue", "apiUrl", "getApiClient", "projectId", "filters", "localTasks", "t", "error", "status", "task", "el", "newStatus", "taskId", "oldStatus", "styles", "columnIcon", "content", "readonly", "COLUMNS", "col", "tasks", "refreshBtn", "btn", "card", "e", "zone", "text", "div", "currentCard", "direction", "cards", "currentIndex", "targetIndex", "LokiSessionControl", "LokiElement", "getState", "name", "oldValue", "newValue", "apiUrl", "getApiClient", "ApiEvents", "e", "status", "seconds", "hours", "minutes", "secs", "isCompact", "statusClass", "statusLabel", "isRunning", "isPaused", "styles", "compactContent", "fullContent", "pauseBtn", "resumeBtn", "stopBtn", "startBtn", "LOG_LEVELS", "LokiLogStream", "LokiElement", "name", "oldValue", "newValue", "apiUrl", "getApiClient", "ApiEvents", "e", "logFile", "lastSize", "poll", "response", "lines", "newLines", "line", "match", "simpleMatch", "log", "entry", "output", "content", "blob", "url", "a", "filter", "level", "filteredLogs", "levelConfig", "text", "div", "styles", "filterInput", "levelSelect", "autoScrollBtn", "clearBtn", "downloadBtn", "message", "TABS", "LokiMemoryBrowser", "LokiElement", "name", "oldValue", "newValue", "apiUrl", "getApiClient", "error", "tab", "episodeId", "patternId", "skillId", "closeBtn", "result", "episodic", "semantic", "procedural", "tokenEconomics", "ep", "pat", "skill", "item", "a", "c", "p", "s", "e", "text", "div", "styles", "content", "tabContent", "index", "tabs", "tabsArray", "targetIndex", "card", "id", "currentCard", "direction", "cards", "currentIndex", "consolidateBtn", "refreshBtn", "TIME_RANGES", "SIGNAL_TYPES", "SIGNAL_SOURCES", "LokiLearningDashboard", "LokiElement", "name", "oldValue", "newValue", "apiUrl", "getApiClient", "params", "metricsRes", "trendsRes", "signalsRes", "error", "filterType", "value", "type", "item", "num", "seconds", "text", "div", "t", "s", "totalSignals", "signalsByType", "signalsBySource", "aggregation", "count", "source", "dataPoints", "maxValue", "chartHeight", "chartWidth", "padding", "points", "point", "i", "x", "y", "areaPoints", "preferences", "error_patterns", "success_patterns", "tool_efficiencies", "p", "e", "content", "a", "m", "r", "l", "styles", "timeRangeSelect", "signalTypeSelect", "sourceSelect", "refreshBtn", "closeBtn", "id", "itemData", "VERSION", "init", "config", "UnifiedThemeManager", "LokiTheme", "getApiClient"]
}
